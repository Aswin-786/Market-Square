/*! For license information please see main.ee5c537d.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case s:return e;default:return t}}case i:return t}}}function b(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return b(e)||w(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Te(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==xe||null!==Ie)&&(Ne(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,Tt,Et=!1,St=[],Ct=null,Nt=null,Rt=null,At=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Rt&&Ut(Rt)&&(Rt=null),At.forEach(jt),Pt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==Rt&&qt(Rt,e),At.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=_.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return In}var En=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Tr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Tr("animationend"),Sr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Or=Ar[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Sr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Rr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Sr:case Cr:s=mn;break;case Nr:s=Rn;break;case"scroll":s=fn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:_i(s),d=null==c?u:_i(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ti(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ei(e,t){xi++,bi[xi]=e.current,e.current=t}var Si={},Ci=Ii(Si),Ni=Ii(!1),Ri=Si;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ri=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),Ei(Ci,e)):Ti(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ma.current;Ti(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_u=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Sa(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Ra=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Pi(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Pi(t)?Ri:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=jc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),ia&&Ji(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Ji(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Za),Ei(Za,t)}function io(){Ti(Za),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ti(Za),Ti(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==_o;return _o=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Fs|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(_u=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(_u=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,_u=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Rs)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return So().memoizedState}function qo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_u=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ta,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ta,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rs)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Rs.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ta,useCallback:$o,useContext:Ta,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(So(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ta,useCallback:$o,useContext:Ta,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),fu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=_.ReactCurrentOwner,_u=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=To(),null===e||_u?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(_u=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(_u=!0)}}return Su(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Pi(n)?Ri:Ci.current;return a=Ai(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=To(),null===e||_u?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Wu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ai(t,c=Pi(n)?Ri:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Ra=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Ra?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Ra||Ba(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ta(s):s=Ai(t,s=Pi(n)?Ri:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Ra=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Ra||Ba(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),_u||s){if(null!==(r=Rs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Pi(t.type)&&Di(),Gu(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Ti(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),Du(e,t),null===e&&Br(t.stateNode.containerInfo),Gu(t),null;case 10:return ba(t.type._context),Gu(t),null;case 19:if(Ti(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*Xe()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var hs=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=hs,i=fs;hs=null,ds(e,t,n),fs=i,null!==(hs=r)&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:null!==hs&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(hs,n.stateNode));break;case 4:r=hs,i=fs,hs=n.stateNode.containerInfo,fs=!0,ds(e,t,n),hs=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Tc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:hs=s.stateNode,fs=!1;break e;case 3:case 4:hs=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===hs)throw Error(a(160));ps(o,u,i),hs=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Tc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Tc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Tc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Tc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Tc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Tc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Tc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||h,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Tc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(f);continue}}null!==p?(p.return=d,Zu=p):bs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Tc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Tc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Tc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,_s(e,t,n)}function _s(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,_s(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Tc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Tc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Tc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Tc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Tc(t,o,s)}}}catch(s){Tc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Ts=Math.ceil,Es=_.ReactCurrentDispatcher,Ss=_.ReactCurrentOwner,Cs=_.ReactCurrentBatchConfig,Ns=0,Rs=null,As=null,Ps=0,Ds=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,qs=null,Bs=0,zs=1/0,Ws=null,Ks=!1,Hs=null,Gs=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===Rs||(e===Rs&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(zs=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Rs?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(cc.bind(null,e)):qi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Rs?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(Rs===e&&Ps===t||(Ws=null,zs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Es.current=o,Ns=i,null!==As?t=0:(Rs=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,qs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,qs,Ws),t);break}bc(e,qs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ts(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,qs,Ws),r);break}bc(e,qs,Ws);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=qs,qs=n,null!==t&&uc(t)),e}function uc(e){null===qs?qs=e:qs.push.apply(qs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,qs,Ws),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(zs=Xe()+500,ji&&Bi())}}function hc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function fc(){Ds=Os.current,Ti(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ni),Ti(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(uo);break;case 10:ba(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Rs=e,As=e=Oc(e.current,null),Ps=Ds=t,Ls=0,Ms=null,js=Us=Fs=0,qs=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=As;try{if(wa(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,_o=0,Ss.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(_){t=_,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Rs||0===(268435455&Fs)&&0===(268435455&Us)||sc(Rs,Ps)}function mc(e,t){var n=Ns;Ns|=2;var r=vc();for(Rs===e&&Ps===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Es.current=r,null!==As)throw Error(a(261));return Rs=null,Ps=0,Ls}function gc(){for(;null!==As;)_c(As)}function kc(){for(;null!==As&&!Ye();)_c(As)}function _c(e){var t=Is(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ss.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function bc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Rs&&(As=Rs=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Rc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=_t($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:rs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(os(h),h===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var _=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Zu=_;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){Tc(s,s.return,b)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Xe()-Bs?dc(e,0):js|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Rc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case S:u=9;break e;case C:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=qc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_u=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _u=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Ku(e,t,n)}(e,t,n);_u=0!==(131072&e.flags)}else _u=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ta(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Wu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(zs=Xe()+500,Bi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},It=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,wi,Ee,Se,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],d=n.index;if(u+=e.slice(o,d),o=d+h.length,f)u+=f[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],_=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,b="+"===k||"*"===k,x="?"===k||"*"===k,I=n[2]||l,T=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:x,repeat:b,partial:w,asterisk:!!_,pattern:T?c(T):_?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=u[l.name];if(null==f){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=s(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');a+=l.prefix+h}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var f=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),o+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case s:return e;default:return t}}case i:return t}}}function b(e){return w(e)===h}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,_(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,T=null,E=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function R(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(I=!1,T=null)}}else I=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,x=function(){P.postMessage(null)}}else x=function(){m(R,0)};function D(e){T=e,I||(I=!0,x())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".76e80f40.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="database-samp:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/React-OLX-Clone/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkdatabase_samp=self.webpackChunkdatabase_samp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Pt},SDK_VERSION:function(){return rr},_DEFAULT_ENTRY_NAME:function(){return Wn},_addComponent:function(){return Qn},_addOrOverwriteComponent:function(){return Yn},_apps:function(){return Hn},_clearComponents:function(){return Zn},_components:function(){return Gn},_getProvider:function(){return Xn},_registerComponent:function(){return $n},_removeServiceInstance:function(){return Jn},deleteApp:function(){return ur},getApp:function(){return ar},getApps:function(){return or},initializeApp:function(){return ir},onLog:function(){return lr},registerVersion:function(){return cr},setLogLevel:function(){return hr}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}var c=n.p+"static/media/olx-logo.b3f099a2fe7978c70944.png",l=n(184),h=(0,t.createContext)(null),f=(0,t.createContext)(null);function d(e){var n=e.children,r=s(t.useState(null),2),i=r[0],a=r[1];return(0,l.jsx)(f.Provider,{value:{user:i,setUser:a},children:n})}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function m(e){return"/"===e.charAt(0)}function g(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var k=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&m(e),o=t&&m(t),u=a||o;if(e&&m(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var h=i[l];"."===h?g(i,l):".."===h?(g(i,l),c++):c&&(g(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&m(i[0])||i.unshift("");var f=i.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f},_=!0,w="Invariant failed";function b(e,t){if(!e){if(_)throw new Error(w);var n="function"===typeof t?t():t,r=n?"".concat(w,": ").concat(n):w;throw new Error(r)}}function x(e){return"/"===e.charAt(0)?e:"/"+e}function I(e){return"/"===e.charAt(0)?e.substr(1):e}function T(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function E(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function S(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function C(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=y({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=k(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function N(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var R=!("undefined"===typeof window||!window.document||!window.document.createElement);function A(e,t){t(window.confirm(e))}var P="popstate",D="hashchange";function O(){try{return window.history.state||{}}catch(e){return{}}}function L(e){void 0===e&&(e={}),R||b(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?A:u,c=i.keyLength,l=void 0===c?6:c,h=e.basename?E(x(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=T(a,h)),C(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=N();function v(e){y(V,e),V.length=t.length,p.notifyListeners(V.location,V.action)}function m(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||_(f(e.state))}function g(){_(f(O()))}var k=!1;function _(e){if(k)k=!1,v();else{p.confirmTransitionTo(e,"POP",s,(function(t){t?v({action:"POP",location:e}):function(e){var t=V.location,n=I.indexOf(t.key);-1===n&&(n=0);var r=I.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(k=!0,M(i))}(e)}))}}var w=f(O()),I=[w.key];function L(e){return h+S(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(P,m),r&&window.addEventListener(D,g)):0===F&&(window.removeEventListener(P,m),r&&window.removeEventListener(D,g))}var j=!1;var V={length:t.length,action:"POP",location:w,createHref:L,push:function(e,r){var i="PUSH",a=C(e,r,d(),V.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=I.indexOf(V.location.key),l=I.slice(0,c+1);l.push(a.key),I=l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=C(e,r,d(),V.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=I.indexOf(V.location.key);-1!==c&&(I[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=p.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var M="hashchange",F={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+I(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:I,decodePath:x},slash:{encodePath:x,decodePath:x}};function U(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function j(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function V(e){window.location.replace(U(window.location.href)+"#"+e)}function q(e){void 0===e&&{},R||b(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?A:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?E(x(e.basename)):"",s=F[o],c=s.encodePath,l=s.decodePath;function h(){var e=l(j());return u&&T(e,u),C(e)}var f=N();function d(e){y(L,e),L.length=t.length,f.notifyListeners(L.location,L.action)}var p=!1,v=null;function m(){var e=j(),t=c(e);if(e!==t)V(t);else{var n=h(),r=L.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(v===S(n))return;null,function(e){if(p)!1,d();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=L.location,n=w.lastIndexOf(S(t));-1===n&&0;var r=w.lastIndexOf(S(e));-1===r&&0;var i=n-r;i&&(!0,I(i))}(e)}))}}(n)}}var g=j(),k=c(g);g!==k&&V(k);var _=h(),w=[S(_)];function I(e){t.go(e)}var P=0;function D(e){1===(P+=e)&&1===e?window.addEventListener(M,m):0===P&&window.removeEventListener(M,m)}var O=!1;var L={length:t.length,action:"POP",location:_,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&U(window.location.href),n+"#"+c(u+S(e))},push:function(e,t){var n="PUSH",r=C(e,void 0,void 0,L.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=S(r),i=c(u+t);if(j()!==i){t,function(e){window.location.hash=e}(i);var a=w.lastIndexOf(S(L.location)),o=w.slice(0,a+1);o.push(t),o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=C(e,void 0,void 0,L.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=S(r),i=c(u+t);j()!==i&&(t,V(i));var a=w.indexOf(S(L.location));-1!==a&&(w[a]=t),d({action:n,location:r})}}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return O||(D(1),!0),function(){return O&&(!1,D(-1)),t()}},listen:function(e){var t=f.appendListener(e);return D(1),function(){D(-1),t()}}};return L}function B(e,t,n){return Math.min(Math.max(e,t),n)}var z=n(7),W=n.n(z),K=1073741823,H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var G=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return H[e]=(H[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}v(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):K,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=W().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}v(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?K:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?K:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=W().object,i),{Provider:o,Consumer:u}},Q=G,Y=n(239),$=n.n(Y);n(228);function X(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var J=function(e){var t=Q();return t.displayName=e,t},Z=J("Router-History"),ee=J("Router"),te=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}v(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(ee.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Z.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var ne={},re=1e4,ie=0;function ae(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=ne[n]||(ne[n]={});if(r[e])return r[e];var i=[],a={regexp:$()(e,i,t),keys:i};return ie<re&&(r[e]=a,ie++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],h=s.slice(1),f=e===l;return a&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var oe=function(e){function n(){return e.apply(this,arguments)||this}return v(n,e),n.prototype.render=function(){var e=this;return t.createElement(ee.Consumer,null,(function(n){n||b(!1);var r=e.props.location||n.location,i=y({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ae(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(ee.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ue(e){return"/"===e.charAt(0)?e:"/"+e}function se(e,t){if(!e)return t;var n=ue(e);return 0!==t.pathname.indexOf(n)?t:y({},t,{pathname:t.pathname.substr(n.length)})}function ce(e){return"string"===typeof e?e:S(e)}function le(e){return function(){b(!1)}}function he(){}t.Component;t.Component;var fe=t.useContext;function de(){return fe(Z)}function pe(){var e=s(t.useState(""),2),n=e[0],r=e[1],i=s(t.useState(""),2),a=i[0],o=i[1],u=s(t.useState(""),2),f=u[0],d=u[1],p=s(t.useState(""),2),v=p[0],y=p[1],m=t.useContext(h).firebase,g=de();return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"signupParentDiv",children:[(0,l.jsx)("img",{width:"200px",height:"200px",src:c,alt:""}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m.auth().createUserWithEmailAndPassword(a,v).then((function(e){e.user.updateProfile({displayName:n}).then((function(){m.firestore().collection("users").add({id:e.user.uid,userName:n,phone:f,email:a}).then((function(){g.push("/login")}))}))}))},children:[(0,l.jsx)("label",{htmlFor:"fname",children:"Username"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"text",id:"fname",name:"name",value:n,onChange:function(e){r(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"email",id:"fname1",name:"email",value:a,onChange:function(e){o(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"lname",children:"Phone"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"number",id:"name",name:"phone",value:f,onChange:function(e){d(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"password",id:"name1",name:"password",value:v,onChange:function(e){y(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{children:"Signup"})]}),(0,l.jsx)("a",{onClick:function(){return g.push("/login")},children:"Login"})]})})}function ve(){return(0,l.jsx)("div",{children:(0,l.jsx)(pe,{})})}var ye=function(){var e=s(t.useState(""),2),n=e[0],r=e[1],i=s(t.useState(""),2),a=i[0],o=i[1],u=(0,t.useContext)(h).firebase,f=de();return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"loginParentDiv",children:[(0,l.jsx)("img",{width:"200px",height:"200px",src:c,alt:""}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u.auth().signInWithEmailAndPassword(n,a).then((function(){f.push("/")})).catch((function(e){return alert(e.message)}))},children:[(0,l.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"email",id:"fname",name:"email",value:n,onChange:function(e){return r(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"input",type:"password",id:"lname",name:"password",value:a,onChange:function(e){return o(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{children:"Login"})]}),(0,l.jsx)("a",{onClick:function(){return f.push("/signup")},children:"Signup"})]})})};function me(){return(0,l.jsx)("div",{children:(0,l.jsx)(ye,{})})}function ge(){return(0,l.jsx)("svg",{width:"48px",height:"48px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,l.jsx)("path",{className:"rui-77aaa",d:"M661.333 256v512h-128v-512h128zM277.333 298.667c117.824 0 213.333 95.531 213.333 213.333s-95.509 213.333-213.333 213.333c-117.824 0-213.333-95.531-213.333-213.333s95.509-213.333 213.333-213.333zM794.496 384l37.504 37.504 37.504-37.504h90.496v90.496l-37.504 37.504 37.504 37.504v90.496h-90.496l-37.504-37.504-37.504 37.504h-90.496v-90.496l37.504-37.504-37.504-37.504v-90.496h90.496zM277.333 426.667c-47.061 0-85.333 38.293-85.333 85.333s38.272 85.333 85.333 85.333c47.061 0 85.333-38.293 85.333-85.333s-38.272-85.333-85.333-85.333z"})})}function ke(e){return(0,l.jsx)("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024","data-aut-id":"icon",color:e.color?e.color:"",className:!0,fillRule:"evenodd",children:(0,l.jsx)("path",{className:"rui-77aaa",d:"M448 725.333c-152.917 0-277.333-124.416-277.333-277.333s124.416-277.333 277.333-277.333c152.917 0 277.333 124.416 277.333 277.333s-124.416 277.333-277.333 277.333v0zM884.437 824.107v0.021l-151.915-151.936c48.768-61.781 78.144-139.541 78.144-224.192 0-199.979-162.688-362.667-362.667-362.667s-362.667 162.688-362.667 362.667c0 199.979 162.688 362.667 362.667 362.667 84.629 0 162.411-29.376 224.171-78.144l206.144 206.144h60.352v-60.331l-54.229-54.229z"})})}function _e(){return(0,l.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,l.jsx)("path",{className:"rui-77aaa",d:"M85.392 277.333h60.331l366.336 366.336 366.336-366.336h60.331v60.331l-408.981 409.003h-35.307l-409.045-409.003z"})})}function we(){return(0,l.jsx)("svg",{width:104,height:48,viewBox:"0 0 1603 768",className:"_3V9PS",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{className:"all fill-white",d:"M434.442 16.944h718.82c202.72 0 367.057 164.337 367.057 367.058s-164.337 367.057-367.057 367.057h-718.82c-202.721 0-367.058-164.337-367.058-367.058s164.337-367.058 367.058-367.058z"}),(0,l.jsx)("path",{className:"left fill-left_",d:"M427.241 669.489c-80.917 0-158.59-25.926-218.705-73.004l-0.016-0.014c-69.113-54.119-108.754-131.557-108.754-212.474 0-41.070 9.776-80.712 29.081-117.797 25.058-48.139 64.933-89.278 115.333-118.966l-52.379-67.581c-64.73 38.122-115.955 90.98-148.159 152.845-24.842 47.745-37.441 98.726-37.441 151.499 0 104.027 50.962 203.61 139.799 273.175h0.016c77.312 60.535 177.193 93.887 281.22 93.887h299.699l25.138-40.783-25.138-40.783h-299.698z"}),(0,l.jsx)("path",{className:"top fill-top_",d:"M1318.522 38.596v0c-45.72-14.369-93.752-21.658-142.762-21.658h-748.511c-84.346 0-165.764 21.683-235.441 62.713l3.118 51.726 49.245 15.865c54.16-31.895 117.452-48.739 183.073-48.739h748.511c38.159 0 75.52 5.657 111.029 16.829v0c44.91 14.111 86.594 37.205 120.526 66.792l66.163-57.68c-43.616-38.010-97.197-67.703-154.957-85.852z"}),(0,l.jsx)("path",{className:"right fill-right_",d:"M1473.479 124.453l-55.855 9.91-10.307 47.76c61.844 53.929 95.92 125.617 95.92 201.88 0 25.235-3.772 50.26-11.214 74.363-38.348 124.311-168.398 211.129-316.262 211.129h-448.812l25.121 40.783-25.121 40.783h448.812c190.107 0 357.303-111.638 406.613-271.498 9.572-31.009 14.423-63.162 14.423-95.559 0-98.044-43.805-190.216-123.317-259.551z"})]})})}function be(e){return(0,l.jsx)("svg",{width:"16px",height:"16px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,l.jsx)("path",{className:"rui-367TP",d:"M414.898 123.739v291.218h-291.218l-97.014 97.014 97.014 97.131h291.218v291.16l97.073 97.071 97.073-97.071v-291.16h291.16l97.131-97.131-97.131-97.014h-291.16v-291.218l-97.073-97.073z"})})}var xe=function(){var e=t.useContext(f).user,n=t.useContext(h).firebase,r=de();return(0,l.jsx)("div",{className:"p-2 bg-slate-50 fixed w-full z-50",children:(0,l.jsxs)("div",{className:" w-full flex justify-between items-center",children:[(0,l.jsx)("div",{className:"brandName",children:(0,l.jsx)(ge,{})}),(0,l.jsxs)("div",{className:"w-64 h-12 flex items-center px-2 border-2 border-solid border-gray-900 rounded-md bg-white selection:border-cyan-400 selection:outline-cyan-400",children:[(0,l.jsx)(ke,{}),(0,l.jsx)("input",{className:"border-transparent outline-transparent",type:"text"}),(0,l.jsx)(_e,{})]}),(0,l.jsxs)("div",{className:"productSearch w-",children:[(0,l.jsx)("div",{className:"input",children:(0,l.jsx)("input",{type:"text",placeholder:"Find car,mobile phone and more..."})}),(0,l.jsx)("div",{className:"searchAction",children:(0,l.jsx)(ke,{color:"#ffffff"})})]}),(0,l.jsxs)("div",{className:"language",children:[(0,l.jsx)("span",{children:" ENGLISH "}),(0,l.jsx)(_e,{})]}),(0,l.jsxs)("div",{className:"loginPage",children:[e?(0,l.jsxs)("span",{children:["welcome:: ",e.displayName," "]}):(0,l.jsx)("span",{onClick:function(){return r.push("/login")},children:"Login"}),(0,l.jsx)("hr",{})]}),e&&(0,l.jsx)("span",{onClick:function(){n.auth().signOut(),r.push("/login")},children:"Logout"}),(0,l.jsxs)("div",{onClick:function(){return r.push("/create")},className:"sellMenu",children:[(0,l.jsx)(we,{}),(0,l.jsxs)("div",{className:" flex  absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm font-bold tracking-widest text-sell",children:[(0,l.jsx)(be,{}),(0,l.jsx)("span",{className:"ml-2",children:"SELL"})]})]})]})})};var Ie=function(){return(0,l.jsx)("div",{className:"pt-16",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex px-4 py-3 ",children:[(0,l.jsxs)("div",{className:"flex ",children:[(0,l.jsx)("span",{children:"ALL CATEGORIES"}),(0,l.jsx)(_e,{})]}),(0,l.jsxs)("div",{className:" md:flex ml-4 [&>*]:mr-4 sm:hidden",children:[(0,l.jsx)("span",{children:"Cars"}),(0,l.jsx)("span",{children:"Motorcy..."}),(0,l.jsx)("span",{children:"Mobile Ph..."}),(0,l.jsx)("span",{children:"For Sale:Houses & Apart..."}),(0,l.jsx)("span",{children:"Scoot..."}),(0,l.jsx)("span",{children:"Commercial & Other Ve..."}),(0,l.jsx)("span",{children:"For Rent: House & Apart..."})]})]}),(0,l.jsx)("div",{className:"md:relative md:w-full sm:relative",children:(0,l.jsx)("img",{className:"w-full",src:"../../../Images/banner copy.png",alt:""})})]})})};function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ee(e){var t=function(e,t){if("object"!==Te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Te(t)?t:String(t)}function Se(e,t,n){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(){return(0,l.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,l.jsx)("path",{className:"rui-77aaa",d:"M830.798 448.659l-318.798 389.915-317.828-388.693c-20.461-27.171-31.263-59.345-31.263-93.033 0-85.566 69.605-155.152 155.152-155.152 72.126 0 132.752 49.552 150.051 116.364h87.777c17.299-66.812 77.905-116.364 150.051-116.364 85.547 0 155.152 69.585 155.152 155.152 0 33.687-10.802 65.862-30.293 91.811zM705.939 124.121c-80.853 0-152.204 41.425-193.939 104.204-41.736-62.778-113.086-104.204-193.939-104.204-128.33 0-232.727 104.378-232.727 232.727 0 50.657 16.194 98.948 47.806 140.897l328.766 402.133h100.189l329.716-403.355c30.662-40.727 46.856-89.018 46.856-139.675 0-128.349-104.398-232.727-232.727-232.727z"})})}var Ae=(0,t.createContext)(null);function Pe(e){var n=e.children,r=s((0,t.useState)(null),2),i=r[0],a=r[1];return(0,l.jsx)(Ae.Provider,{value:{PostDetails:i,setPostDetails:a},children:n})}var De=function(){var e=s(t.useState([]),2),n=e[0],r=e[1],i=t.useContext(h).firebase,a=t.useContext(Ae).setPostDetails,o=de();return t.useEffect((function(){i.firestore().collection("products").get().then((function(e){var t=e.docs.map((function(e){return Ne(Ne({},e.data()),{},{id:e.id})}));r(t)}))}),[]),(0,l.jsxs)("div",{className:"postParentDiv",children:[(0,l.jsxs)("div",{className:"moreView",children:[(0,l.jsxs)("div",{className:"heading",children:[(0,l.jsx)("span",{children:"Quick Menu"}),(0,l.jsx)("span",{children:"View more"})]}),(0,l.jsx)("div",{className:"cards",children:n.map((function(e){return(0,l.jsxs)("div",{className:"card",onClick:function(){console.log({product:e}),a(e),o.push("/view")},children:[(0,l.jsx)("div",{className:"favorite",children:(0,l.jsx)(Re,{})}),(0,l.jsx)("div",{className:"image",children:(0,l.jsx)("img",{src:e.url,alt:""})}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsxs)("p",{className:"rate",children:["\u20b9 ",e.price]}),(0,l.jsx)("span",{className:"kilometer",children:e.category}),(0,l.jsx)("p",{className:"name",children:e.name})]}),(0,l.jsx)("div",{className:"date",children:(0,l.jsx)("span",{children:e.createdAt})})]})}))})]}),(0,l.jsxs)("div",{className:"recommendations",children:[(0,l.jsx)("div",{className:"heading",children:(0,l.jsx)("span",{children:"Fresh recommendations"})}),(0,l.jsx)("div",{className:"cards",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"favorite",children:(0,l.jsx)(Re,{})}),(0,l.jsx)("div",{className:"image",children:(0,l.jsx)("img",{src:"../../../Images/R15V3.jpg",alt:""})}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,l.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,l.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,l.jsx)("div",{className:"date",children:(0,l.jsx)("span",{children:"10/5/2021"})})]})})]})]})};var Oe=function(){return(0,l.jsxs)("div",{className:"footerParentDiv",children:[(0,l.jsxs)("div",{className:"content",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"heading",children:(0,l.jsx)("p",{children:"POPULAR LOCATIONS"})}),(0,l.jsx)("div",{className:"list",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"kolkata"}),(0,l.jsx)("li",{children:"Mumbai"}),(0,l.jsx)("li",{children:"Chennai"}),(0,l.jsx)("li",{children:"Pune"})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"heading",children:(0,l.jsx)("p",{children:"ABOUT US"})}),(0,l.jsx)("div",{className:"list",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"About OLX Group"}),(0,l.jsx)("li",{children:"Careers"}),(0,l.jsx)("li",{children:"Contact Us"}),(0,l.jsx)("li",{children:"OLXPeople"})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"heading",children:(0,l.jsx)("p",{children:"OLX"})}),(0,l.jsx)("div",{className:"list",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Help"}),(0,l.jsx)("li",{children:"Sitemap"}),(0,l.jsx)("li",{children:"Legal & Privacy information"})]})})]})]}),(0,l.jsxs)("div",{className:"footer",children:[(0,l.jsx)("p",{children:"Other Countries Pakistan - South Africa - Indonesia"}),(0,l.jsx)("p",{children:"Free Classifieds in India. \xa9 2006-2021 OLX"})]})]})};function Le(e){return(0,l.jsxs)("div",{className:"homeParentDiv",children:[(0,l.jsx)(xe,{}),(0,l.jsx)(Ie,{}),(0,l.jsx)(De,{}),(0,l.jsx)(Oe,{})]})}var Me=function(){var e=s(t.useState(""),2),n=e[0],r=e[1],i=s(t.useState(""),2),a=i[0],o=i[1],u=s(t.useState(""),2),c=u[0],d=u[1],p=s(t.useState(null),2),v=p[0],y=p[1],m=t.useContext(h).firebase,g=t.useContext(f).user,k=de(),_=new Date;return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(xe,{}),(0,l.jsx)("card",{children:(0,l.jsxs)("div",{className:"centerDiv",children:[(0,l.jsxs)("form",{children:[(0,l.jsx)("label",{htmlFor:"fname",children:"Name"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"inputField",type:"text",id:"fname",name:"Name",value:n,onChange:function(e){return r(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"fname",children:"Category"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"inputField",type:"text",id:"fname",name:"category",value:a,onChange:function(e){return o(e.target.value)}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"fname",children:"Price"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{className:"inputField",type:"number",id:"fname",name:"Price",value:c,onChange:function(e){return d(e.target.value)}}),(0,l.jsx)("br",{})]}),(0,l.jsx)("br",{}),(0,l.jsx)("img",{alt:"Posts",width:"200px",height:"200px",src:v?URL.createObjectURL(v):" "}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{onChange:function(e){return y(e.target.files[0])},type:"file"}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{onClick:function(){m.storage().ref("/image/".concat(v.name)).put(v).then((function(e){e.ref.getDownloadURL().then((function(e){console.log(e),m.firestore().collection("products").add({name:n,category:a,price:c,url:e,userId:g.uid,createdAt:_.toDateString()}),k.push("/")}))}))},className:"uploadBtn",children:"upload and Submit"})]})})]})};function Fe(){return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(xe,{}),(0,l.jsx)(Me,{})]})}function Ue(){var e=s(t.useState(),2),n=e[0],r=e[1],i=t.useContext(Ae).PostDetails,a=t.useContext(h).firebase;return t.useEffect((function(){console.log({PostDetails:i});var e=i.userId;a.firestore().collection("users").where("id","==",e).get().then((function(e){e.forEach((function(e){r(e.data()),console.log(e.data())}))}))}),[]),(0,l.jsxs)("div",{className:"viewParentDiv",children:[(0,l.jsx)("div",{className:"imageShowDiv",children:(0,l.jsx)("img",{src:i?i.url:"",alt:""})}),(0,l.jsxs)("div",{className:"rightSection",children:[(0,l.jsxs)("div",{className:"productDetails",children:[(0,l.jsxs)("p",{children:["\u20b9 ",i&&i.price," "]}),(0,l.jsx)("span",{children:i&&i.name}),(0,l.jsx)("p",{children:i&&i.category}),(0,l.jsx)("span",{children:i&&i.createdAt})]}),(0,l.jsxs)("div",{className:"contactDetails",children:[(0,l.jsx)("p",{children:"Seller details"}),(0,l.jsx)("p",{children:n&&n.userName}),(0,l.jsx)("p",{children:n&&n.phone})]})]})]})}function je(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)(xe,{}),(0,l.jsx)(Ue,{})]})}var Ve=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=L(t.props),t}return v(n,e),n.prototype.render=function(){return t.createElement(te,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var qe=function(e,t){return"function"===typeof e?e(t):e},Be=function(e,t){return"string"===typeof e?C(e,null,null,t):e},ze=function(e){return e},We=t.forwardRef;"undefined"===typeof We&&(We=ze);var Ke=We((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=X(e,["innerRef","navigate","onClick"]),u=o.target,s=y({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=ze!==We&&n||r,t.createElement("a",s)}));var He=We((function(e,n){var r=e.component,i=void 0===r?Ke:r,a=e.replace,o=e.to,u=e.innerRef,s=X(e,["component","replace","to","innerRef"]);return t.createElement(ee.Consumer,null,(function(e){e||b(!1);var r=e.history,c=Be(qe(o,e.location),e.location),l=c?r.createHref(c):"",h=y({},s,{href:l,navigate:function(){var t=qe(o,e.location),n=S(e.location)===S(Be(t));(a||n?r.replace:r.push)(t)}});return ze!==We?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),Ge=function(e){return e},Qe=t.forwardRef;"undefined"===typeof Qe&&(Qe=Ge);Qe((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,h=e.location,f=e.sensitive,d=e.strict,p=e.style,v=e.to,m=e.innerRef,g=X(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(ee.Consumer,null,(function(e){e||b(!1);var r=h||e.location,a=Be(qe(v,r),r),k=a.pathname,_=k&&k.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=_?ae(r.pathname,{path:_,exact:c,sensitive:f,strict:d}):null,x=!!(l?l(w,r):w),I="function"===typeof s?s(x):s,T="function"===typeof p?p(x):p;x&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,o),T=y({},T,u));var E=y({"aria-current":x&&i||null,className:I,style:T,to:a},g);return Ge!==Qe?E.ref=n||m:E.innerRef=m,t.createElement(He,E)}))}));var Ye=function(){var e=(0,t.useContext)(f).setUser,n=(0,t.useContext)(h).firebase;return(0,t.useEffect)((function(){n.auth().onAuthStateChanged((function(t){console.log({user:t}),e(t)}))})),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Pe,{children:(0,l.jsxs)(Ve,{children:[(0,l.jsx)(oe,{exact:!0,path:"/",children:(0,l.jsx)(Le,{})}),(0,l.jsx)(oe,{path:"/signup",children:(0,l.jsx)(ve,{})}),(0,l.jsx)(oe,{path:"/login",children:(0,l.jsx)(me,{})}),(0,l.jsx)(oe,{path:"/create",children:(0,l.jsx)(Fe,{})}),(0,l.jsx)(oe,{path:"/view",children:(0,l.jsx)(je,{})})]})})})},$e=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function Ze(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function et(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function it(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function at(e){var t=it();return function(){var n,r=rt(e);if(t){var i=rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tt(e)}(this,n)}}function ot(e,t,n){return ot=it()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},ot.apply(null,arguments)}function ut(e){var t="function"===typeof Map?new Map:void 0;return ut=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ot(e,arguments,rt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},ut(e)}var st={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ct=function(e,t){if(!e)throw lt(t)},lt=function(e){return new Error("Firebase Database ("+st.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},ht=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ft={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ht(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new dt;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},dt=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ze(n)}(ut(Error)),pt=function(e){var t=ht(e);return ft.encodeByteArray(t,!0)},vt=function(e){return pt(e).replace(/\./g,"")},yt=function(e){try{return ft.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function mt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&gt(n)&&(e[n]=mt(e[n],t[n]));return e}function gt(e){return"__proto__"!==e}var kt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},_t=function(){try{return kt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/React-OLX-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&yt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},wt=function(){var e;return null===(e=_t())||void 0===e?void 0:e.config},bt=function(){function e(){var t=this;Xe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ze(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function xt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[vt(JSON.stringify({alg:"none",type:"JWT"})),vt(JSON.stringify(a)),""].join(".")}function It(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Tt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function Et(){var e,t=null===(e=_t())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function St(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ct(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Nt(){var e=It();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Rt(){return!0===st.NODE_CLIENT||!0===st.NODE_ADMIN}function At(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Pt=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(tt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(tt(a),Dt.prototype.create),a}return Ze(n)}(ut(Error)),Dt=function(){function e(t,n,r){Xe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ze(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ot,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Pt(n,a,t)}}]),e}();var Ot=/\{\$([^}]+)}/g;function Lt(e){return JSON.parse(e)}function Mt(e){return JSON.stringify(e)}var Ft=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Lt(yt(a[0])||""),n=Lt(yt(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Vt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Bt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(zt(u)&&zt(s)){if(!Bt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function zt(e){return null!==e&&"object"===typeof e}function Wt(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Kt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ht(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Gt=function(){function e(){Xe(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Ze(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Qt(e,t){var n=new Yt(e,t);return n.subscribe.bind(n)}var Yt=function(){function e(t,n){var r=this;Xe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ze(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=et(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$t),void 0===r.error&&(r.error=$t),void 0===r.complete&&(r.complete=$t);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $t(){}var Xt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Jt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Zt(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Jt(e,t)+"must be a valid function.")}function en(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Jt(e,t)+"must be a valid context object.")}var tn=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function nn(e){return e&&e._delegate?e._delegate:e}function rn(){rn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(E([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==Te(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function b(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function an(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function on(e){return function(e){if(Array.isArray(e))return a(e)}(e)||an(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(bC){return void n(bC)}u.done?t(s):Promise.resolve(s).then(r,i)}function sn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){un(a,r,i,o,u,"next",e)}function u(e){un(a,r,i,o,u,"throw",e)}o(void 0)}))}}var cn=function(){function e(t,n,r){Xe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ze(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ln="[DEFAULT]",hn=function(){function e(t,n){Xe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ze(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new bt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ln})}catch(c){}var t,n=et(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(on(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),on(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=et(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(lT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ln?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(lT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.component?this.component.multipleInstances?e:ln:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var fn,dn,pn=function(){function e(t){Xe(this,e),this.name=t,this.providers=new Map}return Ze(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new hn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),vn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dn||(dn={}));var yn={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},mn=dn.INFO,gn=(Se(fn={},dn.DEBUG,"log"),Se(fn,dn.VERBOSE,"log"),Se(fn,dn.INFO,"info"),Se(fn,dn.WARN,"warn"),Se(fn,dn.ERROR,"error"),fn),kn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=gn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},_n=function(){function e(t){Xe(this,e),this.name=t,this._logLevel=mn,this._logHandler=kn,this._userLogHandler=null,vn.push(this)}return Ze(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in dn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?yn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.DEBUG].concat(t)),this._logHandler.apply(this,[this,dn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,dn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.INFO].concat(t)),this._logHandler.apply(this,[this,dn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.WARN].concat(t)),this._logHandler.apply(this,[this,dn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.ERROR].concat(t)),this._logHandler.apply(this,[this,dn.ERROR].concat(t))}}]),e}();var wn,bn,xn=function(e,t){return t.some((function(t){return e instanceof t}))};var In=new WeakMap,Tn=new WeakMap,En=new WeakMap,Sn=new WeakMap,Cn=new WeakMap;var Nn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||En.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Rn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bn||(bn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Dn(this),n),Pn(In.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pn(e.apply(Dn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Dn(this),t].concat(r));return En.set(a,t.sort?t.sort():[t]),Pn(a)}}function An(e){return"function"===typeof e?Rn(e):(e instanceof IDBTransaction&&function(e){if(!Tn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Tn.set(e,t)}}(e),xn(e,wn||(wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Nn):e)}function Pn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Pn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&In.set(t,e)})).catch((function(){})),Cn.set(t,e),t}(e);if(Sn.has(e))return Sn.get(e);var t=An(e);return t!==e&&(Sn.set(e,t),Cn.set(t,e)),t}var Dn=function(e){return Cn.get(e)};var On,Ln,Mn=["get","getKey","getAll","getAllKeys","count"],Fn=["put","add","delete","clear"],Un=new Map;function jn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Un.get(t))return Un.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Fn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Mn.includes(n))){var a=function(){var e=sn(rn().mark((function e(t){var a,o,u,s,c,l,h=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Un.set(t,a),a}}}Nn=function(e){return Ne(Ne({},e),{},{get:function(t,n,r){return jn(t,n)||e.get(t,n,r)},has:function(t,n){return!!jn(t,n)||e.has(t,n)}})}(Nn);var Vn=function(){function e(t){Xe(this,e),this.container=t}return Ze(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qn="@firebase/app",Bn="0.9.5",zn=new _n("@firebase/app"),Wn="[DEFAULT]",Kn=(Se(On={},qn,"fire-core"),Se(On,"@firebase/app-compat","fire-core-compat"),Se(On,"@firebase/analytics","fire-analytics"),Se(On,"@firebase/analytics-compat","fire-analytics-compat"),Se(On,"@firebase/app-check","fire-app-check"),Se(On,"@firebase/app-check-compat","fire-app-check-compat"),Se(On,"@firebase/auth","fire-auth"),Se(On,"@firebase/auth-compat","fire-auth-compat"),Se(On,"@firebase/database","fire-rtdb"),Se(On,"@firebase/database-compat","fire-rtdb-compat"),Se(On,"@firebase/functions","fire-fn"),Se(On,"@firebase/functions-compat","fire-fn-compat"),Se(On,"@firebase/installations","fire-iid"),Se(On,"@firebase/installations-compat","fire-iid-compat"),Se(On,"@firebase/messaging","fire-fcm"),Se(On,"@firebase/messaging-compat","fire-fcm-compat"),Se(On,"@firebase/performance","fire-perf"),Se(On,"@firebase/performance-compat","fire-perf-compat"),Se(On,"@firebase/remote-config","fire-rc"),Se(On,"@firebase/remote-config-compat","fire-rc-compat"),Se(On,"@firebase/storage","fire-gcs"),Se(On,"@firebase/storage-compat","fire-gcs-compat"),Se(On,"@firebase/firestore","fire-fst"),Se(On,"@firebase/firestore-compat","fire-fst-compat"),Se(On,"fire-js","fire-js"),Se(On,"firebase","fire-js-all"),On),Hn=new Map,Gn=new Map;function Qn(e,t){try{e.container.addComponent(t)}catch(n){zn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Yn(e,t){e.container.addOrOverwriteComponent(t)}function $n(e){var t=e.name;if(Gn.has(t))return zn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Gn.set(t,e);var n,r=et(Hn.values());try{for(r.s();!(n=r.n()).done;){Qn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Xn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wn;Xn(e,t).clearInstance(n)}function Zn(){Gn.clear()}var er=(Se(Ln={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Se(Ln,"bad-app-name","Illegal App name: '{$appName}"),Se(Ln,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Se(Ln,"app-deleted","Firebase App named '{$appName}' already deleted"),Se(Ln,"no-options","Need to provide options, when not being deployed to hosting via source."),Se(Ln,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Se(Ln,"invalid-log-argument","First argument to `onLog` must be null or a function."),Se(Ln,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Se(Ln,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Se(Ln,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Se(Ln,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ln),tr=new Dt("app","Firebase",er),nr=function(){function e(t,n,r){var i=this;Xe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",(function(){return i}),"PUBLIC"))}return Ze(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}]),e}(),rr="9.18.0";function ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Wn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=wt()),!n)throw tr.create("no-options");var a=Hn.get(i);if(a){if(Bt(n,a.options)&&Bt(r,a.config))return a;throw tr.create("duplicate-app",{appName:i})}var o,u=new pn(i),s=et(Gn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new nr(n,r,u);return Hn.set(i,l),l}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=Hn.get(e);if(!t&&e===Wn)return ir();if(!t)throw tr.create("no-app",{appName:e});return t}function or(){return Array.from(Hn.values())}function ur(e){return sr.apply(this,arguments)}function sr(){return(sr=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Hn.has(n)){e.next=6;break}return Hn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t,n){var r,i=null!==(r=Kn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zn.warn(u.join(" "))}$n(new cn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function lr(e,t){if(null!==e&&"function"!==typeof e)throw tr.create("invalid-log-argument");!function(e,t){var n,r=et(vn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=yn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:dn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function hr(e){var t;t=e,vn.forEach((function(e){e.setLogLevel(t)}))}var fr="firebase-heartbeat-database",dr=1,pr="firebase-heartbeat-store",vr=null;function yr(){return vr||(vr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Pn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Pn(u.result),e.oldVersion,e.newVersion,Pn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(fr,dr,{upgrade:function(e,t){if(0===t)e.createObjectStore(pr)}}).catch((function(e){throw tr.create("idb-open",{originalErrorMessage:e.message})}))),vr}function mr(e){return gr.apply(this,arguments)}function gr(){return gr=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yr();case 3:return n=e.sent,e.abrupt("return",n.transaction(pr).objectStore(pr).get(wr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Pt?zn.warn(e.t0.message):(r=tr.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),zn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),gr.apply(this,arguments)}function kr(e,t){return _r.apply(this,arguments)}function _r(){return _r=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yr();case 3:return r=e.sent,i=r.transaction(pr,"readwrite"),a=i.objectStore(pr),e.next=8,a.put(n,wr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Pt?zn.warn(e.t0.message):(o=tr.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),zn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),_r.apply(this,arguments)}function wr(e){return"".concat(e.name,"!").concat(e.options.appId)}var br=1024,xr=function(){function e(t){var n=this;Xe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Cr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ze(e,[{key:"triggerHeartbeat",value:function(){var e=sn(rn().mark((function e(){var t,n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ir(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ir(),n=Tr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=vt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ir(){return(new Date).toISOString().substring(0,10)}function Tr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:br,r=[],i=e.slice(),a=et(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Nr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Nr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Er,Sr,Cr=function(){function e(t){Xe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ze(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(bC){t(bC)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,mr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(on(r.heartbeats),on(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Nr(e){return vt(JSON.stringify({version:2,heartbeats:e})).length}Er="",$n(new cn("platform-logger",(function(e){return new Vn(e)}),"PRIVATE")),$n(new cn("heartbeat",(function(e){return new xr(e)}),"PRIVATE")),cr(qn,Bn,Er),cr(qn,Bn,"esm2017"),cr("fire-js","");var Rr=function(){function e(t,n){var r=this;Xe(this,e),this._delegate=t,this.firebase=n,Qn(t,new cn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ze(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ur(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Qn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Yn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ar=(Se(Sr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Se(Sr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Sr),Pr=new Dt("app-compat","Firebase",Ar);var Dr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ir(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ut(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:cr,setLogLevel:hr,onLog:lr,apps:null,SDK_VERSION:rr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if($n(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Pr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&mt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ut(n,e=e||Wn))throw Pr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Rr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){mt(n,e)},createSubscribe:Qt,ErrorFactory:Dt,deepExtend:mt}),n}(),Or=new _n("@firebase/app-compat"),Lr="@firebase/app-compat",Mr="0.2.5";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Or.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Fr=self.firebase.SDK_VERSION;Fr&&Fr.indexOf("LITE")>=0&&Or.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ur=Dr;!function(e){cr(Lr,Mr,e)}();function jr(){return jr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jr.apply(this,arguments)}Ur.registerVersion("firebase","9.18.0","app-compat");function Vr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var qr;Object.create;var Br={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},zr={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Wr(){return Se({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Kr=function(){var e;return Se(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Se(e,"argument-error",""),Se(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Se(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Se(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Se(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Se(e,"cordova-not-ready","Cordova framework is not ready."),Se(e,"cors-unsupported","This browser is not supported."),Se(e,"credential-already-in-use","This credential is already associated with a different user account."),Se(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Se(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Se(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Se(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Se(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Se(e,"email-already-in-use","The email address is already in use by another account."),Se(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Se(e,"expired-action-code","The action code has expired."),Se(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Se(e,"internal-error","An internal AuthError has occurred."),Se(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Se(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Se(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Se(e,"invalid-auth-event","An internal AuthError has occurred."),Se(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Se(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Se(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Se(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Se(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Se(e,"invalid-email","The email address is badly formatted."),Se(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Se(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Se(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Se(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Se(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Se(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Se(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Se(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Se(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Se(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Se(e,"wrong-password","The password is invalid or the user does not have a password."),Se(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Se(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Se(e,"invalid-provider-id","The specified provider ID is invalid."),Se(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Se(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Se(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Se(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Se(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Se(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Se(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Se(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Se(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Se(e,"missing-continue-uri","A continue URL must be provided in the request."),Se(e,"missing-iframe-start","An internal AuthError has occurred."),Se(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Se(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Se(e,"missing-multi-factor-info","No second factor identifier is provided."),Se(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Se(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Se(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Se(e,"app-deleted","This instance of FirebaseApp has been deleted."),Se(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Se(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Se(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Se(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Se(e,"no-auth-event","An internal AuthError has occurred."),Se(e,"no-such-provider","User was not linked to an account with the given provider."),Se(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Se(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Se(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Se(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Se(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Se(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Se(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Se(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Se(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Se(e,"rejected-credential","The request contains malformed or mismatching credentials."),Se(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Se(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Se(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Se(e,"timeout","The operation has timed out."),Se(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Se(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Se(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Se(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Se(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Se(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Se(e,"unverified-email","The operation requires a verified email."),Se(e,"user-cancelled","The user did not grant your application the permissions it requested."),Se(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Se(e,"user-disabled","The user account has been disabled by an administrator."),Se(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Se(e,"user-signed-out",""),Se(e,"weak-password","The password must be 6 characters long or more."),Se(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Se(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hr=Wr,Gr=new Dt("auth","Firebase",Wr()),Qr=new _n("@firebase/auth");function Yr(e){if(Qr.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qr.error.apply(Qr,["Auth (".concat(rr,"): ").concat(e)].concat(n))}}function $r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ei.apply(void 0,[e].concat(n))}function Xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ei.apply(void 0,[e].concat(n))}function Jr(e,t,n){var r=Object.assign(Object.assign({},Hr()),Se({},t,n));return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function Zr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$r(e,"argument-error"),Jr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=on(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(on(o)))}return Gr.create.apply(Gr,[e].concat(n))}function ti(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ei.apply(void 0,[t].concat(r))}}function ni(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Yr(t),new Error(t)}function ri(e,t){e||ni(t)}var ii=new Map;function ai(e){ri(e instanceof Function,"Expected a class definition");var t=ii.get(e);return t?(ri(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ii.set(e,t),t)}function oi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ui(){return"http:"===si()||"https:"===si()}function si(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ci=function(){function e(t,n){Xe(this,e),this.shortDelay=t,this.longDelay=n,ri(n>t,"Short delay should be less than long delay!"),this.isMobile=Tt()||Ct()}return Ze(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ui()||St()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function li(e,t){ri(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hi=function(){function e(){Xe(this,e)}return Ze(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fi=(Se(qr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Se(qr,"MISSING_CUSTOM_TOKEN","internal-error"),Se(qr,"INVALID_IDENTIFIER","invalid-email"),Se(qr,"MISSING_CONTINUE_URI","internal-error"),Se(qr,"INVALID_PASSWORD","wrong-password"),Se(qr,"MISSING_PASSWORD","internal-error"),Se(qr,"EMAIL_EXISTS","email-already-in-use"),Se(qr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Se(qr,"INVALID_IDP_RESPONSE","invalid-credential"),Se(qr,"INVALID_PENDING_TOKEN","invalid-credential"),Se(qr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Se(qr,"MISSING_REQ_TYPE","internal-error"),Se(qr,"EMAIL_NOT_FOUND","user-not-found"),Se(qr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Se(qr,"EXPIRED_OOB_CODE","expired-action-code"),Se(qr,"INVALID_OOB_CODE","invalid-action-code"),Se(qr,"MISSING_OOB_CODE","internal-error"),Se(qr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Se(qr,"INVALID_ID_TOKEN","invalid-user-token"),Se(qr,"TOKEN_EXPIRED","user-token-expired"),Se(qr,"USER_NOT_FOUND","user-token-expired"),Se(qr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Se(qr,"INVALID_CODE","invalid-verification-code"),Se(qr,"INVALID_SESSION_INFO","invalid-verification-id"),Se(qr,"INVALID_TEMPORARY_PROOF","invalid-credential"),Se(qr,"MISSING_SESSION_INFO","missing-verification-id"),Se(qr,"SESSION_EXPIRED","code-expired"),Se(qr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Se(qr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Se(qr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Se(qr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Se(qr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Se(qr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Se(qr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Se(qr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Se(qr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Se(qr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Se(qr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),qr),di=new ci(3e4,6e4);function pi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function vi(e,t,n,r){return yi.apply(this,arguments)}function yi(){return yi=sn(rn().mark((function e(t,n,r,i){var a,o=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",mi(t,a,sn(rn().mark((function e(){var a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Wt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hi.fetch()(wi(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function mi(e,t,n){return gi.apply(this,arguments)}function gi(){return(gi=sn(rn().mark((function e(t,n,r){var i,a,o,u,c,l,h,f,d,p;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fi),n),e.prev=2,a=new bi(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw xi(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=s(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw xi(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw xi(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw xi(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Jr(t,p,d);case 34:$r(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Pt)){e.next=41;break}throw e.t0;case 41:$r(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function ki(e,t,n,r){return _i.apply(this,arguments)}function _i(){return _i=sn(rn().mark((function e(t,n,r,i){var a,o,u=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,vi(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&$r(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function wi(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?li(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var bi=function(){function e(t){var n=this;Xe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Xr(n.auth,"network-request-failed"))}),di.get())}))}return Ze(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function xi(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Xr(e,t,r);return i.customData._tokenResponse=n,i}function Ii(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Si.apply(this,arguments)}function Si(){return(Si=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ai(){return Ai=sn(rn().mark((function e(t){var n,r,i,a,o,u,s=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=nn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ti((a=Di(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ri(Pi(a.auth_time)),issuedAtTime:Ri(Pi(a.iat)),expirationTime:Ri(Pi(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Pi(e){return 1e3*Number(e)}function Di(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Yr("JWT malformed, contained fewer than 3 sections"),null;try{var a=yt(r);return a?JSON.parse(a):(Yr("Failed to decode base64 JWT payload"),null)}catch(o){return Yr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Oi(e,t){return Li.apply(this,arguments)}function Li(){return Li=sn(rn().mark((function e(t,n){var r=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Pt&&Mi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Li.apply(this,arguments)}function Mi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Fi=function(){function e(t){Xe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ze(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ui=function(){function e(t,n){Xe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ze(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ji(e){return Vi.apply(this,arguments)}function Vi(){return Vi=sn(rn().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Oi(t,Ci(r,{idToken:i}));case 6:ti(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Vr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Bi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ui(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(){return(qi=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nn(t),e.next=3,ji(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(on(n),on(t))}function zi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(t,{},sn(rn().mark((function e(){var r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=wi(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hi.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ki=function(){function e(){Xe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ze(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ti(e.idToken,"internal-error"),ti("undefined"!==typeof e.idToken,"internal-error"),ti("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Di(e);return ti(t,"internal-error"),ti("undefined"!==typeof t.exp,"internal-error"),ti("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=sn(rn().mark((function e(t){var n,r=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ti(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ni("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ti("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ti("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ti("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Hi(e,t){ti("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Gi=function(){function e(t){Xe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Vr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?on(a.providerData):[],this.metadata=new Ui(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ze(e,[{key:"getIdToken",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ti(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ai.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return qi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ti(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){ti(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=sn(rn().mark((function e(t){var n,r,i=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ji(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Oi(this,Ii(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;ti(k&&x,t,"internal-error");var I=Ki.fromJSON(this.name,x);ti("string"===typeof k,t,"internal-error"),Hi(h,t.name),Hi(f,t.name),ti("boolean"===typeof _,t,"internal-error"),ti("boolean"===typeof w,t,"internal-error"),Hi(d,t.name),Hi(p,t.name),Hi(v,t.name),Hi(y,t.name),Hi(m,t.name),Hi(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(T.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=sn(rn().mark((function t(n,r){var i,a,o,u=arguments;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ki).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ji(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Qi=function(){function e(){Xe(this,e),this.type="NONE",this.storage={}}return Ze(e,[{key:"_isAvailable",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Qi.type="NONE";var Yi=Qi;function $i(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Xi=function(){function e(t,n,r){Xe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=$i(this.userKey,a.apiKey,o),this.fullPersistenceKey=$i("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ze(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Gi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=sn(rn().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ai(Yi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ai(Yi),u=$i(i,n.config.apiKey,n.name),s=null,c=et(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Gi._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ji(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(na(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ia(t))return"Blackberry";if(aa(t))return"Webos";if(ea(t))return"Safari";if((t.includes("chrome/")||ta(t))&&!t.includes("edge/"))return"Chrome";if(ra(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/firefox\//i.test(e)}function ea(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:It()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/crios\//i.test(e)}function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/iemobile/i.test(e)}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/android/i.test(e)}function ia(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/blackberry/i.test(e)}function aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/webos/i.test(e)}function oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return oa(e)||ra(e)||aa(e)||ia(e)||/windows phone/i.test(e)||na(e)}function sa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ji(It());break;case"Worker":t="".concat(Ji(It()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rr,"/").concat(r)}var ca=function(){function e(t){Xe(this,e),this.auth=t,this.queue=[]}return Ze(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=sn(rn().mark((function e(t){var n,r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=et(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=et(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),la=function(){function e(t,n,r){Xe(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fa(this),this.idTokenSubscription=new fa(this),this.beforeStateQueue=new ca(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ze(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(sn(rn().mark((function r(){var i,a;return rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Xi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=sn(rn().mark((function e(t){var n,r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ti(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ji(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?nn(t):null)&&ti(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=sn(rn().mark((function e(t){var n,r=this,i=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ti(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(sn(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ai(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ti(n=t&&ai(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Xi.create(this,[ai(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=sn(rn().mark((function e(t){var n=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ti(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ti(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sa(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=sn(rn().mark((function e(){var t,n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Se({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ha(e){return nn(e)}var fa=function(){function e(t){var n=this;Xe(this,e),this.auth=t,this.observer=null,this.addObserver=Qt((function(e){return n.observer=e}))}return Ze(e,[{key:"next",get:function(){return ti(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function da(e,t,n){var r=ha(e);ti(r._canInitEmulator,r,"emulator-config-failed"),ti(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=pa(t),o=function(e){var t=pa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:va(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:va(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pa(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function va(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ya=function(){function e(t,n){Xe(this,e),this.providerId=t,this.signInMethod=n}return Ze(e,[{key:"toJSON",value:function(){return ni("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ni("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ni("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ni("not implemented")}}]),e}();function ma(e,t){return ga.apply(this,arguments)}function ga(){return(ga=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:resetPassword",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return _a.apply(this,arguments)}function _a(){return(_a=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return(ba=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:update",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithPassword",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:sendOobCode",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Oa.apply(this,arguments)}function Oa(){return(Oa=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ja=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Xe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ze(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",xa(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",La(t,{email:this._email,oobCode:this._password}));case 5:$r(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ka(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:$r(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ya);function Va(e,t){return qa.apply(this,arguments)}function qa(){return(qa=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithIdp",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ba=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ze(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Va(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Va(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$r("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Vr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ya);function za(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:sendVerificationCode",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(){return(Ka=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(){return(Ha=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw xi(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ga=Se({},"USER_NOT_FOUND","user-not-found");function Qa(){return(Qa=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,r),Ga));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ya=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ka.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ha.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Qa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ya);var $a=function(){function e(t){var n,r,i,a,o,u;Xe(this,e);var s=Kt(Ht(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ti(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ze(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Kt(Ht(e)).link,n=t?Kt(Ht(t)).deep_link_id:null,r=Kt(Ht(e)).deep_link_id;return(r?Kt(Ht(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(lT){return null}}}]),e}();var Xa=function(){function e(){Xe(this,e),this.providerId=e.PROVIDER_ID}return Ze(e,null,[{key:"credential",value:function(e,t){return ja._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=$a.parseLink(t);return ti(n,"argument-error"),ja._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Xa.PROVIDER_ID="password",Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ja=function(){function e(t){Xe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ze(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Za=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ze(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return on(this.scopes)}}]),n}(Ja),eo=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ti(e.idToken||e.accessToken,"argument-error"),Ba._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ti("providerId"in t&&"signInMethod"in t,"argument-error"),Ba._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Za),to=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.call(this,"facebook.com")}return Ze(n,null,[{key:"credential",value:function(e){return Ba._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lT){return null}}}]),n}(Za);to.FACEBOOK_SIGN_IN_METHOD="facebook.com",to.PROVIDER_ID="facebook.com";var no=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ze(n,null,[{key:"credential",value:function(e,t){return Ba._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(lT){return null}}}]),n}(Za);no.GOOGLE_SIGN_IN_METHOD="google.com",no.PROVIDER_ID="google.com";var ro=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.call(this,"github.com")}return Ze(n,null,[{key:"credential",value:function(e){return Ba._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lT){return null}}}]),n}(Za);ro.GITHUB_SIGN_IN_METHOD="github.com",ro.PROVIDER_ID="github.com";var io=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return Va(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Va(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ya),ao=function(e){nt(n,e);var t=at(n);function n(e){return Xe(this,n),ti(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ze(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=io.fromJSON(e);return ti(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return io._create(r,n)}catch(i){return null}}}]),n}(Ja),oo=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.call(this,"twitter.com")}return Ze(n,null,[{key:"credential",value:function(e,t){return Ba._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(lT){return null}}}]),n}(Za);function uo(e,t){return so.apply(this,arguments)}function so(){return(so=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signUp",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}oo.TWITTER_SIGN_IN_METHOD="twitter.com",oo.PROVIDER_ID="twitter.com";var co=function(){function e(t){Xe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ze(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=sn(rn().mark((function t(n,r,i){var a,o,u,s,c=arguments;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Gi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=lo(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=sn(rn().mark((function t(n,r,i){var a;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=lo(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function lo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ho(){return ho=sn(rn().mark((function e(t){var n,r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ha(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new co({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,uo(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,co._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}var fo=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o,u;return Xe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(tt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ze(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Pt);function po(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw fo._fromErrorAndOperation(e,n,t,r);throw n}))}function vo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function yo(e,t){return mo.apply(this,arguments)}function mo(){return mo=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nn(t),e.next=3,_o(!0,r,n);case 3:return e.t0=Ei,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=vo(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return ko=sn(rn().mark((function e(t,n){var r,i,a=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Oi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",co._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function _o(e,t,n){return wo.apply(this,arguments)}function wo(){return(wo=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(n);case 2:i=vo(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ti(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t){return xo.apply(this,arguments)}function xo(){return xo=sn(rn().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Oi(t,po(i,a,n,t),r);case 6:return ti((o=e.sent).idToken,i,"internal-error"),ti(u=Di(o.idToken),i,"internal-error"),s=u.sub,ti(t.uid===s,i,"user-mismatch"),e.abrupt("return",co._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&$r(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),xo.apply(this,arguments)}function Io(e,t){return To.apply(this,arguments)}function To(){return To=sn(rn().mark((function e(t,n){var r,i,a,o,u=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,po(t,i,n);case 4:return a=e.sent,e.next=7,co._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Eo(e,t){return So.apply(this,arguments)}function So(){return(So=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(ha(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return(No=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nn(t),e.next=3,_o(!1,r,n.providerId);case 3:return e.abrupt("return",go(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t){return Ao.apply(this,arguments)}function Ao(){return(Ao=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bo(nn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Po(e,t){return Do.apply(this,arguments)}function Do(){return(Do=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,"POST","/v1/accounts:signInWithCustomToken",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(){return(Oo=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ha(t),e.next=3,Po(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,co._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lo=function(){function e(t,n){Xe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ze(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Mo._fromServerResponse(e,t):$r(e,"internal-error")}}]),e}(),Mo=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ze(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Lo);function Fo(e,t,n){var r;ti((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ti("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ti(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ti(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Uo(){return(Uo=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),a={requestType:"PASSWORD_RESET",email:n},r&&Fo(i,a,r),e.next=5,Na(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(){return(jo=sn(rn().mark((function e(t,n,r){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(nn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(){return(Vo=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa(nn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nn(t),e.next=3,ma(r,{oobCode:n});case 3:i=e.sent,ti(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ti(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ti(i.mfaInfo,r,"internal-error");case 13:ti(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Lo._fromServerResponse(ha(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(){return(zo=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qo(nn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t,n){return Ko.apply(this,arguments)}function Ko(){return(Ko=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),e.next=3,uo(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,co._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(){return(Ho=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),a={requestType:"EMAIL_SIGNIN",email:n},ti(r.handleCodeInApp,i,"argument-error"),r&&Fo(i,a,r),e.next=6,Aa(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(){return(Go=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),ti((a=Xa.credentialWithLink(n,r||oi()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Eo(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t){return Yo.apply(this,arguments)}function Yo(){return(Yo=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:createAuthUri",pi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(){return($o=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui()?oi():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qo(nn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Fo(r.auth,a,n),e.next=8,Sa(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(){return(Jo=sn(rn().mark((function e(t,n,r){var i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Fo(i.auth,o,r),e.next=8,Da(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return(eu=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(){return(tu=sn(rn().mark((function e(t,n){var r,i,a,o,u,s,c;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=nn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Oi(a,Zo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e,t,n){return ru.apply(this,arguments)}function ru(){return(ru=sn(rn().mark((function e(t,n,r){var i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Oi(t,ka(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=Ze((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),au=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o;return Xe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ze(n)}(iu),ou=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"facebook.com",r)}return Ze(n)}(iu),uu=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ze(n)}(au),su=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"google.com",r)}return Ze(n)}(iu),cu=function(e){nt(n,e);var t=at(n);function n(e,r,i){return Xe(this,n),t.call(this,e,"twitter.com",r,i)}return Ze(n)}(au);function lu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Di(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new iu(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ou(a,i);case"github.com":return new uu(a,i);case"google.com":return new su(a,i);case"twitter.com":return new cu(a,i,e.screenName||null);case"custom":case"anonymous":return new iu(a,null);default:return new iu(a,r,i)}}(n)}var hu=function(){function e(t,n,r){Xe(this,e),this.type=t,this.credential=n,this.auth=r}return Ze(e,[{key:"toJSON",value:function(){return{multiFactorSession:Se({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),fu=function(){function e(t,n,r){Xe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ze(e,[{key:"resolveSignIn",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ha(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Lo._fromServerResponse(r,e)}));ti(i.mfaPendingCredential,r,"internal-error");var o=hu._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=sn(rn().mark((function e(t){var a,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,co._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ti(n.user,r,"internal-error"),e.abrupt("return",co._forOperation(n.user,n.operationType,u));case 17:$r(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function du(e,t){return vi(e,"POST","/v2/accounts/mfaEnrollment:start",pi(e,t))}var pu=function(){function e(t){var n=this;Xe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Lo._fromServerResponse(t.auth,e)})))}))}return Ze(e,[{key:"getSession",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hu,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Oi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=sn(rn().mark((function e(t){var n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Oi(this.user,vi(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",pi(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),vu=new WeakMap;var yu="__sak",mu=function(){function e(t,n){Xe(this,e),this.storageRetriever=t,this.type=n}return Ze(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(yu,"1"),this.storage.removeItem(yu),Promise.resolve(!0)):Promise.resolve(!1)}catch(lT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var gu=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=It();return ea(e)||oa(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ua(),e._shouldAllowMigration=!0,e}return Ze(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Nt()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=sn(rn().mark((function e(t,r){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(rt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=sn(rn().mark((function e(t){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(rt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(rt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(mu);gu.type="LOCAL";var ku=gu,_u=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ze(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(mu);_u.type="SESSION";var wu=_u;function bu(e){return Promise.all(e.map(function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var xu=function(){function e(t){Xe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ze(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=sn(rn().mark((function e(t){var n,r,i,a,o,u,s,c;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,bu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Iu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xu.receivers=[];var Tu=function(){function e(t){Xe(this,e),this.target=t,this.handlers=new Set}return Ze(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Iu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Eu(){return window}function Su(){return"undefined"!==typeof Eu().WorkerGlobalScope&&"function"===typeof Eu().importScripts}function Cu(){return Nu.apply(this,arguments)}function Nu(){return(Nu=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ru(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Au="firebaseLocalStorageDb",Pu=1,Du="firebaseLocalStorage",Ou="fbase_key",Lu=function(){function e(t){Xe(this,e),this.request=t}return Ze(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mu(e,t){return e.transaction([Du],t?"readwrite":"readonly").objectStore(Du)}function Fu(){var e=indexedDB.deleteDatabase(Au);return new Lu(e).toPromise()}function Uu(){var e=indexedDB.open(Au,Pu);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Du,{keyPath:Ou})}catch(r){n(r)}})),e.addEventListener("success",sn(rn().mark((function n(){var r;return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Du)){n.next=12;break}return r.close(),n.next=5,Fu();case 5:return n.t0=t,n.next=8,Uu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ju(e,t,n){return Vu.apply(this,arguments)}function Vu(){return Vu=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mu(t,!0).put((Se(i={},Ou,n),Se(i,"value",r),i)),e.abrupt("return",new Lu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function qu(e,t){return Bu.apply(this,arguments)}function Bu(){return Bu=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mu(t,!1).get(n),e.next=3,new Lu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function zu(e,t){var n=Mu(e,!0).delete(t);return new Lu(n).toPromise()}var Wu=function(){function e(){Xe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ze(e,[{key:"_openDb",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Uu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Su()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=sn(rn().mark((function e(){var t=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=xu._getInstance(Su()?self:null),this.receiver._subscribe("keyChanged",function(){var e=sn(rn().mark((function e(n,r){var i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=sn(rn().mark((function e(){var t,n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Tu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ru()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Uu();case 5:return t=e.sent,e.next=8,ju(t,yu,"1");case 8:return e.next=10,zu(t,yu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=sn(rn().mark((function e(t,n){var r=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ju(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=sn(rn().mark((function e(t){var n=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return zu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mu(e,!1).getAll();return new Lu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=et(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Wu.type="LOCAL";var Ku=Wu;function Hu(e,t){return vi(e,"POST","/v2/accounts/mfaSignIn:start",pi(e,t))}function Gu(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Xr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $u(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Xu=1e12,Ju=function(){function e(t){Xe(this,e),this.auth=t,this.counter=Xu,this._widgets=new Map}return Ze(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Zu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Xu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Xu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Xu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zu=function(){function e(t,n,r){var i=this;Xe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ti(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ze(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var es=$u("rcb"),ts=new ci(3e4,6e4),ns=function(){function e(){var t;Xe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Eu().grecaptcha)||void 0===t?void 0:t.render)}return Ze(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ti(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Eu().grecaptcha):new Promise((function(r,i){var a=Eu().setTimeout((function(){i(Xr(e,"network-request-failed"))}),ts.get());Eu()[es]=function(){Eu().clearTimeout(a),delete Eu()[es];var o=Eu().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Xr(e,"internal-error"))},Yu("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Wt({onload:es,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Xr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Eu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var rs=function(){function e(){Xe(this,e)}return Ze(e,[{key:"load",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ju(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),is="recaptcha",as={theme:"light",type:"image"},os=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},as),r=arguments.length>2?arguments[2]:void 0;Xe(this,e),this.parameters=n,this.type=is,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ha(r),this.isInvisible="invisible"===this.parameters.size,ti("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ti(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rs:new ns,this.validateStartingState()}return Ze(e,[{key:"verify",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ti(!this.parameters.sitekey,this.auth,"argument-error"),ti(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ti("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Eu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ti(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=sn(rn().mark((function e(){var t,n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ti(ui()&&!Su(),this.auth,"internal-error"),e.next=3,us();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Gu(this.auth);case 8:ti(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ti(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function us(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ss=function(){function e(t,n){Xe(this,e),this.verificationId=t,this.onConfirmation=n}return Ze(e,[{key:"confirm",value:function(e){var t=Ya._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function cs(){return(cs=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),e.next=3,ds(i,n,nn(r));case 3:return a=e.sent,e.abrupt("return",new ss(a,(function(e){return Eo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e,t,n){return hs.apply(this,arguments)}function hs(){return(hs=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),e.next=3,_o(!1,i,"phone");case 3:return e.next=5,ds(i.auth,n,nn(r));case 5:return a=e.sent,e.abrupt("return",new ss(a,(function(e){return Co(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(){return(fs=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nn(t),e.next=3,ds(i.auth,n,nn(r));case 3:return a=e.sent,e.abrupt("return",new ss(a,(function(e){return Ro(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t,n){return ps.apply(this,arguments)}function ps(){return ps=sn(rn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ti("string"===typeof a,t,"argument-error"),ti(r.type===is,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ti("enroll"===u.type,t,"internal-error"),e.next=13,du(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ti("signin"===u.type,t,"internal-error"),ti(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Hu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,za(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ps.apply(this,arguments)}function vs(){return(vs=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,go(nn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ys=function(){function e(t){Xe(this,e),this.providerId=e.PROVIDER_ID,this.auth=ha(t)}return Ze(e,[{key:"verifyPhoneNumber",value:function(e,t){return ds(this.auth,e,nn(t))}}],[{key:"credential",value:function(e,t){return Ya._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ya._fromTokenResponse(n,r):null}}]),e}();function ms(e,t){return t?ai(t):(ti(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ys.PROVIDER_ID="phone",ys.PHONE_SIGN_IN_METHOD="phone";var gs=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return Va(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Va(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Va(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ya);function ks(e){return Io(e.auth,new gs(e),e.bypassAuthState)}function _s(e){var t=e.auth,n=e.user;return ti(n,t,"internal-error"),bo(n,new gs(e),e.bypassAuthState)}function ws(e){return bs.apply(this,arguments)}function bs(){return(bs=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ti(r=t.user,n,"internal-error"),e.abrupt("return",go(r,new gs(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xs=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Xe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ze(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=sn(rn().mark((function t(n,r){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=sn(rn().mark((function e(t){var n,r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ks;case"linkViaPopup":case"linkViaRedirect":return ws;case"reauthViaPopup":case"reauthViaRedirect":return _s;default:$r(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Is=new ci(2e3,1e4);function Ts(e,t,n){return Es.apply(this,arguments)}function Es(){return(Es=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),Zr(t,n,Ja),a=ms(i,r),o=new Rs(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(){return(Ss=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr((i=nn(t)).auth,n,Ja),a=ms(i.auth,r),o=new Rs(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cs(e,t,n){return Ns.apply(this,arguments)}function Ns(){return(Ns=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr((i=nn(t)).auth,n,Ja),a=ms(i.auth,r),o=new Rs(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rs=function(e){nt(n,e);var t=at(n);function n(e,r,i,a,o){var u;return Xe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=tt(u),u}return Ze(n,[{key:"executeNotNull",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ti(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=sn(rn().mark((function e(){var t,n=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ri(1===this.filter.length,"Popup operations only handle one event"),t=Iu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Xr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Xr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Xr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Is.get())}()}}]),n}(xs);Rs.currentPopupAction=null;var As="pendingRedirect",Ps=new Map,Ds=function(e){nt(n,e);var t=at(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Xe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ze(n,[{key:"execute",value:function(){var e=sn(rn().mark((function e(){var t,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ps.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Os(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,jr(rt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ps.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ps.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=sn(rn().mark((function e(t){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",jr(rt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",jr(rt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(xs);function Os(e,t){return Ls.apply(this,arguments)}function Ls(){return Ls=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vs(n),i=js(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function Ms(e,t){return Fs.apply(this,arguments)}function Fs(){return(Fs=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",js(t)._set(Vs(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t){Ps.set(e._key(),t)}function js(e){return ai(e._redirectPersistence)}function Vs(e){return $i(As,e.config.apiKey,e.name)}function qs(e,t,n){return function(e,t,n){return Bs.apply(this,arguments)}(e,t,n)}function Bs(){return(Bs=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),Zr(t,n,Ja),e.next=4,i._initializationPromise;case 4:return a=ms(i,r),e.next=7,Ms(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e,t,n){return function(e,t,n){return Ws.apply(this,arguments)}(e,t,n)}function Ws(){return(Ws=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr((i=nn(t)).auth,n,Ja),e.next=4,i.auth._initializationPromise;case 4:return a=ms(i.auth,r),e.next=7,Ms(a,i.auth);case 7:return e.next=9,Xs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(e,t,n){return function(e,t,n){return Hs.apply(this,arguments)}(e,t,n)}function Hs(){return(Hs=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr((i=nn(t)).auth,n,Ja),e.next=4,i.auth._initializationPromise;case 4:return a=ms(i.auth,r),e.next=7,_o(!1,i,n.providerId);case 7:return e.next=9,Ms(a,i.auth);case 9:return e.next=11,Xs(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(t)._initializationPromise;case 2:return e.abrupt("return",Ys(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(e,t){return $s.apply(this,arguments)}function $s(){return $s=sn(rn().mark((function e(t,n){var r,i,a,o,u,s=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ha(t),a=ms(i,n),o=new Ds(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Xs(e){return Js.apply(this,arguments)}function Js(){return(Js=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Iu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zs=function(){function e(t){Xe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ze(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!tc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ec(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ec(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ec(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function tc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=sn(rn().mark((function e(t){var n,r=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",vi(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}var ic=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ac=/^https?/;function oc(){return(oc=sn(rn().mark((function e(t){var n,r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nc(t);case 4:n=e.sent,r=n.authorizedDomains,i=et(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!uc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:$r(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function uc(e){var t=oi(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ac.test(r))return!1;if(ic.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var sc=new ci(3e4,6e4);function cc(){var e=Eu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=on(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var lc=null;function hc(e){return lc=lc||function(e){return new Promise((function(t,n){var r,i,a;function o(){cc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){cc(),n(Xr(e,"network-request-failed"))},timeout:sc.get()})}if(null===(i=null===(r=Eu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Eu().gapi)||void 0===a?void 0:a.load)){var u=$u("iframefcb");return Eu()[u]=function(){gapi.load?o():n(Xr(e,"network-request-failed"))},Yu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw lc=null,e}))}(e),lc}var fc=new ci(5e3,15e3),dc="__/auth/iframe",pc="emulator/auth/iframe",vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mc(e){var t=e.config;ti(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?li(t,pc):"https://".concat(e.config.authDomain,"/").concat(dc),r={apiKey:t.apiKey,appName:e.name,v:rr},i=yc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Wt(r).slice(1))}function gc(e){return kc.apply(this,arguments)}function kc(){return kc=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hc(t);case 2:return n=e.sent,ti(r=Eu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:mc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vc,dontclear:!0},(function(e){return new Promise(function(){var n=sn(rn().mark((function n(r,i){var a,o,u;return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Eu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Xr(t,"network-request-failed"),o=Eu().setTimeout((function(){i(a)}),fc.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}var _c={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wc=500,bc=600,xc="_blank",Ic="http://localhost",Tc=function(){function e(t){Xe(this,e),this.window=t,this.associatedEvent=null}return Ze(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ec(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wc,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bc,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},_c),{width:r.toString(),height:i.toString(),top:a,left:o}),l=It().toLowerCase();n&&(u=ta(l)?xc:n),Zi(l)&&(t=t||Ic,c.scrollbars="yes");var h=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return oa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:It())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Tc(null);var f=window.open(t||"",u,h);ti(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Tc(f)}var Sc="__/auth/handler",Cc="emulator/auth/handler";function Nc(e,t,n,r,i,a){ti(e.config.authDomain,e,"auth-domain-config-required"),ti(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rr,eventId:i};if(t instanceof Ja){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Vt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof Za){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Sc);return li(t,Cc)}(e),"?").concat(Wt(p).slice(1))}var Rc="webStorageSupport",Ac=function(){function e(){Xe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wu,this._completeRedirectFn=Ys,this._overrideRedirectResult=Us}return Ze(e,[{key:"_openPopup",value:function(){var e=sn(rn().mark((function e(t,n,r,i){var a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ri(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Nc(t,n,r,oi(),i),e.abrupt("return",Ec(t,o,Iu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=sn(rn().mark((function e(t,n,r,i){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Nc(t,n,r,oi(),i),Eu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ri(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gc(t);case 2:return n=e.sent,r=new Zs(t),n.register("authEvent",(function(e){return ti(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Rc,{type:Rc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Rc];void 0!==i&&t(!!i),$r(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ua()||ea()||oa()}}]),e}(),Pc=Ac,Dc=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this,"phone")).credential=e,r}return Ze(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return vi(e,"POST","/v2/accounts/mfaEnrollment:finalize",pi(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return vi(e,"POST","/v2/accounts/mfaSignIn:finalize",pi(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Xe(this,e),this.factorId=t}return Ze(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ni("unexpected MultiFactorSessionType")}}}]),e}()),Oc=function(){function e(){Xe(this,e)}return Ze(e,null,[{key:"assertion",value:function(e){return Dc._fromCredential(e)}}]),e}();Oc.FACTOR_ID="phone";var Lc="@firebase/auth",Mc="0.21.5",Fc=function(){function e(t){Xe(this,e),this.auth=t,this.internalListeners=new Map}return Ze(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ti(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Uc;!function(e){var t;null===(t=_t())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function jc(){return window}Uc="Browser",$n(new cn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ti(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ti(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Uc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sa(Uc)},i=new la(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ai);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),$n(new cn("auth-internal",(function(e){return function(e){return new Fc(e)}(ha(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Lc,Mc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Uc)),cr(Lc,Mc,"esm2017");var Vc=2e3;function qc(e,t,n){return Bc.apply(this,arguments)}function Bc(){return Bc=sn(rn().mark((function e(t,n,r){var i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jc(),o=a.BuildInfo,ri(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Qc(n.sessionId);case 4:return u=e.sent,s={},oa()?s.ibi=o.packageName:ra()?s.apn=o.packageName:$r(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Nc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Bc.apply(this,arguments)}function zc(){return(zc=sn(rn().mark((function e(t){var n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jc(),r=n.BuildInfo,i={},oa()?i.iosBundleId=r.packageName:ra()?i.androidPackageName=r.packageName:$r(t,"operation-not-supported-in-this-environment"),e.next=5,nc(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wc(e){var t=jc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Kc(e,t,n){return Hc.apply(this,arguments)}function Hc(){return Hc=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Xr(t,"redirect-cancelled-by-user"))}),Vc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ra()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Hc.apply(this,arguments)}function Gc(e){var t,n,r,i,a,o,u,s,c,l,h=jc();ti("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ti("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ti("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ti("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ti("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Qc(e){return Yc.apply(this,arguments)}function Yc(){return(Yc=sn(rn().mark((function e(t){var n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$c(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $c(e){if(ri(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Xc=20,Jc=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ze(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),jr(rt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Zs);function Zc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:il(),postBody:null,tenantId:e.tenantId,error:Xr(e,"no-auth-event")}}function el(e,t){return al()._set(ol(e),t)}function tl(e){return nl.apply(this,arguments)}function nl(){return(nl=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,al()._get(ol(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,al()._remove(ol(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(e,t){var n,r,i=function(e){var t=ul(e),n=t.link?decodeURIComponent(t.link):void 0,r=ul(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ul(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ul(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Xr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function il(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Xc;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function al(){return ai(ku)}function ol(e){return $i("authEvent",e.config.apiKey,e.name)}function ul(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||an(t)||o(t)||u();r[0];return Kt(r.slice(1).join("?"))}var sl=function(){function e(){Xe(this,e),this._redirectPersistence=wu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ys,this._overrideRedirectResult=Us}return Ze(e,[{key:"_initialize",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Jc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){$r(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=sn(rn().mark((function e(t,n,r,i){var a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ps.clear(),e.next=10,this._originValidation(t);case 10:return o=Zc(t,r,i),e.next=13,el(t,o);case 13:return e.next=15,qc(t,o,n);case 15:return u=e.sent,e.next=18,Wc(u);case 18:return s=e.sent,e.abrupt("return",Kc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=jc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(sn(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tl(e);case 2:t.onEvent(ll());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=sn(rn().mark((function n(r){var i,a;return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,tl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=rl(i,r.url)),t.onEvent(a||ll());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");jc().handleOpenURL=function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),cl=sl;function ll(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xr("no-auth-event")}}var hl="@firebase/auth-compat",fl="0.3.5",dl=1e3;function pl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return!("file:"!==pl()&&"ionic:"!==pl()&&"capacitor:"!==pl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return Nt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/Edge\/\d+/.test(e)}(e)}function ml(){try{var e=self.localStorage,t=Iu();if(e)return e.setItem(t,"1"),e.removeItem(t),!yl()||At()}catch(n){return gl()&&At()}return!1}function gl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function kl(){return("http:"===pl()||"https:"===pl()||St()||vl())&&!(Ct()||Et())&&ml()&&!gl()}function _l(){return vl()&&"undefined"!==typeof document}function wl(){return bl.apply(this,arguments)}function bl(){return(bl=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_l()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),dl);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xl={LOCAL:"local",NONE:"none",SESSION:"session"},Il=ti,Tl="persistence";function El(e,t){Il(Object.values(xl).includes(t),e,"invalid-persistence-type"),Ct()?Il(t!==xl.SESSION,e,"unsupported-persistence-type"):Et()?Il(t===xl.NONE,e,"unsupported-persistence-type"):gl()?Il(t===xl.NONE||t===xl.LOCAL&&At(),e,"unsupported-persistence-type"):Il(t===xl.NONE||ml(),e,"unsupported-persistence-type")}function Sl(e){return Cl.apply(this,arguments)}function Cl(){return Cl=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Nl(),r=$i(Tl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Nl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Rl=ti,Al=function(){function e(){Xe(this,e),this.browserResolver=ai(Pc),this.cordovaResolver=ai(cl),this.underlyingResolver=null,this._redirectPersistence=wu,this._completeRedirectFn=Ys,this._overrideRedirectResult=Us}return Ze(e,[{key:"_initialize",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=sn(rn().mark((function e(t,n,r,i){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=sn(rn().mark((function e(t,n,r,i){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return _l()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Rl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pl(e){return e.unwrap()}function Dl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Ul(e,function(e,t){var n,r=nn(e),i=t;return ti(t.customData.operationType,r,"argument-error"),ti(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fu._fromError(r,i)}(e,t));else if(r){var i=Ol(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ol(e){var t=(e instanceof Pt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Pt)&&"temporaryProof"in t&&"phoneNumber"in t)return ys.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Br.PASSWORD)return null;switch(r){case Br.GOOGLE:n=no;break;case Br.FACEBOOK:n=to;break;case Br.GITHUB:n=ro;break;case Br.TWITTER:n=oo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?io._create(r,u):Ba._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new eo(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Pt?n.credentialFromError(e):n.credentialFromResult(e)}function Ll(e,t){return t.catch((function(t){throw t instanceof Pt&&Dl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ol(t)),additionalUserInfo:lu(e),user:jl.getOrCreate(r)}}))}function Ml(e,t){return Fl.apply(this,arguments)}function Fl(){return(Fl=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ll(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ul=function(){function e(t,n){Xe(this,e),this.resolver=n,this.auth=t.wrapped()}return Ze(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ll(Pl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),jl=function(){function e(t){Xe(this,e),this._delegate=t,this.multiFactor=function(e){var t=nn(e);return vu.has(t)||vu.set(t,pu._fromUser(t)),vu.get(t)}(t)}return Ze(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ll(this.auth,Co(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ml(this.auth,ls(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ll(this.auth,Cs(this._delegate,t,Al)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sl(ha(this.auth));case 2:return e.abrupt("return",Ks(this._delegate,t,Al));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ll(this.auth,Ro(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ml(this.auth,function(e,t,n){return fs.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ll(this.auth,function(e,t,n){return Ss.apply(this,arguments)}(this._delegate,e,Al))}},{key:"reauthenticateWithRedirect",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sl(ha(this.auth));case 2:return e.abrupt("return",zs(this._delegate,t,Al));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return nu(nn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return nu(nn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return vs.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return tu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Jo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();jl.USER_MAP=new WeakMap;var Vl=ti,ql=function(){function e(t,n){if(Xe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Vl(r,"invalid-api-key",{appName:t.name}),Vl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Al:void 0;this._delegate=n.initialize({options:{persistence:zl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Kr),this.linkUnderlyingAuth()}return Ze(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?jl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){da(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Vo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return qo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return jo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ll(this._delegate,Wo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return $o.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=$a.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vl(kl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Gs(this._delegate,Al);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ll(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ha(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Bl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Bl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ho.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Uo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:El(this._delegate,t),e.t0=t,e.next=e.t0===xl.SESSION?4:e.t0===xl.LOCAL?6:e.t0===xl.NONE?11:13;break;case 4:return n=wu,e.abrupt("break",14);case 6:return e.next=8,ai(Ku)._isAvailable();case 8:return r=e.sent,n=r?Ku:ku,e.abrupt("break",14);case 11:return n=Yi,e.abrupt("break",14);case 13:return e.abrupt("return",$r("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ll(this._delegate,function(e){return ho.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ll(this._delegate,Eo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ll(this._delegate,function(e,t){return Oo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ll(this._delegate,function(e,t,n){return Eo(nn(e),Xa.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ll(this._delegate,function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ml(this._delegate,function(e,t,n){return cs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vl(kl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ll(this._delegate,Ts(this._delegate,t,Al)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vl(kl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Sl(this._delegate);case 3:return e.abrupt("return",qs(this._delegate,t,Al));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return zo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Bl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&jl.getOrCreate(e))},error:t,complete:n}}function zl(e,t){var n=function(e,t){var n=Nl();if(!n)return[];var r=$i(Tl,e,t);switch(n.getItem(r)){case xl.NONE:return[Yi];case xl.LOCAL:return[Ku,wu];case xl.SESSION:return[wu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ku)||n.push(Ku),"undefined"!==typeof window)for(var r=0,i=[ku,wu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Yi)||n.push(Yi),n}ql.Persistence=xl;var Wl=function(){function e(){Xe(this,e),this.providerId="phone",this._delegate=new ys(Pl(Ur.auth()))}return Ze(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ys.credential(e,t)}}]),e}();Wl.PHONE_SIGN_IN_METHOD=ys.PHONE_SIGN_IN_METHOD,Wl.PROVIDER_ID=ys.PROVIDER_ID;var Kl,Hl=ti,Gl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur.app();Xe(this,e),Hl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new os(t,n,i.auth()),this.type=this._delegate.type}return Ze(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),Ql="auth-compat";(Kl=Ur).INTERNAL.registerComponent(new cn(Ql,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ql(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zr.EMAIL_SIGNIN,PASSWORD_RESET:zr.PASSWORD_RESET,RECOVER_EMAIL:zr.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:zr.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:zr.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:zr.VERIFY_EMAIL}},EmailAuthProvider:Xa,FacebookAuthProvider:to,GithubAuthProvider:ro,GoogleAuthProvider:no,OAuthProvider:eo,SAMLAuthProvider:ao,PhoneAuthProvider:Wl,PhoneMultiFactorGenerator:Oc,RecaptchaVerifier:Gl,TwitterAuthProvider:oo,Auth:ql,AuthCredential:ya,Error:Pt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Kl.registerVersion(hl,fl);var Yl,$l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Xl={},Jl=Jl||{},Zl=$l||self;function eh(){}function th(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function nh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var rh="closure_uid_"+(1e9*Math.random()>>>0),ih=0;function ah(e,t,n){return e.call.apply(e.bind,arguments)}function oh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function uh(e,t,n){return(uh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ah:oh).apply(null,arguments)}function sh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ch(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function lh(){this.s=this.s,this.o=this.o}lh.prototype.s=!1,lh.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,rh)&&e[rh]||(e[rh]=++ih))},lh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function fh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function dh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(th(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ph(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ph.prototype.h=function(){this.defaultPrevented=!0};var vh=function(){if(!Zl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zl.addEventListener("test",eh,t),Zl.removeEventListener("test",eh,t)}catch(n){}return e}();function yh(e){return/^[\s\xa0]*$/.test(e)}var mh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function gh(e,t){return e<t?-1:e>t?1:0}function kh(){var e=Zl.navigator;return e&&(e=e.userAgent)?e:""}function _h(e){return-1!=kh().indexOf(e)}function wh(e){return wh[" "](e),e}wh[" "]=eh;var bh,xh=_h("Opera"),Ih=_h("Trident")||_h("MSIE"),Th=_h("Edge"),Eh=Th||Ih,Sh=_h("Gecko")&&!(-1!=kh().toLowerCase().indexOf("webkit")&&!_h("Edge"))&&!(_h("Trident")||_h("MSIE"))&&!_h("Edge"),Ch=-1!=kh().toLowerCase().indexOf("webkit")&&!_h("Edge");function Nh(){var e=Zl.document;return e?e.documentMode:void 0}e:{var Rh="",Ah=function(){var e=kh();return Sh?/rv:([^\);]+)(\)|;)/.exec(e):Th?/Edge\/([\d\.]+)/.exec(e):Ih?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ch?/WebKit\/(\S+)/.exec(e):xh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ah&&(Rh=Ah?Ah[1]:""),Ih){var Ph=Nh();if(null!=Ph&&Ph>parseFloat(Rh)){bh=String(Ph);break e}}bh=Rh}var Dh,Oh={};function Lh(){return function(e){var t=Oh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=mh(String(bh)).split("."),n=mh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=gh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||gh(0==a[2].length,0==o[2].length)||gh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Zl.document&&Ih){var Mh=Nh();Dh=Mh||(parseInt(bh,10)||void 0)}else Dh=void 0;var Fh=Dh;function Uh(e,t){if(ph.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sh){e:{try{wh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Uh.X.h.call(this)}}ch(Uh,ph);var jh={2:"touch",3:"pen",4:"mouse"};Uh.prototype.h=function(){Uh.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vh="closure_listenable_"+(1e6*Math.random()|0),qh=0;function Bh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++qh,this.ba=this.ea=!1}function zh(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Wh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Kh(e){var t={};for(var n in e)t[n]=e[n];return t}var Hh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Hh.length;a++)n=Hh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qh(e){this.src=e,this.g={},this.h=0}function Yh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=hh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(zh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $h(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Qh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$h(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Bh(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Xh="closure_lm_"+(1e6*Math.random()|0),Jh={};function Zh(e,t,n,r,i){if(r&&r.once)return tf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zh(e,t[a],n,r,i);return null}return n=cf(n),e&&e[Vh]?e.N(t,n,nh(r)?!!r.capture:!!r,i):ef(e,t,n,!1,r,i)}function ef(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=nh(i)?!!i.capture:!!i,u=uf(e);if(u||(e[Xh]=u=new Qh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=of;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(af(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function tf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)tf(e,t[a],n,r,i);return null}return n=cf(n),e&&e[Vh]?e.O(t,n,nh(r)?!!r.capture:!!r,i):ef(e,t,n,!0,r,i)}function nf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)nf(e,t[a],n,r,i);else r=nh(r)?!!r.capture:!!r,n=cf(n),e&&e[Vh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$h(a=e.g[t],n,r,i))&&(zh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=uf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$h(t,n,r,i)),(n=-1<e?t[e]:null)&&rf(n))}function rf(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Vh])Yh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(af(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=uf(t))?(Yh(n,e),0==n.h&&(n.src=null,t[Xh]=null)):zh(e)}}}function af(e){return e in Jh?Jh[e]:Jh[e]="on"+e}function of(e,t){if(e.ba)e=!0;else{t=new Uh(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&rf(e),e=n.call(r,t)}return e}function uf(e){return(e=e[Xh])instanceof Qh?e:null}var sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function cf(e){return"function"===typeof e?e:(e[sf]||(e[sf]=function(t){return e.handleEvent(t)}),e[sf])}function lf(){lh.call(this),this.i=new Qh(this),this.P=this,this.I=null}function hf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ph(t,e);else if(t instanceof ph)t.target=t.target||e;else{var i=t;Gh(t=new ph(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ff(o,r,!0,t)&&i}if(i=ff(o=t.g=e,r,!0,t)&&i,i=ff(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ff(o=t.g=n[a],r,!1,t)&&i}function ff(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Yh(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ch(lf,lh),lf.prototype[Vh]=!0,lf.prototype.removeEventListener=function(e,t,n,r){nf(this,e,t,n,r)},lf.prototype.M=function(){if(lf.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zh(n[r]);delete t.g[e],t.h--}}this.I=null},lf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},lf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var df=Zl.JSON.stringify;function pf(){var e=bf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var vf,yf=function(){function e(){Xe(this,e),this.h=this.g=null}return Ze(e,[{key:"add",value:function(e,t){var n=mf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),mf=new(function(){function e(t,n){Xe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ze(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new gf}),(function(e){return e.reset()})),gf=function(){function e(){Xe(this,e),this.next=this.g=this.h=null}return Ze(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function kf(e){Zl.setTimeout((function(){throw e}),0)}function _f(e,t){vf||function(){var e=Zl.Promise.resolve(void 0);vf=function(){e.then(xf)}}(),wf||(vf(),wf=!0),bf.add(e,t)}var wf=!1,bf=new yf;function xf(){for(var e;e=pf();){try{e.h.call(e.g)}catch(n){kf(n)}var t=mf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}wf=!1}function If(e,t){lf.call(this),this.h=e||1,this.g=t||Zl,this.j=uh(this.lb,this),this.l=Date.now()}function Tf(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Ef(e,t,n){if("function"===typeof e)n&&(e=uh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=uh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zl.setTimeout(e,t||0)}function Sf(e){e.g=Ef((function(){e.g=null,e.i&&(e.i=!1,Sf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ch(If,lf),(Yl=If.prototype).ca=!1,Yl.R=null,Yl.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hf(this,"tick"),this.ca&&(Tf(this),this.start()))}},Yl.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yl.M=function(){If.X.M.call(this),Tf(this),delete this.g};var Cf=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ze(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Sf(this)}},{key:"M",value:function(){jr(rt(n.prototype),"M",this).call(this),this.g&&(Zl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(lh);function Nf(e){lh.call(this),this.h=e,this.g={}}ch(Nf,lh);var Rf=[];function Af(e,t,n,r){Array.isArray(n)||(n&&(Rf[0]=n.toString()),n=Rf);for(var i=0;i<n.length;i++){var a=Zh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pf(e){Wh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&rf(e)}),e),e.g={}}function Df(){this.g=!0}function Of(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return df(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Nf.prototype.M=function(){Nf.X.M.call(this),Pf(this)},Nf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Df.prototype.Aa=function(){this.g=!1},Df.prototype.info=function(){};var Lf={},Mf=null;function Ff(){return Mf=Mf||new lf}function Uf(e){ph.call(this,Lf.Pa,e)}function jf(e){var t=Ff();hf(t,new Uf(t))}function Vf(e,t){ph.call(this,Lf.STAT_EVENT,e),this.stat=t}function qf(e){var t=Ff();hf(t,new Vf(t,e))}function Bf(e,t){ph.call(this,Lf.Qa,e),this.size=t}function zf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Zl.setTimeout((function(){e()}),t)}Lf.Pa="serverreachability",ch(Uf,ph),Lf.STAT_EVENT="statevent",ch(Vf,ph),Lf.Qa="timingevent",ch(Bf,ph);var Wf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Kf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hf(){}function Gf(e){return e.h||(e.h=e.i())}function Qf(){}Hf.prototype.h=null;var Yf,$f={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Xf(){ph.call(this,"d")}function Jf(){ph.call(this,"c")}function Zf(){}function ed(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Nf(this),this.O=nd,e=Eh?125:void 0,this.T=new If(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new td}function td(){this.i=null,this.g="",this.h=!1}ch(Xf,ph),ch(Jf,ph),ch(Zf,Hf),Zf.prototype.g=function(){return new XMLHttpRequest},Zf.prototype.i=function(){return{}},Yf=new Zf;var nd=45e3,rd={},id={};function ad(e,t,n){e.K=1,e.v=Id(kd(t)),e.s=n,e.P=!0,od(e,null)}function od(e,t){e.F=Date.now(),ld(e),e.A=kd(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Fd(n.i,"t",r),e.C=0,n=e.l.H,e.h=new td,e.g=Up(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Cf(uh(e.La,e,e.g),e.N)),Af(e.S,e.g,"readystatechange",e.ib),t=e.H?Kh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),jf(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ud(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function sd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=cd(e,n))==id){4==t&&(e.o=4,qf(14),i=!1),Of(e.j,e.m,null,"[Incomplete Response]");break}if(r==rd){e.o=4,qf(15),Of(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Of(e.j,e.m,r,null),vd(e,r)}ud(e)&&r!=id&&r!=rd&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rp(t),t.K=!0,qf(11))):(Of(e.j,e.m,n,"[Invalid Chunked Response]"),pd(e),dd(e))}function cd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?id:(n=Number(t.substring(n,r)),isNaN(n)?rd:(r+=1)+n>t.length?id:(t=t.substr(r,n),e.C=r+n,t))}function ld(e){e.V=Date.now()+e.O,hd(e,e.O)}function hd(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zf(uh(e.gb,e),t)}function fd(e){e.B&&(Zl.clearTimeout(e.B),e.B=null)}function dd(e){0==e.l.G||e.I||Dp(e.l,e)}function pd(e){fd(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Tf(e.T),Pf(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function vd(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Kd(n.h,e)))if(!e.J&&Kd(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Pp(n),bp(n)}Np(n),qf(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=zf(uh(n.cb,n),6e3));if(1>=Wd(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Lp(n,11)}else if((e.J||n.g==e)&&Pp(n),!yh(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Hd(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,xd(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Fp(r,r.H?r.ka:null,r.V),d.J){Gd(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(fd(p),ld(p)),r.g=d}else Cp(r);0<n.i.length&&Ip(n)}else"stop"!=a[0]&&"close"!=a[0]||Lp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Lp(n,7):wp(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}jf()}catch(a){}}function yd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(th(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(th(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(th(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Yl=ed.prototype).setTimeout=function(e){this.O=e},Yl.ib=function(e){e=e.target;var t=this.L;t&&3==vp(e)?t.l():this.La(e)},Yl.La=function(e){try{if(e==this.g)e:{var t=vp(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Eh||this.g&&(this.h.h||this.g.fa()||yp(this.g)))){this.I||4!=t||7==n||jf(),fd(this);var r=this.g.aa();this.Y=r;t:if(ud(this)){var i=yp(this.g);e="";var a=i.length,o=4==vp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pd(this),dd(this);var u="";break t}this.h.i=new Zl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yh(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,qf(12),pd(this),dd(this);break e}Of(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vd(this,r)}this.P?(sd(this,t,u),Eh&&this.i&&3==t&&(Af(this.S,this.T,"tick",this.hb),this.T.start())):(Of(this.j,this.m,u,null),vd(this,u)),4==t&&pd(this),this.i&&!this.I&&(4==t?Dp(this.l,this):(this.i=!1,ld(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,qf(12)):(this.o=0,qf(13)),pd(this),dd(this)}}}catch(t){}},Yl.hb=function(){if(this.g){var e=vp(this.g),t=this.g.fa();this.C<t.length&&(fd(this),sd(this,e,t),this.i&&4!=e&&ld(this))}},Yl.cancel=function(){this.I=!0,pd(this)},Yl.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(jf(),qf(17)),pd(this),this.o=2,dd(this)):hd(this,this.V-e)};var md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof gd){this.h=void 0!==t?t:e.h,_d(this,e.j),this.s=e.s,this.g=e.g,wd(this,e.m),this.l=e.l,t=e.i;var n=new Dd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bd(this,n),this.o=e.o}else e&&(n=String(e).match(md))?(this.h=!!t,_d(this,n[1]||"",!0),this.s=Td(n[2]||""),this.g=Td(n[3]||"",!0),wd(this,n[4]),this.l=Td(n[5]||"",!0),bd(this,n[6]||"",!0),this.o=Td(n[7]||"")):(this.h=!!t,this.i=new Dd(null,this.h))}function kd(e){return new gd(e)}function _d(e,t,n){e.j=n?Td(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bd(e,t,n){t instanceof Dd?(e.i=t,function(e,t){t&&!e.j&&(Od(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ld(this,t),Fd(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ed(t,Ad)),e.i=new Dd(t,e.h))}function xd(e,t,n){e.i.set(t,n)}function Id(e){return xd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Td(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ed(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Sd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Sd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ed(t,Cd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ed(t,Cd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ed(n,"/"==n.charAt(0)?Rd:Nd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ed(n,Pd)),e.join("")};var Cd=/[#\/\?@]/g,Nd=/[#\?:]/g,Rd=/[#\?]/g,Ad=/[#\?@]/g,Pd=/#/g;function Dd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Od(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ld(e,t){Od(e),t=Ud(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Md(e,t){return Od(e),t=Ud(e,t),e.g.has(t)}function Fd(e,t,n){Ld(e,t),0<n.length&&(e.i=null,e.g.set(Ud(e,t),fh(n)),e.h+=n.length)}function Ud(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Yl=Dd.prototype).add=function(e,t){Od(this),this.i=null,e=Ud(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Yl.forEach=function(e,t){Od(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Yl.oa=function(){Od(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Yl.W=function(e){Od(this);var t=[];if("string"===typeof e)Md(this,e)&&(t=t.concat(this.g.get(Ud(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Yl.set=function(e,t){return Od(this),this.i=null,Md(this,e=Ud(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Yl.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Yl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var jd=Ze((function e(t,n){Xe(this,e),this.h=t,this.g=n}));function Vd(e){this.l=e||Bd,Zl.PerformanceNavigationTiming?e=0<(e=Zl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zl.g&&Zl.g.Ga&&Zl.g.Ga()&&Zl.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qd,Bd=10;function zd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wd(e){return e.h?1:e.g?e.g.size:0}function Kd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hd(e,t){e.g?e.g.add(t):e.h=t}function Gd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=et(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return fh(e.i)}function Yd(){}function $d(){this.g=new Yd}function Xd(e,t,n){var r=n||"";try{yd(e,(function(e,n){var i=e;nh(e)&&(i=df(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Zd(e){this.l=e.ac||null,this.j=e.jb||!1}function ep(e,t){lf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=tp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vd.prototype.cancel=function(){if(this.i=Qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=et(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Yd.prototype.stringify=function(e){return Zl.JSON.stringify(e,void 0)},Yd.prototype.parse=function(e){return Zl.JSON.parse(e,void 0)},ch(Zd,Hf),Zd.prototype.g=function(){return new ep(this.l,this.j)},Zd.prototype.i=(qd={},function(){return qd}),ch(ep,lf);var tp=0;function np(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function rp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ip(e)}function ip(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Yl=ep.prototype).open=function(e,t){if(this.readyState!=tp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ip(this)},Yl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Zl).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Yl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rp(this)),this.readyState=tp},Yl.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Zl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;np(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Yl.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?rp(this):ip(this),3==this.readyState&&np(this)}},Yl.Va=function(e){this.g&&(this.response=this.responseText=e,rp(this))},Yl.Ua=function(e){this.g&&(this.response=e,rp(this))},Yl.ga=function(){this.g&&rp(this)},Yl.setRequestHeader=function(e,t){this.v.append(e,t)},Yl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Yl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ep.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ap=Zl.JSON.parse;function op(e){lf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=up,this.K=this.L=!1}ch(op,lf);var up="",sp=/^https?$/i,cp=["POST","PUT"];function lp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,hp(e),dp(e)}function hp(e){e.D||(e.D=!0,hf(e,"complete"),hf(e,"error"))}function fp(e){if(e.h&&"undefined"!=typeof Jl&&(!e.C[1]||4!=vp(e)||2!=e.aa()))if(e.v&&4==vp(e))Ef(e.Ha,0,e);else if(hf(e,"readystatechange"),4==vp(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(md)[1]||null;if(!a&&Zl.self&&Zl.self.location){var o=Zl.self.location.protocol;a=o.substr(0,o.length-1)}i=!sp.test(a?a.toLowerCase():"")}t=i}if(t)hf(e,"complete"),hf(e,"success");else{e.m=6;try{var u=2<vp(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",hp(e)}}finally{dp(e)}}}function dp(e,t){if(e.g){pp(e);var n=e.g,r=e.C[0]?eh:null;e.g=null,e.C=null,t||hf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Zl.clearTimeout(e.A),e.A=null)}function vp(e){return e.g?e.g.readyState:0}function yp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case up:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(nv){return null}}function mp(e){var t="";return Wh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function gp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=mp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xd(e,t,n))}function kp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _p(e){this.Ca=0,this.i=[],this.j=new Df,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=kp("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=kp("baseRetryDelayMs",5e3,e),this.bb=kp("retryDelaySeedMs",1e4,e),this.$a=kp("forwardChannelMaxRetries",2,e),this.ta=kp("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Vd(e&&e.concurrentRequestLimit),this.Fa=new $d,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function wp(e){if(xp(e),3==e.G){var t=e.U++,n=kd(e.F);xd(n,"SID",e.I),xd(n,"RID",t),xd(n,"TYPE","terminate"),Ep(e,n),(t=new ed(e,e.j,t,void 0)).K=2,t.v=Id(kd(n)),n=!1,Zl.navigator&&Zl.navigator.sendBeacon&&(n=Zl.navigator.sendBeacon(t.v.toString(),"")),!n&&Zl.Image&&((new Image).src=t.v,n=!0),n||(t.g=Up(t.l,null),t.g.da(t.v)),t.F=Date.now(),ld(t)}Mp(e)}function bp(e){e.g&&(Rp(e),e.g.cancel(),e.g=null)}function xp(e){bp(e),e.u&&(Zl.clearTimeout(e.u),e.u=null),Pp(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Zl.clearTimeout(e.m),e.m=null)}function Ip(e){zd(e.h)||e.m||(e.m=!0,_f(e.Ja,e),e.C=0)}function Tp(e,t){var n;n=t?t.m:e.U++;var r=kd(e.F);xd(r,"SID",e.I),xd(r,"RID",n),xd(r,"AID",e.T),Ep(e,r),e.o&&e.s&&gp(r,e.o,e.s),n=new ed(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Sp(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Hd(e.h,n),ad(n,r,t)}function Ep(e,t){e.ia&&Wh(e.ia,(function(e,n){xd(t,n,e)})),e.l&&yd({},(function(e,n){xd(t,n,e)}))}function Sp(e,t,n){n=Math.min(e.i.length,n);var r=e.l?uh(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Xd(l,o,"req"+c+"_")}catch(hv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Cp(e){e.g||e.u||(e.Z=1,_f(e.Ia,e),e.A=0)}function Np(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=zf(uh(e.Ia,e),Op(e,e.A)),e.A++,!0)}function Rp(e){null!=e.B&&(Zl.clearTimeout(e.B),e.B=null)}function Ap(e){e.g=new ed(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=kd(e.sa);xd(t,"RID","rpc"),xd(t,"SID",e.I),xd(t,"CI",e.L?"0":"1"),xd(t,"AID",e.T),xd(t,"TYPE","xmlhttp"),Ep(e,t),e.o&&e.s&&gp(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Id(kd(t)),n.s=null,n.P=!0,od(n,e)}function Pp(e){null!=e.v&&(Zl.clearTimeout(e.v),e.v=null)}function Dp(e,t){var n=null;if(e.g==t){Pp(e),Rp(e),e.g=null;var r=2}else{if(!Kd(e.h,t))return;n=t.D,Gd(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;hf(r=Ff(),new Bf(r,n)),Ip(e)}else Cp(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Wd(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=zf(uh(e.Ja,e,t),Op(e,e.C)),e.C++,!0))}(e,t)||2==r&&Np(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Lp(e,5);break;case 4:Lp(e,10);break;case 3:Lp(e,6);break;default:Lp(e,2)}}function Op(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Lp(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=uh(e.kb,e);n||(n=new gd("//www.google.com/images/cleardot.gif"),Zl.location&&"http"==Zl.location.protocol||_d(n,"https"),Id(n)),function(e,t){var n=new Df;if(Zl.Image){var r=new Image;r.onload=sh(Jd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sh(Jd,n,r,"TestLoadImage: error",!1,t),r.onabort=sh(Jd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sh(Jd,n,r,"TestLoadImage: timeout",!1,t),Zl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qf(2);e.G=0,e.l&&e.l.va(t),Mp(e),xp(e)}function Mp(e){if(e.G=0,e.la=[],e.l){var t=Qd(e.h);0==t.length&&0==e.i.length||(dh(e.la,t),dh(e.la,e.i),e.h.i.length=0,fh(e.i),e.i.length=0),e.l.ua()}}function Fp(e,t,n){var r=n instanceof gd?kd(n):new gd(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),wd(r,r.m);else{var i=Zl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new gd(null,void 0);r&&_d(a,r),t&&(a.g=t),i&&wd(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&xd(r,n,t),xd(r,"VER",e.ma),Ep(e,r),r}function Up(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new op(new Zd({jb:!0})):new op(e.ra)).Ka(e.H),t}function jp(){}function Vp(){if(Ih&&!(10<=Number(Fh)))throw Error("Environmental error: no available transport.")}function qp(e,t){lf.call(this),this.g=new _p(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!yh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!yh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wp(this)}function Bp(e){Xf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zp(){Jf.call(this),this.status=1}function Wp(e){this.g=e}(Yl=op.prototype).Ka=function(e){this.L=e},Yl.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yf.g(),this.C=this.u?Gf(this.u):Gf(Yf),this.g.onreadystatechange=uh(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void lp(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=et(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Zl.FormData&&e instanceof Zl.FormData,!(0<=hh(cp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=et(n);try{for(l.s();!(c=l.n()).done;){var h=s(c.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pp(this),0<this.B&&((this.K=function(e){return Ih&&Lh()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=uh(this.qa,this)):this.A=Ef(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){lp(this,u)}},Yl.qa=function(){"undefined"!=typeof Jl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hf(this,"timeout"),this.abort(8))},Yl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hf(this,"complete"),hf(this,"abort"),dp(this))},Yl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dp(this,!0)),op.X.M.call(this)},Yl.Ha=function(){this.s||(this.F||this.v||this.l?fp(this):this.fb())},Yl.fb=function(){fp(this)},Yl.aa=function(){try{return 2<vp(this)?this.g.status:-1}catch(qd){return-1}},Yl.fa=function(){try{return this.g?this.g.responseText:""}catch(qd){return""}},Yl.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ap(t)}},Yl.Ea=function(){return this.m},Yl.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Yl=_p.prototype).ma=8,Yl.G=1,Yl.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ed(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Gh(n=Kh(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sp(this,t,r),xd(i=kd(this.F),"RID",e),xd(i,"CVER",22),this.D&&xd(i,"X-HTTP-Session-Id",this.D),Ep(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(mp(n)))+"&"+r:this.o&&gp(i,this.o,n)),Hd(this.h,t),this.Ya&&xd(i,"TYPE","init"),this.O?(xd(i,"$req",r),xd(i,"SID","null"),t.Z=!0,ad(t,i,null)):ad(t,i,r),this.G=2}}else 3==this.G&&(e?Tp(this,e):0==this.i.length||zd(this.h)||Tp(this))},Yl.Ia=function(){if(this.u=null,Ap(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=zf(uh(this.eb,this),e)}},Yl.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qf(10),bp(this),Ap(this))},Yl.cb=function(){null!=this.v&&(this.v=null,bp(this),Np(this),qf(19))},Yl.kb=function(e){e?(this.j.info("Successfully pinged google.com"),qf(2)):(this.j.info("Failed to ping google.com"),qf(1))},(Yl=jp.prototype).xa=function(){},Yl.wa=function(){},Yl.va=function(){},Yl.ua=function(){},Yl.Ra=function(){},Vp.prototype.g=function(e,t){return new qp(e,t)},ch(qp,lf),qp.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;qf(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Fp(e,null,e.V),Ip(e)},qp.prototype.close=function(){wp(this.g)},qp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=df(e),e=n);t.i.push(new jd(t.ab++,e)),3==t.G&&Ip(t)},qp.prototype.M=function(){this.g.l=null,delete this.j,wp(this.g),delete this.g,qp.X.M.call(this)},ch(Bp,Xf),ch(zp,Jf),ch(Wp,jp),Wp.prototype.xa=function(){hf(this.g,"a")},Wp.prototype.wa=function(e){hf(this.g,new Bp(e))},Wp.prototype.va=function(e){hf(this.g,new zp)},Wp.prototype.ua=function(){hf(this.g,"b")},Vp.prototype.createWebChannel=Vp.prototype.g,qp.prototype.send=qp.prototype.u,qp.prototype.open=qp.prototype.m,qp.prototype.close=qp.prototype.close,Wf.NO_ERROR=0,Wf.TIMEOUT=8,Wf.HTTP_ERROR=6,Kf.COMPLETE="complete",Qf.EventType=$f,$f.OPEN="a",$f.CLOSE="b",$f.ERROR="c",$f.MESSAGE="d",lf.prototype.listen=lf.prototype.N,op.prototype.listenOnce=op.prototype.O,op.prototype.getLastError=op.prototype.Oa,op.prototype.getLastErrorCode=op.prototype.Ea,op.prototype.getStatus=op.prototype.aa,op.prototype.getResponseJson=op.prototype.Sa,op.prototype.getResponseText=op.prototype.fa,op.prototype.send=op.prototype.da,op.prototype.setWithCredentials=op.prototype.Ka;var Kp=Xl.createWebChannelTransport=function(){return new Vp},Hp=Xl.getStatEventTarget=function(){return Ff()},Gp=Xl.ErrorCode=Wf,Qp=Xl.EventType=Kf,Yp=Xl.Event=Lf,$p=Xl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xp=Xl.FetchXmlHttpFactory=Zd,Jp=Xl.WebChannel=Qf,Zp=Xl.XhrIo=op,ev="@firebase/firestore",tv=function(){function e(t){Xe(this,e),this.uid=t}return Ze(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();tv.UNAUTHENTICATED=new tv(null),tv.GOOGLE_CREDENTIALS=new tv("google-credentials-uid"),tv.FIRST_PARTY=new tv("first-party-uid"),tv.MOCK_USER=new tv("mock-user");var nv="9.18.0",rv=new _n("@firebase/firestore");function iv(){return rv.logLevel}function av(e){if(rv.logLevel<=dn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.debug.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(on(i)))}}function ov(e){if(rv.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.error.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(on(i)))}}function uv(e){if(rv.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.warn.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(on(i)))}}function sv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function cv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(nv,") INTERNAL ASSERTION FAILED: ")+e;throw ov(t),new Error(t)}function lv(e,t){e||cv()}function hv(e,t){return e}var fv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dv=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ze(n)}(Pt),pv=Ze((function e(){var t=this;Xe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vv=Ze((function e(t,n){Xe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),yv=function(){function e(){Xe(this,e)}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mv=function(){function e(t){Xe(this,e),this.token=t,this.changeListener=null}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),gv=function(){function e(t){Xe(this,e),this.t=t,this.currentUser=tv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ze(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new pv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new pv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){av("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(av("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(av("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(lv("string"==typeof n.accessToken),new vv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return lv(null===e||"string"==typeof e),new tv(e)}}]),e}(),kv=function(){function e(t,n,r,i){Xe(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=tv.FIRST_PARTY,this.p=new Map}return Ze(e,[{key:"I",value:function(){return this.g?this.g():(lv(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),_v=function(){function e(t,n,r,i){Xe(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(new kv(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),wv=Ze((function e(t){Xe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),bv=function(){function e(t){Xe(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Ze(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&av("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,av("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){av("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):av("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(lv("string"==typeof t.token),e.A=t.token,new wv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function xv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Iv=function(){function e(){Xe(this,e)}return Ze(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=xv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Tv(e,t){return e<t?-1:e>t?1:0}function Ev(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Sv(e){return e+"\0"}var Cv=function(){function e(t,n){if(Xe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new dv(fv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dv(fv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new dv(fv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dv(fv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ze(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Tv(this.nanoseconds,e.nanoseconds):Tv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Nv=function(){function e(t){Xe(this,e),this.timestamp=t}return Ze(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Cv(0,0))}},{key:"max",value:function(){return new e(new Cv(253402300799,999999999))}}]),e}(),Rv=function(){function e(t,n,r){Xe(this,e),void 0===n?n=0:n>t.length&&cv(),void 0===r?r=t.length-n:r>t.length-n&&cv(),this.segments=t,this.offset=n,this.len=r}return Ze(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Av=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new dv(fv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,on(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Rv),Pv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dv=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Pv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new dv(fv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new dv(fv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new dv(fv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new dv(fv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Rv),Ov=function(){function e(t){Xe(this,e),this.path=t}return Ze(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Av.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Av.fromString(t))}},{key:"fromName",value:function(t){return new e(Av.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Av.emptyPath())}},{key:"comparator",value:function(e,t){return Av.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Av(t.slice()))}}]),e}(),Lv=Ze((function e(t,n,r,i){Xe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Mv(e){return e.fields.find((function(e){return 2===e.kind}))}function Fv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Lv.UNKNOWN_ID=-1;var Uv=Ze((function e(t,n){Xe(this,e),this.fieldPath=t,this.kind=n}));var jv=function(){function e(t,n){Xe(this,e),this.sequenceNumber=t,this.offset=n}return Ze(e,null,[{key:"empty",value:function(){return new e(0,Bv.min())}}]),e}();function Vv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Nv.fromTimestamp(1e9===r?new Cv(n+1,0):new Cv(n,r));return new Bv(i,Ov.empty(),t)}function qv(e){return new Bv(e.readTime,e.key,-1)}var Bv=function(){function e(t,n,r){Xe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ze(e,null,[{key:"min",value:function(){return new e(Nv.min(),Ov.empty(),-1)}},{key:"max",value:function(){return new e(Nv.max(),Ov.empty(),-1)}}]),e}();function zv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ov.comparator(e.documentKey,t.documentKey))?n:Tv(e.largestBatchId,t.largestBatchId)}var Wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kv=function(){function e(){Xe(this,e),this.onCommittedListeners=[]}return Ze(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Hv(e){return Gv.apply(this,arguments)}function Gv(){return Gv=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fv.FAILED_PRECONDITION&&t.message===Wv){e.next=2;break}throw t;case 2:av("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}var Qv=function(){function e(t){var n=this;Xe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ze(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=et(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Yv=function(){function e(t,n){var r=this;Xe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new pv,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Jv(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=ry(e.target.error);r.P.reject(new Jv(t,n))}}return Ze(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(av("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ey(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Jv(n,t)}}}]),e}(),$v=function(){function e(t,n,r){Xe(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(It())&&ov("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ze(e,[{key:"O",value:function(){var e=sn(rn().mark((function e(t){var n=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return av("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Jv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new dv(fv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new dv(fv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Jv(t,n))},i.onupgradeneeded=function(e){av("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){av("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=sn(rn().mark((function e(t,n,r,i){var a,o,u,s,c=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=rn().mark((function e(){var n,u,s,l;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Yv.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Qv.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,av("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return av("SimpleDb","Removing database:",e),ty(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!At())return!1;if(e.N())return!0;var t=It(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/React-OLX-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xv=function(){function e(t){Xe(this,e),this.q=t,this.U=!1,this.K=null}return Ze(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return ty(this.q.delete())}}]),e}(),Jv=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,fv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ze(n)}(dv);function Zv(e){return"IndexedDbTransactionError"===e.name}var ey=function(){function e(t){Xe(this,e),this.store=t}return Ze(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(av("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(av("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ty(n)}},{key:"add",value:function(e){return av("SimpleDb","ADD",this.store.name,e,e),ty(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ty(this.store.get(e)).next((function(n){return void 0===n&&(n=null),av("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return av("SimpleDb","DELETE",this.store.name,e),ty(this.store.delete(e))}},{key:"count",value:function(){return av("SimpleDb","COUNT",this.store.name),ty(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Qv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Qv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){av("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Qv((function(n,r){t.onerror=function(e){var t=ry(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Qv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xv(i),o=t(i.primaryKey,i.value,a);if(o instanceof Qv){var u=o.catch((function(e){return a.done(),Qv.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Qv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ty(e){return new Qv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ry(e.target.error);n(t)}}))}var ny=!1;function ry(e){var t=$v.D(It());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new dv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ny||(ny=!0,setTimeout((function(){throw r}),0)),r}}return e}var iy=function(){function e(t,n){Xe(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Ze(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;av("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=av,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Zv(e.t4)){e.next=17;break}av("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Hv(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ay=function(){function e(t,n){Xe(this,e),this.localStore=t,this.persistence=n}return Ze(e,[{key:"st",value:function(){var e=sn(rn().mark((function e(){var t,n=this,r=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Qv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return av("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return av("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=qv(t);zv(r,n)>0&&(n=r)})),new Bv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),oy=function(){function e(t,n){var r=this;Xe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Ze(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();oy.at=-1;var uy=Ze((function e(t,n,r,i,a,o,u,s){Xe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),sy=function(){function e(t,n){Xe(this,e),this.projectId=t,this.database=n||"(default)"}return Ze(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function cy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ly(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fy(e){return null==e}function dy(e){return 0===e&&1/e==-1/0}function py(e){return"number"==typeof e&&Number.isInteger(e)&&!dy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var vy=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ze(n)}(ut(Error));var yy=function(e){function t(e){Xe(this,t),this.binaryString=e}return Ze(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Tv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new vy("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();yy.EMPTY_BYTE_STRING=new yy("");var my=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gy(e){if(lv(!!e),"string"==typeof e){var t=0,n=my.exec(e);if(lv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ky(e.seconds),nanos:ky(e.nanos)}}function ky(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _y(e){return"string"==typeof e?yy.fromBase64String(e):yy.fromUint8Array(e)}function wy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function by(e){var t=e.mapValue.fields.__previous_value__;return wy(t)?by(t):t}function xy(e){var t=gy(e.mapValue.fields.__local_write_time__.timestampValue);return new Cv(t.seconds,t.nanos)}var Iy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ty={nullValue:"NULL_VALUE"};function Ey(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wy(e)?4:Vy(e)?9007199254740991:10:cv()}function Sy(e,t){if(e===t)return!0;var n=Ey(e);if(n!==Ey(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xy(e).isEqual(xy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=gy(e.timestampValue),r=gy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _y(e.bytesValue).isEqual(_y(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ky(e.geoPointValue.latitude)===ky(t.geoPointValue.latitude)&&ky(e.geoPointValue.longitude)===ky(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ky(e.integerValue)===ky(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ky(e.doubleValue),r=ky(t.doubleValue);return n===r?dy(n)===dy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ev(e.arrayValue.values||[],t.arrayValue.values||[],Sy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(cy(n)!==cy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sy(n[i],r[i])))return!1;return!0}(e,t);default:return cv()}}function Cy(e,t){return void 0!==(e.values||[]).find((function(e){return Sy(e,t)}))}function Ny(e,t){if(e===t)return 0;var n=Ey(e),r=Ey(t);if(n!==r)return Tv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ky(e.integerValue||e.doubleValue),r=ky(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ry(e.timestampValue,t.timestampValue);case 4:return Ry(xy(e),xy(t));case 5:return Tv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=_y(e),r=_y(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Tv(n[i],r[i]);if(0!==a)return a}return Tv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Tv(ky(e.latitude),ky(t.latitude));return 0!==n?n:Tv(ky(e.longitude),ky(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ny(n[i],r[i]);if(a)return a}return Tv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Iy.mapValue&&t===Iy.mapValue)return 0;if(e===Iy.mapValue)return 1;if(t===Iy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Tv(r[o],a[o]);if(0!==u)return u;var s=Ny(n[r[o]],i[a[o]]);if(0!==s)return s}return Tv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cv()}}function Ry(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Tv(e,t);var n=gy(e),r=gy(t),i=Tv(n.seconds,r.seconds);return 0!==i?i:Tv(n.nanos,r.nanos)}function Ay(e){return Py(e)}function Py(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=gy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_y(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ov.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=et(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Py(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=et(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Py(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cv();var t,n}function Dy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Oy(e){return!!e&&"integerValue"in e}function Ly(e){return!!e&&"arrayValue"in e}function My(e){return!!e&&"nullValue"in e}function Fy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uy(e){return!!e&&"mapValue"in e}function jy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ly(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=jy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=jy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Vy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function qy(e){return"nullValue"in e?Ty:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Dy(sy.empty(),Ov.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:cv()}function By(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Dy(sy.empty(),Ov.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Iy:cv()}function zy(e,t){var n=Ny(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wy(e,t){var n=Ny(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ky=Ze((function e(t,n){Xe(this,e),this.position=t,this.inclusive=n}));function Hy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ov.comparator(Ov.fromName(o.referenceValue),n.key):Ny(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Gy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Sy(e.position[n],t.position[n]))return!1;return!0}var Qy=Ze((function e(){Xe(this,e)})),Yy=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ny(t,this.value)):null!==t&&Ey(this.value)===Ey(t)&&this.matchesComparison(Ny(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new am(e,t,r):"array-contains"===t?new cm(e,r):"in"===t?new lm(e,r):"not-in"===t?new hm(e,r):"array-contains-any"===t?new fm(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new om(e,n):new um(e,n)}}]),n}(Qy),$y=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return Ze(n,[{key:"matches",value:function(e){return Xy(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=et(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Qy);function Xy(e){return"and"===e.op}function Jy(e){return"or"===e.op}function Zy(e){return em(e)&&Xy(e)}function em(e){var t,n=et(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof $y)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function tm(e){if(e instanceof Yy)return e.field.canonicalString()+e.op.toString()+Ay(e.value);if(Zy(e))return e.filters.map((function(e){return tm(e)})).join(",");var t=e.filters.map((function(e){return tm(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function nm(e,t){return e instanceof Yy?function(e,t){return t instanceof Yy&&e.op===t.op&&e.field.isEqual(t.field)&&Sy(e.value,t.value)}(e,t):e instanceof $y?function(e,t){return t instanceof $y&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&nm(n,t.filters[r])}),!0)}(e,t):void cv()}function rm(e,t){var n=e.filters.concat(t);return $y.create(n,e.op)}function im(e){return e instanceof Yy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ay(e.value))}(e):e instanceof $y?function(e){return e.op.toString()+" {"+e.getFilters().map(im).join(" ,")+"}"}(e):"Filter"}var am=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this,e,r,i)).key=Ov.fromName(i.referenceValue),a}return Ze(n,[{key:"matches",value:function(e){var t=Ov.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Yy),om=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,"in",r)).keys=sm("in",r),i}return Ze(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yy),um=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,"not-in",r)).keys=sm("not-in",r),i}return Ze(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yy);function sm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ov.fromName(e.referenceValue)}))}var cm=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"array-contains",r)}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ly(t)&&Cy(t.arrayValue,this.value)}}]),n}(Yy),lm=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"in",r)}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Cy(this.value.arrayValue,t)}}]),n}(Yy),hm=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"not-in",r)}return Ze(n,[{key:"matches",value:function(e){if(Cy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Cy(this.value.arrayValue,t)}}]),n}(Yy),fm=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,"array-contains-any",r)}return Ze(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Cy(t.value.arrayValue,e)}))}}]),n}(Yy),dm=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Xe(this,e),this.field=t,this.dir=n}));function pm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vm=function(){function e(t,n){Xe(this,e),this.comparator=t,this.root=n||mm.EMPTY}return Ze(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ym(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ym(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ym(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ym(this.root,e,this.comparator,!0)}}]),e}(),ym=function(){function e(t,n,r,i){Xe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ze(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),mm=function(){function e(t,n,r,i,a){Xe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ze(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw cv();if(this.right.isRed())throw cv();var e=this.left.check();if(e!==this.right.check())throw cv();return e+(this.isRed()?0:1)}}]),e}();mm.EMPTY=null,mm.RED=!0,mm.BLACK=!1,mm.EMPTY=new(function(){function e(){Xe(this,e),this.size=0}return Ze(e,[{key:"key",get:function(){throw cv()}},{key:"value",get:function(){throw cv()}},{key:"color",get:function(){throw cv()}},{key:"left",get:function(){throw cv()}},{key:"right",get:function(){throw cv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var gm=function(){function e(t){Xe(this,e),this.comparator=t,this.data=new vm(this.comparator)}return Ze(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new km(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new km(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),km=function(){function e(t){Xe(this,e),this.iter=t}return Ze(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _m(e){return e.hasNext()?e.getNext():void 0}var wm=function(){function e(t){Xe(this,e),this.fields=t,t.sort(Dv.comparator)}return Ze(e,[{key:"unionWith",value:function(t){var n,r=new gm(Dv.comparator),i=et(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=et(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=et(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ev(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),bm=function(){function e(t){Xe(this,e),this.value=t}return Ze(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Uy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jy(t)}},{key:"setAll",value:function(e){var t=this,n=Dv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=jy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Uy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Sy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Uy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ly(t,(function(t,n){return e[t]=n}));var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(jy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xm(e){var t=[];return ly(e.fields,(function(e,n){var r=new Dv([e]);if(Uy(n)){var i=xm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=et(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new wm(t)}var Im=function(){function e(t,n,r,i,a,o,u){Xe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ze(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Nv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bm.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bm.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Nv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Nv.min(),Nv.min(),Nv.min(),bm.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Nv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Nv.min(),Nv.min(),bm.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Nv.min(),Nv.min(),bm.empty(),2)}}]),e}(),Tm=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Xe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function Em(e){return new Tm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Sm(e){var t=hv(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return tm(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),fy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ay(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ay(e)})).join(",")),t._t=n}return t._t}function Cm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!pm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!nm(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gy(e.startAt,t.startAt)&&Gy(e.endAt,t.endAt)}function Nm(e){return Ov.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Rm(e,t){return e.filters.filter((function(e){return e instanceof Yy&&e.field.isEqual(t)}))}function Am(e,t,n){var r,i=Ty,a=!0,o=et(Rm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ty,c=!0;switch(u.op){case"<":case"<=":s=qy(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Ty}zy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];zy({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Pm(e,t,n){var r,i=Iy,a=!0,o=et(Rm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Iy,c=!0;switch(u.op){case">=":case">":s=By(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Iy}Wy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Wy({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Dm=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Xe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this.gt=null,this.startAt,this.endAt}));function Om(e,t,n,r,i,a,o,u){return new Dm(e,t,n,r,i,a,o,u)}function Lm(e){return new Dm(e)}function Mm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Um(e){var t,n=et(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function jm(e){return null!==e.collectionGroup}function Vm(e){var t=hv(e);if(null===t.wt){t.wt=[];var n=Um(t),r=Fm(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new dm(n)),t.wt.push(new dm(Dv.keyField(),"asc"));else{var i,a=!1,o=et(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new dm(Dv.keyField(),s))}}}return t.wt}function qm(e){var t=hv(e);if(!t.gt)if("F"===t.limitType)t.gt=Em(t.path,t.collectionGroup,Vm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=et(Vm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new dm(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ky(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ky(t.startAt.position,t.startAt.inclusive):null;t.gt=Em(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.gt}function Bm(e,t){t.getFirstInequalityField(),Um(e);var n=e.filters.concat([t]);return new Dm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zm(e,t,n){return new Dm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wm(e,t){return Cm(qm(e),qm(t))&&e.limitType===t.limitType}function Km(e){return"".concat(Sm(qm(e)),"|lt:").concat(e.limitType)}function Hm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return im(e)})).join(", "),"]")),fy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ay(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ay(e)})).join(",")),"Target(".concat(t,")")}(qm(e)),"; limitType=").concat(e.limitType,")")}function Gm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ov.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=et(Vm(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=et(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Hy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vm(e),t))&&!(e.endAt&&!function(e,t,n){var r=Hy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vm(e),t))}(e,t)}function Qm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ym(e){return function(t,n){var r,i=!1,a=et(Vm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=$m(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function $m(e,t,n){var r=e.field.isKeyField()?Ov.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ny(r,i):cv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cv()}}function Xm(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dy(t)?"-0":t}}function Jm(e){return{integerValue:""+e}}function Zm(e,t){return py(t)?Jm(t):Xm(e,t)}var eg=Ze((function e(){Xe(this,e),this._=void 0}));function tg(e,t,n){return e instanceof ig?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ag?og(e,t):e instanceof ug?sg(e,t):function(e,t){var n=rg(e,t),r=lg(n)+lg(e.It);return Oy(n)&&Oy(e.It)?Jm(r):Xm(e.Tt,r)}(e,t)}function ng(e,t,n){return e instanceof ag?og(e,t):e instanceof ug?sg(e,t):n}function rg(e,t){return e instanceof cg?Oy(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ig=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n)}(eg),ag=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).elements=e,r}return Ze(n)}(eg);function og(e,t){var n,r=hg(t),i=et(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Sy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ug=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).elements=e,r}return Ze(n)}(eg);function sg(e,t){var n,r=hg(t),i=et(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Sy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cg=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return Ze(n)}(eg);function lg(e){return ky(e.integerValue||e.doubleValue)}function hg(e){return Ly(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fg=Ze((function e(t,n){Xe(this,e),this.field=t,this.transform=n}));var dg=Ze((function e(t,n){Xe(this,e),this.version=t,this.transformResults=n})),pg=function(){function e(t,n){Xe(this,e),this.updateTime=t,this.exists=n}return Ze(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function vg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var yg=Ze((function e(){Xe(this,e)}));function mg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ng(e.key,pg.none()):new bg(e.key,e.data,pg.none());var n,r=e.data,i=bm.empty(),a=new gm(Dv.comparator),o=et(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new xg(e.key,i,new wm(a.toArray()),pg.none())}function gg(e,t,n){e instanceof bg?function(e,t,n){var r=e.value.clone(),i=Tg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xg?function(e,t,n){if(vg(e.precondition,t)){var r=Tg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ig(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function kg(e,t,n,r){return e instanceof bg?function(e,t,n,r){if(!vg(e.precondition,t))return n;var i=e.value.clone(),a=Eg(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xg?function(e,t,n,r){if(!vg(e.precondition,t))return n;var i=Eg(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ig(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return vg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _g(e,t){var n,r=null,i=et(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=rg(a.transform,o||null);null!=u&&(null===r&&(r=bm.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function wg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ev(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ag&&t instanceof ag||e instanceof ug&&t instanceof ug?Ev(e.elements,t.elements,Sy):e instanceof cg&&t instanceof cg?Sy(e.It,t.It):e instanceof ig&&t instanceof ig}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var bg=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Xe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(yg),xg=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Xe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ze(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(yg);function Ig(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Tg(e,t,n){var r=new Map;lv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ng(o,u,n[i]))}return r}function Eg(e,t,n){var r,i=new Map,a=et(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,tg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sg,Cg,Ng=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(yg),Rg=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(yg),Ag=Ze((function e(t){Xe(this,e),this.count=t}));function Pg(e){switch(e){default:return cv();case fv.CANCELLED:case fv.UNKNOWN:case fv.DEADLINE_EXCEEDED:case fv.RESOURCE_EXHAUSTED:case fv.INTERNAL:case fv.UNAVAILABLE:case fv.UNAUTHENTICATED:return!1;case fv.INVALID_ARGUMENT:case fv.NOT_FOUND:case fv.ALREADY_EXISTS:case fv.PERMISSION_DENIED:case fv.FAILED_PRECONDITION:case fv.ABORTED:case fv.OUT_OF_RANGE:case fv.UNIMPLEMENTED:case fv.DATA_LOSS:return!0}}function Dg(e){if(void 0===e)return ov("GRPC error has no .code"),fv.UNKNOWN;switch(e){case Sg.OK:return fv.OK;case Sg.CANCELLED:return fv.CANCELLED;case Sg.UNKNOWN:return fv.UNKNOWN;case Sg.DEADLINE_EXCEEDED:return fv.DEADLINE_EXCEEDED;case Sg.RESOURCE_EXHAUSTED:return fv.RESOURCE_EXHAUSTED;case Sg.INTERNAL:return fv.INTERNAL;case Sg.UNAVAILABLE:return fv.UNAVAILABLE;case Sg.UNAUTHENTICATED:return fv.UNAUTHENTICATED;case Sg.INVALID_ARGUMENT:return fv.INVALID_ARGUMENT;case Sg.NOT_FOUND:return fv.NOT_FOUND;case Sg.ALREADY_EXISTS:return fv.ALREADY_EXISTS;case Sg.PERMISSION_DENIED:return fv.PERMISSION_DENIED;case Sg.FAILED_PRECONDITION:return fv.FAILED_PRECONDITION;case Sg.ABORTED:return fv.ABORTED;case Sg.OUT_OF_RANGE:return fv.OUT_OF_RANGE;case Sg.UNIMPLEMENTED:return fv.UNIMPLEMENTED;case Sg.DATA_LOSS:return fv.DATA_LOSS;default:return cv()}}(Cg=Sg||(Sg={}))[Cg.OK=0]="OK",Cg[Cg.CANCELLED=1]="CANCELLED",Cg[Cg.UNKNOWN=2]="UNKNOWN",Cg[Cg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cg[Cg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cg[Cg.NOT_FOUND=5]="NOT_FOUND",Cg[Cg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cg[Cg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cg[Cg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cg[Cg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cg[Cg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cg[Cg.ABORTED=10]="ABORTED",Cg[Cg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cg[Cg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cg[Cg.INTERNAL=13]="INTERNAL",Cg[Cg.UNAVAILABLE=14]="UNAVAILABLE",Cg[Cg.DATA_LOSS=15]="DATA_LOSS";var Og=function(){function e(t,n){Xe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ze(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ly(this.inner,(function(t,n){var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return hy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Lg=new vm(Ov.comparator);function Mg(){return Lg}var Fg=new vm(Ov.comparator);function Ug(){for(var e=Fg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function jg(e){var t=Fg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Vg(){return Bg()}function qg(){return Bg()}function Bg(){return new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var zg=new vm(Ov.comparator),Wg=new gm(Ov.comparator);function Kg(){for(var e=Wg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hg=new gm(Tv);function Gg(){return Hg}var Qg=function(){function e(t,n,r,i,a){Xe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ze(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Yg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Nv.min(),i,Gg(),Mg(),Kg())}}]),e}(),Yg=function(){function e(t,n,r,i,a){Xe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ze(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Kg(),Kg(),Kg())}}]),e}(),$g=Ze((function e(t,n,r,i){Xe(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),Xg=Ze((function e(t,n){Xe(this,e),this.targetId=t,this.Rt=n})),Jg=Ze((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Xe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Zg=function(){function e(){Xe(this,e),this.Pt=0,this.vt=nk(),this.bt=yy.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return Ze(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=Kg(),t=Kg(),n=Kg();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cv()}})),new Yg(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=nk()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),ek=function(){function e(t){Xe(this,e),this.Lt=t,this.qt=new Map,this.Ut=Mg(),this.Kt=tk(),this.Gt=new gm(Tv)}return Ze(e,[{key:"Qt",value:function(e){var t,n=et(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(u){n.e(u)}finally{n.f()}var i,a=et(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:cv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(Nm(i))if(0===n){var a=new Ov(i.path);this.zt(t,a,Im.newNoDocument(a,Nv.min()))}else lv(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Nm(a.target)){var o=new Ov(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,Im.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=Kg();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Qg(e,n,this.Gt,this.Ut,r);return this.Ut=Mg(),this.Kt=tk(),this.Gt=new gm(Tv),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new Zg,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new gm(Tv),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||av("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new Zg),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function tk(){return new vm(Ov.comparator)}function nk(){return new vm(Ov.comparator)}var rk={asc:"ASCENDING",desc:"DESCENDING"},ik={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ak={and:"AND",or:"OR"},ok=Ze((function e(t,n){Xe(this,e),this.databaseId=t,this.yt=n}));function uk(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sk(e,t){return e.yt?t.toBase64():t.toUint8Array()}function ck(e,t){return uk(e,t.toTimestamp())}function lk(e){return lv(!!e),Nv.fromTimestamp(function(e){var t=gy(e);return new Cv(t.seconds,t.nanos)}(e))}function hk(e,t){return function(e){return new Av(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function fk(e){var t=Av.fromString(e);return lv(Lk(t)),t}function dk(e,t){return hk(e.databaseId,t.path)}function pk(e,t){var n=fk(t);if(n.get(1)!==e.databaseId.projectId)throw new dv(fv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dv(fv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ov(gk(n))}function vk(e,t){return hk(e.databaseId,t)}function yk(e){var t=fk(e);return 4===t.length?Av.emptyPath():gk(t)}function mk(e){return new Av(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gk(e){return lv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kk(e,t,n){return{name:dk(e,t),fields:n.value.mapValue.fields}}function _k(e,t,n){var r=pk(e,t.name),i=lk(t.updateTime),a=t.createTime?lk(t.createTime):Nv.min(),o=new bm({mapValue:{fields:t.fields}}),u=Im.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function wk(e,t){return"found"in t?function(e,t){lv(!!t.found),t.found.name,t.found.updateTime;var n=pk(e,t.found.name),r=lk(t.found.updateTime),i=t.found.createTime?lk(t.found.createTime):Nv.min(),a=new bm({mapValue:{fields:t.found.fields}});return Im.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){lv(!!t.missing),lv(!!t.readTime);var n=pk(e,t.missing),r=lk(t.readTime);return Im.newNoDocument(n,r)}(e,t):cv()}function bk(e,t){var n;if(t instanceof bg)n={update:kk(e,t.key,t.value)};else if(t instanceof Ng)n={delete:dk(e,t.key)};else if(t instanceof xg)n={update:kk(e,t.key,t.data),updateMask:Ok(t.fieldMask)};else{if(!(t instanceof Rg))return cv();n={verify:dk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof ig)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ag)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ug)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cg)return{fieldPath:t.field.canonicalString(),increment:n.It};throw cv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ck(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cv()}(e,t.precondition)),n}function xk(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?pg.updateTime(lk(e.updateTime)):void 0!==e.exists?pg.exists(e.exists):pg.none()}(t.currentDocument):pg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)lv("REQUEST_TIME"===t.setToServerValue),n=new ig;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ag(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ug(i)}else"increment"in t?n=new cg(e,t.increment):cv();var a=Dv.fromServerFormat(t.fieldPath);return new fg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=pk(e,t.update.name),a=new bm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new wm(t.map((function(e){return Dv.fromServerFormat(e)})))}(t.updateMask);return new xg(i,a,o,n,r)}return new bg(i,a,n,r)}if(t.delete){var u=pk(e,t.delete);return new Ng(u,n)}if(t.verify){var s=pk(e,t.verify);return new Rg(s,n)}return cv()}function Ik(e,t){return{documents:[vk(e,t.path)]}}function Tk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=vk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Dk($y.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ak(e.field),direction:Ck(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.yt||fy(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ek(e){var t=yk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Sk(e);return t instanceof $y&&Zy(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new dm(Pk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return fy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ky(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ky(n,t)}(n.endAt)),Om(t,i,u,o,s,"F",c,l)}function Sk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Pk(e.unaryFilter.field);return Yy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Pk(e.unaryFilter.field);return Yy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pk(e.unaryFilter.field);return Yy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pk(e.unaryFilter.field);return Yy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cv()}}(e):void 0!==e.fieldFilter?function(e){return Yy.create(Pk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return $y.create(e.compositeFilter.filters.map((function(e){return Sk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return cv()}}(e.compositeFilter.op))}(e):cv()}function Ck(e){return rk[e]}function Nk(e){return ik[e]}function Rk(e){return ak[e]}function Ak(e){return{fieldPath:e.canonicalString()}}function Pk(e){return Dv.fromServerFormat(e.fieldPath)}function Dk(e){return e instanceof Yy?function(e){if("=="===e.op){if(Fy(e.value))return{unaryFilter:{field:Ak(e.field),op:"IS_NAN"}};if(My(e.value))return{unaryFilter:{field:Ak(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fy(e.value))return{unaryFilter:{field:Ak(e.field),op:"IS_NOT_NAN"}};if(My(e.value))return{unaryFilter:{field:Ak(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ak(e.field),op:Nk(e.op),value:e.value}}}(e):e instanceof $y?function(e){var t=e.getFilters().map((function(e){return Dk(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Rk(e.op),filters:t}}}(e):cv()}function Ok(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Lk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Mk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Uk(t)),t=Fk(e.get(n),t);return Uk(t)}function Fk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Uk(e){return e+"\x01\x01"}function jk(e){var t=e.length;if(lv(t>=2),2===t)return lv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Av.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cv()}a=o+2}return new Av(r)}var Vk=["userId","batchId"];function qk(e,t){return[e,Mk(t)]}function Bk(e,t,n){return[e,Mk(t),n]}var zk={},Wk=["prefixPath","collectionGroup","readTime","documentId"],Kk=["prefixPath","collectionGroup","documentId"],Hk=["collectionGroup","readTime","prefixPath","documentId"],Gk=["canonicalId","targetId"],Qk=["targetId","path"],Yk=["path","targetId"],$k=["collectionId","parent"],Xk=["indexId","uid"],Jk=["uid","sequenceNumber"],Zk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e_=["indexId","uid","orderedDocumentKey"],t_=["userId","collectionPath","documentId"],n_=["userId","collectionPath","largestBatchId"],r_=["userId","collectionGroup","largestBatchId"],i_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),a_=[].concat(on(i_),["documentOverlays"]),o_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],u_=o_,s_=[].concat(u_,["indexConfiguration","indexState","indexEntries"]),c_=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return Ze(n)}(Kv);function l_(e,t){var n=hv(e);return $v.M(n.re,t)}var h_=function(){function e(t,n,r,i){Xe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ze(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&gg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=et(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=kg(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=et(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=kg(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=qg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=mg(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Nv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Kg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ev(this.mutations,e.mutations,(function(e,t){return wg(e,t)}))&&Ev(this.baseMutations,e.baseMutations,(function(e,t){return wg(e,t)}))}}]),e}(),f_=function(){function e(t,n,r,i){Xe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ze(e,null,[{key:"from",value:function(t,n,r){lv(t.mutations.length===r.length);for(var i=zg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),d_=function(){function e(t,n){Xe(this,e),this.largestBatchId=t,this.mutation=n}return Ze(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),p_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Nv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Nv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yy.EMPTY_BYTE_STRING;Xe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ze(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),v_=Ze((function e(t){Xe(this,e),this.oe=t}));function y_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:m_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:dk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:uk(e,t.version.toTimestamp()),createTime:uk(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:g_(t.version)};else{if(!t.isUnknownDocument())return cv();r.unknownDocument={path:n.path.toArray(),version:g_(t.version)}}return r}function m_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function g_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function k_(e){var t=new Cv(e.seconds,e.nanoseconds);return Nv.fromTimestamp(t)}function __(e,t){for(var n=(t.baseMutations||[]).map((function(t){return xk(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return xk(e.oe,t)})),u=Cv.fromMillis(t.localWriteTimeMs);return new h_(t.batchId,u,n,o)}function w_(e){var t,n,r=k_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?k_(e.lastLimboFreeSnapshotVersion):Nv.min();return void 0!==e.query.documents?(lv(1===(n=e.query).documents.length),t=qm(Lm(yk(n.documents[0])))):t=function(e){return qm(Ek(e))}(e.query),new p_(t,e.targetId,0,e.lastListenSequenceNumber,r,i,yy.fromBase64String(e.resumeToken))}function b_(e,t){var n,r=g_(t.snapshotVersion),i=g_(t.lastLimboFreeSnapshotVersion);n=Nm(t.target)?Ik(e.oe,t.target):Tk(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function x_(e){var t=Ek({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zm(t,t.limit,"L"):t}function I_(e,t){return new d_(t.largestBatchId,xk(e.oe,t.overlayMutation))}function T_(e,t){var n=t.path.lastSegment();return[e,Mk(t.path.popLast()),n]}function E_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:g_(r.readTime),documentKey:Mk(r.documentKey.path),largestBatchId:r.largestBatchId}}var S_=function(){function e(){Xe(this,e)}return Ze(e,[{key:"getBundleMetadata",value:function(e,t){return C_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:k_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return C_(e).put({bundleId:(n=t).id,createTime:g_(lk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return N_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:x_(t.bundledQuery),readTime:k_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return N_(e).put(function(e){return{name:e.name,readTime:g_(lk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function C_(e){return l_(e,"bundles")}function N_(e){return l_(e,"namedQueries")}var R_=function(){function e(t,n){Xe(this,e),this.Tt=t,this.userId=n}return Ze(e,[{key:"getOverlay",value:function(e,t){var n=this;return A_(e).get(T_(this.userId,t)).next((function(e){return e?I_(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vg();return Qv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new d_(t,a);i.push(r.ce(e,o))})),Qv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Mk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(A_(e).Y("collectionPathOverlayIndex",i))})),Qv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Vg(),a=Mk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return A_(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=et(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=I_(r.Tt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Vg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return A_(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=I_(a.Tt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return A_(e).put(function(e,t,n){var r=s(T_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:bk(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function A_(e){return l_(e,"documentOverlays")}var P_=function(){function e(){Xe(this,e)}return Ze(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(ky(e.integerValue));else if("doubleValue"in e){var n=ky(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),dy(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(_y(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?Vy(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):cv()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),Ov.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function D_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function O_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=D_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}P_.Ee=new P_;var L_=function(){function e(){Xe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ze(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=et(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=et(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=O_(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=O_(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),M_=function(){function e(t){Xe(this,e),this.Le=t}return Ze(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),F_=function(){function e(t){Xe(this,e),this.Le=t}return Ze(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),U_=function(){function e(){Xe(this,e),this.Le=new L_,this.qe=new M_(this.Le),this.Ue=new F_(this.Le)}return Ze(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),j_=function(){function e(t,n,r,i){Xe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ze(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function V_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=q_(e.arrayValue,t.arrayValue))?n:0!==(n=q_(e.directionalValue,t.directionalValue))?n:Ov.comparator(e.documentKey,t.documentKey)}function q_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var B_=function(){function e(t){Xe(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=et(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ze(e,[{key:"We",value:function(e){lv(e.collectionGroup===this.collectionId);var t=Mv(e);if(void 0!==t&&!this.He(t))return!1;for(var n=Fv(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=et(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function z_(e){var t,n;if(lv(e instanceof Yy||e instanceof $y),e instanceof Yy){if(e instanceof lm){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Yy.create(e.field,"==",t)})))||[];return $y.create(r,"or")}return e}var i=e.filters.map((function(e){return z_(e)}));return $y.create(i,e.op)}function W_(e){if(0===e.getFilters().length)return[];var t=Q_(z_(e));return lv(G_(t)),K_(t)||H_(t)?[t]:t.getFilters()}function K_(e){return e instanceof Yy}function H_(e){return e instanceof $y&&Zy(e)}function G_(e){return K_(e)||H_(e)||function(e){if(e instanceof $y&&Jy(e)){var t,n=et(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!K_(r)&&!H_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Q_(e){if(lv(e instanceof Yy||e instanceof $y),e instanceof Yy)return e;if(1===e.filters.length)return Q_(e.filters[0]);var t=e.filters.map((function(e){return Q_(e)})),n=$y.create(t,e.op);return G_(n=X_(n))?n:(lv(n instanceof $y),lv(Xy(n)),lv(n.filters.length>1),n.filters.reduce((function(e,t){return Y_(e,t)})))}function Y_(e,t){var n;return lv(e instanceof Yy||e instanceof $y),lv(t instanceof Yy||t instanceof $y),n=e instanceof Yy?t instanceof Yy?function(e,t){return $y.create([e,t],"and")}(e,t):$_(e,t):t instanceof Yy?$_(t,e):function(e,t){if(lv(e.filters.length>0&&t.filters.length>0),Xy(e)&&Xy(t))return rm(e,t.getFilters());var n=Jy(e)?e:t,r=Jy(e)?t:e,i=n.filters.map((function(e){return Y_(e,r)}));return $y.create(i,"or")}(e,t),X_(n)}function $_(e,t){if(Xy(t))return rm(t,e.getFilters());var n=t.filters.map((function(t){return Y_(e,t)}));return $y.create(n,"or")}function X_(e){if(lv(e instanceof Yy||e instanceof $y),e instanceof Yy)return e;var t=e.getFilters();if(1===t.length)return X_(t[0]);if(em(e))return e;var n=t.map((function(e){return X_(e)})),r=[];return n.forEach((function(t){t instanceof Yy?r.push(t):t instanceof $y&&(t.op===e.op?r.push.apply(r,on(t.filters)):r.push(t))})),1===r.length?r[0]:$y.create(r,e.op)}var J_=function(){function e(){Xe(this,e),this.Ze=new Z_}return Ze(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),Qv.resolve()}},{key:"getCollectionParents",value:function(e,t){return Qv.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Qv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Qv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Qv.resolve(null)}},{key:"getIndexType",value:function(e,t){return Qv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Qv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Qv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Qv.resolve(Bv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Qv.resolve(Bv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Qv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Qv.resolve()}}]),e}(),Z_=function(){function e(){Xe(this,e),this.index={}}return Ze(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gm(Av.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new gm(Av.comparator)).toArray()}}]),e}(),ew=new Uint8Array(0),tw=function(){function e(t,n){Xe(this,e),this.user=t,this.databaseId=n,this.Xe=new Z_,this.tn=new Og((function(e){return Sm(e)}),(function(e,t){return Cm(e,t)})),this.uid=t.uid||""}return Ze(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Mk(i)};return nw(e).put(a)}return Qv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Sv(t),""],!1,!0);return nw(e).W(r).next((function(e){var r,i=et(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(jk(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=iw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=aw(e);return a.next((function(e){o.put(E_(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=iw(e),r=aw(e),i=rw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=rw(e),i=!0,a=new Map;return Qv.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Kg(),o=[];return Qv.forEach(a,(function(i,a){var u;av("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Sm(t)));var s=function(e,t){var n=Mv(t);if(void 0===n)return null;var r,i=et(Rm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=et(Fv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=et(Rm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=et(Fv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Am(e,o.fieldPath,e.startAt):Pm(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ky(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=et(Fv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Pm(e,o.fieldPath,e.endAt):Am(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ky(r,i)}(a,i),f=n.sn(i,a,l),d=n.sn(i,a,h),p=n.rn(i,a,c),v=n.on(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return Qv.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Ov.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Qv.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:W_($y.create(e.filters,"and")).map((function(t){return Em(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(){var s=t?u.un(t[f/c]):ew,h=u.cn(e,s,n[f%c],r),d=u.an(e,s,i[f%c],a),p=o.map((function(t){return u.cn(e,s,t,!0)}));l.push.apply(l,on(u.createRange(h,d,p)))},f=0;f<s;++f)h();return l}},{key:"cn",value:function(e,t,n,r){var i=new j_(e,Ov.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new j_(e,Ov.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new B_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=et(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return Qv.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new gm(Dv.comparator),r=!1,i=et(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=et(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var s,c=et(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new U_,i=et(Fv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ke(a.kind);P_.Ee.ae(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new U_;return P_.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new U_;return P_.Ee.ae(Dy(this.databaseId,t),n.Ke(function(e){var t=Fv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new U_);var i,a=0,o=et(Fv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=et(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.fn(t,s.fieldPath)&&Ly(c))r=this.dn(r,s,c);else{var f=h.Ke(s.kind);P_.Ee.ae(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=on(e),a=[],o=et(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=et(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new U_;h.seed(l.Be()),P_.Ee.ae(s,h.Ke(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Yy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=iw(e),i=aw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Qv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new jv(t.sequenceNumber,new Bv(k_(t.readTime),new Ov(jk(t.documentKey)),t.largestBatchId)):jv.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Uv(Dv.fromServerFormat(n),r)}));return new Lv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Tv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=iw(e),a=aw(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Qv.forEach(t,(function(t){return a.put(E_(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Qv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Qv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Qv.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?Qv.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return rw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return rw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=rw(e),i=new gm(V_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new j_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new gm(V_),r=this.hn(t,e);if(null==r)return n;var i=Mv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ly(a)){var o,u=et(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new j_(t.indexId,e.key,this.un(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new j_(t.indexId,e.key,ew,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;av("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=_m(a),s=_m(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=_m(o)):l?(i(u),u=_m(a)):(u=_m(a),s=_m(o))}}(r,i,V_,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),Qv.waitFor(o)}},{key:"wn",value:function(e){var t=1;return aw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return V_(e,t)})).filter((function(e,t,n){return!t||0!==V_(e,n[t-1])}));var r=[];r.push(e);var i,a=et(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=V_(o,e),s=V_(o,t);if(0===u)r[0]=e.Ge();else if(u>0&&s<0)r.push(o),r.push(o.Ge());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ew,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ew,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"Tn",value:function(e,t){return V_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ow)}},{key:"getMinOffset",value:function(e,t){var n=this;return Qv.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||cv()}))})).next(ow)}}]),e}();function nw(e){return l_(e,"collectionParents")}function rw(e){return l_(e,"indexEntries")}function iw(e){return l_(e,"indexConfiguration")}function aw(e){return l_(e,"indexState")}function ow(e){lv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bv(t.readTime,t.documentKey,n)}var uw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sw=function(){function e(t,n,r){Xe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ze(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function cw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){lv(1===u)})));var c,l=[],h=et(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Bk(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return Qv.waitFor(a).next((function(){return l}))}function lw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cv();t=e.noDocument}return JSON.stringify(t).length}sw.DEFAULT_COLLECTION_PERCENTILE=10,sw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sw.DEFAULT=new sw(41943040,sw.DEFAULT_COLLECTION_PERCENTILE,sw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sw.DISABLED=new sw(-1,0,0);var hw=function(){function e(t,n,r,i){Xe(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return Ze(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dw(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=pw(e),o=dw(e);return o.add({}).next((function(u){lv("number"==typeof u);var s,c=new h_(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return bk(e.oe,t)})),i=n.mutations.map((function(t){return bk(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),h=[],f=new gm((function(e,t){return Tv(e.canonicalString(),t.canonicalString())})),d=et(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Bk(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,zk))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[u]=c.keys()})),Qv.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return dw(e).get(t).next((function(e){return e?(lv(e.userId===n.userId),__(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?Qv.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return dw(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(lv(t.batchId>=r),a=__(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dw(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dw(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return __(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=qk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return pw(e).X({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],h=u[2],f=jk(l);if(c===n.userId&&t.path.isEqual(f))return dw(e).get(h).next((function(e){if(!e)throw cv();lv(e.userId===n.userId),a.push(__(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gm(Tv),i=[];return t.forEach((function(t){var a=qk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=pw(e).X({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],h=jk(c);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),Qv.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=qk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new gm(Tv);return pw(e).X({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],h=o[2],f=jk(l);c===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.Rn(e,u)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(dw(e).get(t).next((function(e){if(null===e)throw cv();lv(e.userId===n.userId),r.push(__(n.Tt,e))})))})),Qv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return cw(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),Qv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Qv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return pw(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=jk(e[1]);i.push(a)}else r.done()})).next((function(){lv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return fw(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return vw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return lv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function fw(e,t,n){var r=qk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return pw(e).X({range:a,Z:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function dw(e){return l_(e,"mutations")}function pw(e){return l_(e,"documentMutations")}function vw(e){return l_(e,"mutationQueues")}var yw=function(){function e(t){Xe(this,e),this.bn=t}return Ze(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),mw=function(){function e(t,n){Xe(this,e),this.referenceDelegate=t,this.Tt=n}return Ze(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new yw(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return Nv.fromTimestamp(new Cv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return gw(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return lv(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return gw(e).X((function(o,u){var s=w_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Qv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return gw(e).X((function(e,n){var r=w_(n);t(r)}))}},{key:"Dn",value:function(e){return kw(e).get("targetGlobalKey").next((function(e){return lv(null!==e),e}))}},{key:"Cn",value:function(e,t){return kw(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return gw(e).put(b_(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Sm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gw(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=w_(n);Cm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=_w(e);return t.forEach((function(t){var o=Mk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Qv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_w(e);return Qv.forEach(t,(function(t){var a=Mk(t.path);return Qv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_w(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_w(e),i=Kg();return r.X({range:n,Z:!0},(function(e,t,n){var r=jk(e[1]),a=new Ov(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Mk(t.path),r=IDBKeyRange.bound([n],[Sv(n)],!1,!0),i=0;return _w(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return gw(e).get(t).next((function(e){return e?w_(e):null}))}}]),e}();function gw(e){return l_(e,"targets")}function kw(e){return l_(e,"targetGlobal")}function _w(e){return l_(e,"targetDocuments")}function ww(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Tv(r,o);return 0===c?Tv(i,u):c}var bw=function(){function e(t){Xe(this,e),this.kn=t,this.buffer=new gm(ww),this.$n=0}return Ze(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ww(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),xw=function(){function e(t,n,r){Xe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return Ze(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;av("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Zv(e.t0)){e.next=12;break}av("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Hv(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Iw=function(){function e(t,n){Xe(this,e),this.Ln=t,this.params=n}return Ze(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Qv.resolve(oy.at);var r=new bw(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(av("LruGarbageCollector","Garbage collection skipped; disabled"),Qv.resolve(uw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(av("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),uw):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(av("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),iv()<=dn.DEBUG&&av("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Qv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Tw=function(){function e(t,n){Xe(this,e),this.db=t,this.garbageCollector=function(e,t){return new Iw(e,t)}(this,n)}return Ze(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ew(e,n)}},{key:"removeReference",value:function(e,t,n){return Ew(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ew(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return vw(e).tt((function(r){return fw(e,r,t).next((function(e){return e&&(n=!0),Qv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,u){if(u<=t){var s=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Nv.min()),_w(e).delete([0,Mk(o.path)])}))}));i.push(s)}})).next((function(){return Qv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ew(e,t)}},{key:"Qn",value:function(e,t){var n,r=_w(e),i=oy.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==oy.at&&t(new Ov(jk(n)),i),i=c,n=u):i=oy.at})).next((function(){i!==oy.at&&t(new Ov(jk(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ew(e,t){return _w(e).put(function(e,t){return{targetId:0,path:Mk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Sw=function(){function e(){Xe(this,e),this.changes=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ze(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Im.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Qv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Cw=function(){function e(t){Xe(this,e),this.Tt=t}return Ze(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Pw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Pw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],m_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Im.newInvalidDocument(t);return Pw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dw(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:Im.newInvalidDocument(t)};return Pw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dw(t))},(function(e,i){r={document:n.Wn(t,i),size:lw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Mg();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=Mg(),i=new vm(Ov.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,lw(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return Qv.resolve();var r=new gm(Lw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Dw(r.first()),Dw(r.last())),a=r.getIterator(),o=a.getNext();return Pw(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ov.fromSegments([].concat(on(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Lw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Dw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),m_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pw(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Mg(),o=et(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Wn(Ov.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Gm(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Mg(),o=Ow(t,n),u=Ow(t,Bv.max());return Pw(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Wn(Ov.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Rw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Aw(e).get("remoteDocumentGlobalKey").next((function(e){return lv(!!e),e}))}},{key:"zn",value:function(e,t){return Aw(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=_k(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ov.fromSegments(t.noDocument.path),i=k_(t.noDocument.readTime);n=Im.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return cv();var a=Ov.fromSegments(t.unknownDocument.path),o=k_(t.unknownDocument.version);n=Im.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Cv(e[0],e[1]);return Nv.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(Nv.min()))return n}return Im.newInvalidDocument(e)}}]),e}();function Nw(e){return new Cw(e)}var Rw=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ze(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new gm((function(e,t){return Tv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=y_(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=lw(s);r+=c-u.size,n.push(t.Xn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=y_(t.Xn.Tt,o.convertToNoDocument(Nv.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),Qv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Sw);function Aw(e){return l_(e,"remoteDocumentGlobal")}function Pw(e){return l_(e,"remoteDocumentsV14")}function Dw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ow(e,t){var n=t.documentKey.path.toArray();return[e,m_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Lw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Tv(n[a],r[a]))return i;return(i=Tv(n.length,r.length))||((i=Tv(n[n.length-2],r[r.length-2]))||Tv(n[n.length-1],r[r.length-1]))}var Mw=Ze((function e(t,n){Xe(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Fw=function(){function e(t,n,r,i){Xe(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ze(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&kg(r.mutation,e,wm.empty(),Cv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Kg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kg(),i=Vg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ug();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Vg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Kg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Mg(),a=Bg(),o=Bg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof xg)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),kg(o.mutation,t,o.mutation.getFieldMask(),Cv.now())):a.set(t.key,wm.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Mw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Bg(),i=new vm((function(e,t){return e-t})),a=Kg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=et(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||wm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Kg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=qg();c.forEach((function(e){if(!a.has(e)){var n=mg(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Qv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ov.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Qv.resolve(Vg()),u=-1,s=a;return o.next((function(t){return Qv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Qv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Kg())})).next((function(e){return{batchId:u,changes:jg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ov(t)).next((function(e){var t=Ug();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ug();return this.indexManager.getCollectionParents(e,i).next((function(o){return Qv.forEach(o,(function(o){var u=function(e,t){return new Dm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Im.newInvalidDocument(r)))}));var n=Ug();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&kg(a.mutation,i,wm.empty(),Cv.now()),Gm(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Uw=function(){function e(t){Xe(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return Ze(e,[{key:"getBundleMetadata",value:function(e,t){return Qv.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:lk(n.createTime)}),Qv.resolve()}},{key:"getNamedQuery",value:function(e,t){return Qv.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:x_(e.bundledQuery),readTime:lk(e.readTime)}}(t)),Qv.resolve()}}]),e}(),jw=function(){function e(){Xe(this,e),this.overlays=new vm(Ov.comparator),this.ss=new Map}return Ze(e,[{key:"getOverlay",value:function(e,t){return Qv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vg();return Qv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),Qv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),Qv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Vg(),i=t.length+1,a=new Ov(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Qv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new vm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Vg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Vg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Qv.resolve(s)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new d_(t,n));var a=this.ss.get(t);void 0===a&&(a=Kg(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),Vw=function(){function e(){Xe(this,e),this.rs=new gm(qw.os),this.us=new gm(qw.cs)}return Ze(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new qw(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new qw(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new Ov(new Av([])),r=new qw(n,e),i=new qw(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new Ov(new Av([])),n=new qw(t,e),r=new qw(t,e+1),i=Kg();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new qw(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),qw=function(){function e(t,n){Xe(this,e),this.key=t,this.gs=n}return Ze(e,null,[{key:"os",value:function(e,t){return Ov.comparator(e.key,t.key)||Tv(e.gs,t.gs)}},{key:"cs",value:function(e,t){return Tv(e.gs,t.gs)||Ov.comparator(e.key,t.key)}}]),e}(),Bw=function(){function e(t,n){Xe(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new gm(qw.os)}return Ze(e,[{key:"checkEmpty",value:function(e){return Qv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new h_(i,t,n,r);this.mutationQueue.push(a);var o,u=et(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ps=this.ps.add(new qw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Qv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Qv.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return Qv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Qv.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return Qv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new qw(t,0),i=new qw(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),Qv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gm(Tv);return t.forEach((function(e){var t=new qw(e,0),i=new qw(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),Qv.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ov.isDocumentKey(i)||(i=i.child(""));var a=new qw(new Ov(i),0),o=new gm(Tv);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),Qv.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;lv(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return Qv.forEach(t.mutations,(function(i){var a=new qw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new qw(t,0),r=this.ps.firstAfterOrEqual(n);return Qv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Qv.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),zw=function(){function e(t){Xe(this,e),this.Rs=t,this.docs=new vm(Ov.comparator),this.size=0}return Ze(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Qv.resolve(n?n.document.mutableCopy():Im.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Mg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Im.newInvalidDocument(e))})),Qv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Mg(),a=t.path,o=new Ov(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||zv(qv(l),n)<=0||(r.has(l.key)||Gm(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Qv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){cv()}},{key:"Ps",value:function(e,t){return Qv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ww(this)}},{key:"getSize",value:function(e){return Qv.resolve(this.size)}}]),e}(),Ww=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).Xn=e,r}return Ze(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),Qv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Sw),Kw=function(){function e(t){Xe(this,e),this.persistence=t,this.vs=new Og((function(e){return Sm(e)}),Cm),this.lastRemoteSnapshotVersion=Nv.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Vw,this.targetCount=0,this.Ss=yw.Vn()}return Ze(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),Qv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Qv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Qv.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),Qv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Qv.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new yw(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,Qv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),Qv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Qv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Qv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Qv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return Qv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),Qv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Qv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),Qv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return Qv.resolve(n)}},{key:"containsKey",value:function(e,t){return Qv.resolve(this.Vs.containsKey(t))}}]),e}(),Hw=function(){function e(t,n){var r=this;Xe(this,e),this.Ds={},this.overlays={},this.Cs=new oy(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Kw(this),this.indexManager=new J_,this.remoteDocumentCache=new zw((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new v_(n),this.$s=new Uw(this.Tt)}return Ze(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new jw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Bw(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;av("MemoryPersistence","Starting transaction:",e);var i=new Gw(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return Qv.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Gw=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ze(n)}(Kv),Qw=function(){function e(t){Xe(this,e),this.persistence=t,this.Bs=new Vw,this.Ls=null}return Ze(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw cv()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),Qv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),Qv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),Qv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qv.forEach(this.Us,(function(r){var i=Ov.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,Nv.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return Qv.or([function(){return Qv.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),Yw=function(){function e(t){Xe(this,e),this.Tt=t}return Ze(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new Yv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vk,{unique:!0}),e.createObjectStore("documentMutations")}(e),$w(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Qv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),$w(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vk,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Qv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:t_});t.createIndex("collectionPathOverlayIndex",n_,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",r_,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Wk});t.createIndex("documentKeyIndex",Kk),t.createIndex("collectionGroupIndex",Hk)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xk}).createIndex("sequenceNumberIndex",Jk,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Zk}).createIndex("documentKeyIndex",e_,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=lw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Qv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Qv.forEach(r,(function(r){lv(r.userId===n.userId);var i=__(t.Tt,r);return cw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Av(n),o=function(e){return[0,Mk(e)]}(a);r.push(t.get(o).next((function(n){return n?Qv.resolve():function(n){return t.put({targetId:0,path:Mk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Qv.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:$k});var n=t.store("collectionParents"),r=new Z_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Mk(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new Av(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],jk(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=w_(r),a=b_(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Ov(Av.fromString(i.document.name).popFirst(5)):i.noDocument?Ov.fromSegments(i.noDocument.path):i.unknownDocument?Ov.fromSegments(i.unknownDocument.path):cv()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Qv.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=Nw(this.Tt),a=new Hw(Qw.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Kg();__(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Qv.forEach(r,(function(e,r){var o=new tv(r),u=R_.ue(n.Tt,o),s=a.getIndexManager(o),c=hw.ue(o,n.Tt,s,a.referenceDelegate);return new Fw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new c_(t,oy.at),e).next()}))}))}}]),e}();function $w(e){e.createObjectStore("targetDocuments",{keyPath:Qk}).createIndex("documentTargetsIndex",Yk,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gk,{unique:!0}),e.createObjectStore("targetGlobal")}var Xw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jw=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Xe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=u,this.Zs=c,this.Xs=l,this.ti=h,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new dv(fv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tw(this,i),this.oi=n+"main",this.Tt=new v_(s),this.ui=new $v(this.oi,this.ti,new Yw(this.Tt)),this.Ns=new mw(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Nw(this.Tt),this.$s=new S_,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&ov("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ze(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new dv(fv.FAILED_PRECONDITION,Xw);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new oy(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=sn(rn().mark((function n(r){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=sn(rn().mark((function t(n){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return eb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if(Zv(t))return av("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return av("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return Zw(e).get("owner").next((function(e){return Qv.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return eb(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i,a=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=l_(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Qv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=et(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?Qv.resolve(!0):Zw(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new dv(fv.FAILED_PRECONDITION,Xw);return!1}}return!(!t.networkEnabled||!t.inForeground)||eb(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&av("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=sn(rn().mark((function e(){var t=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new c_(e,oy.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return eb(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return hw.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new tw(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return R_.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;av("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ti)?s_:14===i?u_:13===i?o_:12===i?a_:11===i?i_:void cv();return this.ui.runTransaction(e,o,u,(function(i){return a=new c_(i,r.Cs?r.Cs.next():oy.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw ov("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new dv(fv.FAILED_PRECONDITION,Wv);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return Zw(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new dv(fv.FAILED_PRECONDITION,Xw)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zw(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=Zw(e);return n.get("owner").next((function(e){return t.yi(e)?(av("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Qv.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ov("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;!Et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return av("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ov("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(ch){ov("Failed to set zombie client id.",ch)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(ch){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return $v.C()}}]),e}();function Zw(e){return l_(e,"owner")}function eb(e){return l_(e,"clientMetadata")}function tb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var nb=function(){function e(t,n,r,i){Xe(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return Ze(e,null,[{key:"Ni",value:function(t,n){var r,i=Kg(),a=Kg(),o=et(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),rb=function(){function e(){Xe(this,e),this.ki=!1}return Ze(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(Mm(t))return Qv.resolve(null);var r=qm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=zm(t,null,"F"),r=qm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Kg.apply(void 0,on(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,zm(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Mm(t)||r.isEqual(Nv.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(iv()<=dn.DEBUG&&av("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hm(t)),i.qi(e,o,t,Vv(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new gm(Ym(e));return t.forEach((function(t,r){Gm(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return iv()<=dn.DEBUG&&av("QueryEngine","Using full collection scan to execute query:",Hm(t)),this.$i.getDocumentsMatchingQuery(e,t,Bv.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ib=function(){function e(t,n,r,i){Xe(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new vm(Tv),this.Gi=new Og((function(e){return Sm(e)}),Cm),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return Ze(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fw(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function ab(e,t,n,r){return new ib(e,t,n,r)}function ob(e,t){return ub.apply(this,arguments)}function ub(){return ub=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Kg(),s=et(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=et(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=et(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=et(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function sb(e,t){var n=hv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Qv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);lv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Kg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function cb(e){var t=hv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function lb(e,t){var n=hv(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(yy.EMPTY_BYTE_STRING,Nv.min()).withLastLimboFreeSnapshotVersion(Nv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var u=Mg(),s=Kg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hb(e,a,t.documentUpdates).next((function(e){u=e.Hi,s=e.Ji}))),!r.isEqual(Nv.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Qv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ki=i,e}))}function hb(e,t,n){var r=Kg(),i=Kg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Mg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Nv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):av("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function fb(e,t){var n=hv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function db(e,t){var n=hv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,Qv.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new p_(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function pb(e,t,n){return vb.apply(this,arguments)}function vb(){return vb=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=hv(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Zv(e.t1)){e.next=12;break}throw e.t1;case 12:av("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),vb.apply(this,arguments)}function yb(e,t,n){var r=hv(e),i=Nv.min(),a=Kg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=hv(e),i=r.Gi.get(n);return void 0!==i?Qv.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,qm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:Nv.min(),n?a:Kg())})).next((function(e){return kb(r,Qm(t),e),{documents:e,Yi:a}}))}))}function mb(e,t){var n=hv(e),r=hv(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function gb(e,t){var n=hv(e),r=n.Qi.get(t)||Nv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,Vv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return kb(n,t,e),e}))}function kb(e,t,n){var r=e.Qi.get(t)||Nv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function _b(e,t,n,r){return wb.apply(this,arguments)}function wb(){return wb=sn(rn().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=hv(t),o=Kg(),u=Mg(),s=et(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Zi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,db(a,function(e){return qm(Lm(Av.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return hb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function bb(e,t){return xb.apply(this,arguments)}function xb(){return xb=sn(rn().mark((function e(t,n){var r,i,a,o=arguments;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Kg(),e.next=3,db(t,qm(x_(n.bundledQuery)));case 3:return i=e.sent,a=hv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=lk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(yy.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function Ib(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Eb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Sb=function(){function e(t,n,r,i){Xe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ze(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new dv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ov("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Cb=function(){function e(t,n,r){Xe(this,e),this.targetId=t,this.state=n,this.error=r}return Ze(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dv(i.error.code,i.error.message))),a?new e(t,i.state,r):(ov("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Nb=function(){function e(t,n){Xe(this,e),this.clientId=t,this.activeTargetIds=n}return Ze(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gg(),o=0;i&&o<r.activeTargetIds.length;++o)i=py(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ov("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Rb=function(){function e(t,n){Xe(this,e),this.clientId=t,this.onlineState=n}return Ze(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ov("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Ab=function(){function e(){Xe(this,e),this.activeTargetIds=Gg()}return Ze(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Pb=function(){function e(t,n,r,i,a){Xe(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new vm(Tv),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Ib(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new Ab),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return Ze(e,[{key:"start",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=et(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ib(this.persistenceKey,i)))&&(o=Nb.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(u=this.storage.getItem(this.gr))&&(s=this.Ir(u))&&this.Tr(s),c=et(this.hr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.cr(h)}catch(d){c.e(d)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Eb(this.persistenceKey,e));if(n){var r=Cb.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Eb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return av("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){av("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){av("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(av("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void ov("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(sn(rn().mark((function e(){var r,i,a,o,u,s,c;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(u));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}s=function(e){var t=oy.at;if(null!=e)try{var n=JSON.parse(e);lv("number"==typeof n),t=n}catch(e){ov("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==oy.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new Sb(this.currentUser,e,t,n),i=Tb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=Tb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=Eb(this.persistenceKey,e),i=new Cb(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return Nb.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sb.er(new tv(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return Cb.er(r,t)}},{key:"Ir",value:function(e){return Rb.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:av("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.qr(o,u).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=Gg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Db=function(){function e(){Xe(this,e),this.Ur=new Ab,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ze(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Ab,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ob=function(){function e(){Xe(this,e)}return Ze(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Lb=function(){function e(){var t=this;Xe(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return Ze(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){av("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=et(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){av("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=et(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Mb=null;function Fb(){return null===Mb?Mb=268435456+Math.round(2147483648*Math.random()):Mb++,"0x"+Mb.toString(16)}var Ub={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},jb=function(){function e(t){Xe(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return Ze(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),Vb="WebChannelConnection",qb=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ze(n,[{key:"wo",value:function(e,t,n,r){var i=Fb();return new Promise((function(a,o){var u=new Zp;u.setWithCredentials(!0),u.listenOnce(Qp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Gp.NO_ERROR:var t=u.getResponseJson();av(Vb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Gp.TIMEOUT:av(Vb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new dv(fv.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:var n=u.getStatus();if(av(Vb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(fv).indexOf(t)>=0?t:fv.UNKNOWN}(s.status);o(new dv(c,s.message))}else o(new dv(fv.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new dv(fv.UNAVAILABLE,"Connection failed."));break;default:cv()}}finally{av(Vb,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);av(Vb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Fb(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Kp(),o=Hp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Xp({})),this._o(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");av(Vb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,h=!1,f=new jb({Yr:function(t){h?av(Vb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(av(Vb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),av(Vb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Jp.EventType.OPEN,(function(){h||av(Vb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Jp.EventType.CLOSE,(function(){h||(h=!0,av(Vb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.oo())})),d(c,Jp.EventType.ERROR,(function(t){h||(h=!0,uv(Vb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.oo(new dv(fv.UNAVAILABLE,"The operation could not be completed")))})),d(c,Jp.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];lv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){av(Vb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Sg[e];if(void 0!==t)return Dg(t)}(u),l=o.message;void 0===s&&(s=fv.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),h=!0,f.oo(new dv(s,l)),c.close()}else av(Vb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.uo(i)}})),d(o,Yp.STAT_EVENT,(function(t){t.stat===$p.PROXY?av(Vb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$p.NOPROXY&&av(Vb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){f.ro()}),0),f}}]),n}(function(){function e(t){Xe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ze(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=Fb(),o=this.fo(e,t);av("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this._o(u,r,i),this.wo(e,o,u,n).then((function(t){return av("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw uv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+nv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=Ub[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function Bb(){return"undefined"!=typeof window?window:null}function zb(){return"undefined"!=typeof document?document:null}function Wb(e){return new ok(e,!0)}var Kb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Xe(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return Ze(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&av("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),Hb=function(){function e(t,n,r,i,a,o,u,s){Xe(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Kb(t,n)}return Ze(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===fv.RESOURCE_EXHAUSTED?(ov(n.toString()),ov("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===fv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new dv(fv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return av("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(av("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Gb=function(e){nt(n,e);var t=at(n);function n(e,r,i,a,o,u){var s;return Xe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s}return Ze(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(lv(void 0===t||"string"==typeof t),yy.fromBase64String(t||"")):(lv(void 0===t||t instanceof Uint8Array),yy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?fv.UNKNOWN:Dg(e.code);return new dv(t,e.message||"")}(o);n=new Jg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=pk(e,s.document.name),l=lk(s.document.updateTime),h=s.document.createTime?lk(s.document.createTime):Nv.min(),f=new bm({mapValue:{fields:s.document.fields}}),d=Im.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new $g(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=pk(e,y.document),g=y.readTime?lk(y.readTime):Nv.min(),k=Im.newNoDocument(m,g),_=y.removedTargetIds||[];n=new $g([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=pk(e,w.document),x=w.removedTargetIds||[];n=new $g([],x,b,null)}else{if(!("filter"in t))return cv();t.filter;var I=t.filter;I.targetId;var T=I.count||0,E=new Ag(T),S=I.targetId;n=new Xg(S,E)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return Nv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Nv.min():t.readTime?lk(t.readTime):Nv.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=mk(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Nm(r)?{documents:Ik(e,r)}:{query:Tk(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=sk(e,t.resumeToken):t.snapshotVersion.compareTo(Nv.min())>0&&(n.readTime=uk(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=mk(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(Hb),Qb=function(e){nt(n,e);var t=at(n);function n(e,r,i,a,o,u){var s;return Xe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s.Zo=!1,s}return Ze(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,jr(rt(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(lv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(lv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?lk(e.updateTime):lk(t);return n.isEqual(Nv.min())&&(n=lk(t)),new dg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=lk(e.commitTime);return this.listener.eu(n,t)}return lv(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=mk(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return bk(t.Tt,e)}))};this.qo(n)}}]),n}(Hb),Yb=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o;return Xe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return Ze(n,[{key:"ru",value:function(){if(this.iu)throw new dv(fv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dv(fv.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.mo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new dv(fv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return Ze((function e(){Xe(this,e)}))}());var $b=function(){function e(t,n){Xe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return Ze(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(ov(t),this.cu=!1):av("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Xb=Ze((function e(t,n,r,i,a){var o=this;Xe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=sx(o),!e.t0){e.next=5;break}return av("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=hv(t)).mu.add(4),e.next=4,ex(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,Jb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new $b(r,i)}));function Jb(e){return Zb.apply(this,arguments)}function Zb(){return Zb=sn(rn().mark((function e(t){var n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sx(t)){e.next=18;break}n=et(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zb.apply(this,arguments)}function ex(e){return tx.apply(this,arguments)}function tx(){return tx=sn(rn().mark((function e(t){var n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=et(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),tx.apply(this,arguments)}function nx(e,t){var n=hv(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),ux(n)?ox(n):Fx(n).Mo()&&ix(n,t))}function rx(e,t){var n=hv(e),r=Fx(n);n.wu.delete(t),r.Mo()&&ax(n,t),0===n.wu.size&&(r.Mo()?r.Bo():sx(n)&&n.pu.set("Unknown"))}function ix(e,t){e.Iu.Ot(t.targetId),Fx(e).Jo(t)}function ax(e,t){e.Iu.Ot(t),Fx(e).Yo(t)}function ox(e){e.Iu=new ek({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),Fx(e).start(),e.pu.au()}function ux(e){return sx(e)&&!Fx(e).$o()&&e.wu.size>0}function sx(e){return 0===hv(e).mu.size}function cx(e){e.Iu=void 0}function lx(e){return hx.apply(this,arguments)}function hx(){return hx=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){ix(t,e)}));case 1:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function fx(e,t){return dx.apply(this,arguments)}function dx(){return dx=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cx(t),ux(t)?(t.pu.fu(n),ox(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t,n){return vx.apply(this,arguments)}function vx(){return vx=sn(rn().mark((function e(t,n,r){var i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof Jg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=et(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),av("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,yx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof $g?t.Iu.Qt(n):n instanceof Xg?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(Nv.min())){e.next=29;break}return e.prev=14,e.next=17,cb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(yy.EMPTY_BYTE_STRING,n.snapshotVersion)),ax(e,t);var r=new p_(n.target,t,1,n.sequenceNumber);ix(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),av("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,yx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),vx.apply(this,arguments)}function yx(e,t,n){return mx.apply(this,arguments)}function mx(){return mx=sn(rn().mark((function e(t,n,r){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,ex(t);case 5:t.pu.set("Offline"),r||(r=function(){return cb(t.localStore)}),t.asyncQueue.enqueueRetryable(sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return av("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,Jb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e,t){return t().catch((function(n){return yx(e,n,t)}))}function kx(e){return _x.apply(this,arguments)}function _x(){return _x=sn(rn().mark((function e(t){var n,r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=hv(t),r=Ux(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!wx(n)){e.next=19;break}return e.prev=3,e.next=6,fb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,bx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,yx(n,e.t0);case 17:e.next=2;break;case 19:xx(n)&&Ix(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),_x.apply(this,arguments)}function wx(e){return sx(e)&&e._u.length<10}function bx(e,t){e._u.push(t);var n=Ux(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function xx(e){return sx(e)&&!Ux(e).$o()&&e._u.length>0}function Ix(e){Ux(e).start()}function Tx(e){return Ex.apply(this,arguments)}function Ex(){return Ex=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ux(t).su();case 1:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Sx(e){return Cx.apply(this,arguments)}function Cx(){return Cx=sn(rn().mark((function e(t){var n,r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ux(t),r=et(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Nx(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=f_.from(i,n,r),e.next=3,gx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,kx(t);case 5:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Ax(e,t){return Px.apply(this,arguments)}function Px(){return Px=sn(rn().mark((function e(t,n){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ux(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pg(i=n.code)||i===fv.ABORTED){e.next=7;break}return r=t._u.shift(),Ux(t).Fo(),e.next=5,gx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:xx(t)&&Ix(t);case 5:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Dx(e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=hv(t)).asyncQueue.verifyOperationInProgress(),av("RemoteStore","RemoteStore received new credentials"),i=sx(r),r.mu.add(3),e.next=6,ex(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,Jb(r);case 12:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hv(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,Jb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,ex(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e){return e.Tu||(e.Tu=function(e,t,n){var r=hv(e);return r.ru(),new Gb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:lx.bind(null,e),no:fx.bind(null,e),Ho:px.bind(null,e)}),e.gu.push(function(){var t=sn(rn().mark((function t(n){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),ux(e)?ox(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:cx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function Ux(e){return e.Eu||(e.Eu=function(e,t,n){var r=hv(e);return r.ru(),new Qb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Tx.bind(null,e),no:Ax.bind(null,e),nu:Sx.bind(null,e),eu:Nx.bind(null,e)}),e.gu.push(function(){var t=sn(rn().mark((function t(n){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,kx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(av("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var jx=function(){function e(t,n,r,i,a){Xe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ze(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dv(fv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Vx(e,t){if(ov("AsyncQueue","".concat(t,": ").concat(e)),Zv(e))return new dv(fv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var qx=function(){function e(t){Xe(this,e),this.comparator=t?function(e,n){return t(e,n)||Ov.comparator(e.key,n.key)}:function(e,t){return Ov.comparator(e.key,t.key)},this.keyedMap=Ug(),this.sortedSet=new vm(this.comparator)}return Ze(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Bx=function(){function e(){Xe(this,e),this.Au=new vm(Ov.comparator)}return Ze(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):cv():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),zx=function(){function e(t,n,r,i,a,o,u,s,c){Xe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ze(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,qx.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Wx=Ze((function e(){Xe(this,e),this.Pu=void 0,this.listeners=[]})),Kx=Ze((function e(){Xe(this,e),this.queries=new Og((function(e){return Km(e)}),Wm),this.onlineState="Unknown",this.vu=new Set}));function Hx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=sn(rn().mark((function e(t,n){var r,i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Wx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Vx(e.t0,"Initialization of query '".concat(Hm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&Jx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Gx.apply(this,arguments)}function Qx(e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=sn(rn().mark((function e(t,n){var r,i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function $x(e,t){var n,r=hv(e),i=!1,a=et(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=et(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Pu=o}}}catch(h){a.e(h)}finally{a.f()}i&&Jx(r)}function Xx(e,t,n){var r=hv(e),i=r.queries.get(t);if(i){var a,o=et(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Jx(e){e.vu.forEach((function(e){e.next()}))}var Zx=function(){function e(t,n,r){Xe(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return Ze(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=et(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new zx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=zx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),eI=function(){function e(t,n){Xe(this,e),this.Mu=t,this.byteLength=n}return Ze(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),tI=function(){function e(t){Xe(this,e),this.Tt=t}return Ze(e,[{key:"Zi",value:function(e){return pk(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?_k(this.Tt,e.document,!1):Im.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return lk(e)}}]),e}(),nI=function(){function e(t,n,r){Xe(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rI(t)}return Ze(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=Av.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new tI(this.Tt),i=et(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Zi(a.metadata.name),s=et(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Kg()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_b(this.localStore,new tI(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=et(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,bb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function rI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var iI=Ze((function e(t){Xe(this,e),this.key=t})),aI=Ze((function e(t){Xe(this,e),this.key=t})),oI=function(){function e(t,n){Xe(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Kg(),this.mutatedKeys=Kg(),this.ju=Ym(t),this.zu=new qx(this.ju)}return Ze(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new Bx,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Gm(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Yu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.ju(h,s)>0||c&&n.ju(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:u,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cv()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],u=0===this.Qu.size&&this.current?1:0,s=u!==this.Gu;return this.Gu=u,0!==a.length||s?{snapshot:new zx(this.query,e.zu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Bx,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Kg(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new aI(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new iI(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Kg();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return zx.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),uI=Ze((function e(t,n,r){Xe(this,e),this.query=t,this.targetId=n,this.view=r})),sI=Ze((function e(t){Xe(this,e),this.key=t,this.ic=!1})),cI=function(){function e(t,n,r,i,a,o){Xe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Og((function(e){return Km(e)}),Wm),this.uc=new Map,this.cc=new Set,this.ac=new vm(Ov.comparator),this.hc=new Map,this.lc=new Vw,this.fc={},this.dc=new Map,this._c=yw.Sn(),this.onlineState="Unknown",this.wc=void 0}return Ze(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function lI(e,t){return hI.apply(this,arguments)}function hI(){return hI=sn(rn().mark((function e(t,n){var r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rT(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,db(r.localStore,qm(n));case 8:return u=e.sent,r.isPrimaryClient&&nx(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,fI(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function fI(e,t,n,r,i){return dI.apply(this,arguments)}function dI(){return dI=sn(rn().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=sn(rn().mark((function e(t,n,r,i){var a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,yb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(DI(t,n.targetId,u.tc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,yb(t.localStore,n,!0);case 3:return o=e.sent,u=new oI(n,o.Yi),s=u.Hu(o.documents),c=Yg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),DI(t,r,l.tc),h=new uI(n,r,u),e.abrupt("return",(t.oc.set(n,h),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hv(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!Wm(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,pb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rx(r.remoteStore,i.targetId),AI(r,i.targetId)})).catch(Hv);case 9:e.next=14;break;case 11:return AI(r,i.targetId),e.next=14,pb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function yI(e,t,n){return mI.apply(this,arguments)}function mI(){return mI=sn(rn().mark((function e(t,n,r){var i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=iT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=hv(e),a=Cv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Kg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Mg(),s=Kg();return i.ji.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=et(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=_g(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new xg(c.key,l,xm(l.value.mapValue),pg.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:jg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new vm(Tv)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,MI(i,a.changes);case 9:return e.next=11,kx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Vx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),mI.apply(this,arguments)}function gI(e,t){return kI.apply(this,arguments)}function kI(){return kI=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),e.prev=1,e.next=4,lb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(lv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?lv(n.ic):e.removedDocuments.size>0&&(lv(n.ic),n.ic=!1))})),e.next=8,MI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Hv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),kI.apply(this,arguments)}function _I(e,t,n){var r=hv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=hv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=et(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jx(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function wI(e,t,n){return bI.apply(this,arguments)}function bI(){return bI=sn(rn().mark((function e(t,n,r){var i,a,o,u,s,c;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=hv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new vm(Ov.comparator)).insert(o,Im.newNoDocument(o,Nv.min())),s=Kg().add(o),c=new Qg(Nv.min(),new Map,new gm(Tv),u,s),e.next=9,gI(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),LI(i),e.next=16;break;case 14:return e.next=16,pb(i.localStore,n,!1).then((function(){return AI(i,n,r)})).catch(Hv);case 16:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}function xI(e,t){return II.apply(this,arguments)}function II(){return II=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),i=n.batch.batchId,e.prev=1,e.next=4,sb(r.localStore,n);case 4:return a=e.sent,RI(r,i,null),NI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,MI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),II.apply(this,arguments)}function TI(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hv(t),e.prev=1,e.next=4,function(e,t){var n=hv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return lv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,RI(i,n,r),NI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,MI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),EI.apply(this,arguments)}function SI(e,t){return CI.apply(this,arguments)}function CI(){return CI=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sx((r=hv(t)).remoteStore)||av("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=hv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Vx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),CI.apply(this,arguments)}function NI(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function RI(e,t,n){var r=hv(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function AI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=et(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||PI(e,t)}))}function PI(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(rx(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),LI(e))}function DI(e,t,n){var r,i=et(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof iI?(e.lc.addReference(a.key,t),OI(e,a)):a instanceof aI?(av("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||PI(e,a.key)):cv()}}catch(o){i.e(o)}finally{i.f()}}function OI(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(av("SyncEngine","New document in limbo: "+n),e.cc.add(r),LI(e))}function LI(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new Ov(Av.fromString(t)),r=e._c.next();e.hc.set(r,new sI(n)),e.ac=e.ac.insert(n,r),nx(e.remoteStore,new p_(qm(Lm(n.path)),r,2,oy.at))}}function MI(e,t,n){return FI.apply(this,arguments)}function FI(){return FI=sn(rn().mark((function e(t,n,r){var i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=hv(t),a=[],o=[],u=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){u.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=nb.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.rc.Ho(a),e.next=9,function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Qv.forEach(n,(function(t){return Qv.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Qv.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Zv(e.t0)){e.next=10;break}throw e.t0;case 10:av("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=et(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ki.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}function UI(e,t){return jI.apply(this,arguments)}function jI(){return jI=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=hv(t)).currentUser.isEqual(n)){e.next=11;break}return av("SyncEngine","User change. New user:",n.toKey()),e.next=5,ob(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new dv(fv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,MI(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}function VI(e,t){var n=hv(e),r=n.hc.get(t);if(r&&r.ic)return Kg().add(r.key);var i=Kg(),a=n.uc.get(t);if(!a)return i;var o,u=et(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.oc.get(s);i=i.unionWith(c.view.Wu)}}catch(l){u.e(l)}finally{u.f()}return i}function qI(e,t){return BI.apply(this,arguments)}function BI(){return BI=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),e.next=3,yb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&DI(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function zI(e,t){return WI.apply(this,arguments)}function WI(){return WI=sn(rn().mark((function e(t,n){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),e.abrupt("return",gb(r.localStore,n).then((function(e){return MI(r,e)})));case 2:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function KI(e,t,n,r){return HI.apply(this,arguments)}function HI(){return HI=sn(rn().mark((function e(t,n,r,i){var a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=hv(t),e.next=3,function(e,t){var n=hv(e),r=hv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Qv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,kx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(RI(a,n,i||null),NI(a,n),function(e,t){hv(hv(e).mutationQueue).Pn(t)}(a.localStore,n)):cv();case 11:return e.next=13,MI(a,o);case 13:e.next=16;break;case 15:av("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function GI(e,t){return QI.apply(this,arguments)}function QI(){return QI=sn(rn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rT(r=hv(t)),iT(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,YI(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,Lx(r.remoteStore,!0);case 9:o=et(a);try{for(o.s();!(u=o.n()).done;)s=u.value,nx(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return AI(r,t),pb(r.localStore,t,!0)})),rx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,YI(r,c);case 21:return function(e){var t=hv(e);t.hc.forEach((function(e,n){rx(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new vm(Ov.comparator)}(r),r.wc=!1,e.next=25,Lx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}function YI(e,t,n){return $I.apply(this,arguments)}function $I(){return $I=sn(rn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,y,m;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=hv(t),a=[],o=[],u=et(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.uc.get(c))||0===h.length){e.next=34;break}return e.next=11,db(i.localStore,qm(h[0]));case 11:l=e.sent,f=et(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.oc.get(p),e.next=20,qI(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,mb(i.localStore,c);case 36:return m=e.sent,e.next=39,db(i.localStore,m);case 39:return l=e.sent,e.next=42,fI(i,XI(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),$I.apply(this,arguments)}function XI(e){return Om(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function JI(e){var t=hv(e);return hv(hv(t.localStore).persistence).Si()}function ZI(e,t,n,r){return eT.apply(this,arguments)}function eT(){return eT=sn(rn().mark((function e(t,n,r,i){var a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=hv(t)).wc){e.next=3;break}return e.abrupt("return",void av("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,gb(a.localStore,Qm(o[0]));case 10:return u=e.sent,s=Qg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,yy.EMPTY_BYTE_STRING),e.next=14,MI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,pb(a.localStore,n,!0);case 17:return AI(a,n,i),e.abrupt("break",20);case 19:cv();case 20:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}function tT(e,t,n){return nT.apply(this,arguments)}function nT(){return nT=sn(rn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=rT(t)).wc){e.next=45;break}a=et(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.uc.has(u)){e.next=10;break}return av("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,mb(i.localStore,u);case 12:return s=e.sent,e.next=15,db(i.localStore,s);case 15:return c=e.sent,e.next=18,fI(i,XI(s),c.targetId,!1,c.resumeToken);case 18:nx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=et(r),e.prev=30,f=rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,pb(i.localStore,t,!1).then((function(){rx(i.remoteStore,t),AI(i,t)})).catch(Hv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),nT.apply(this,arguments)}function rT(e){var t=hv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=VI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wI.bind(null,t),t.rc.Ho=$x.bind(null,t.eventManager),t.rc.gc=Xx.bind(null,t.eventManager),t}function iT(e){var t=hv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=TI.bind(null,t),t}function aT(e,t,n){var r=hv(e);(function(){var e=sn(rn().mark((function e(t,n,r){var i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=hv(e),r=lk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(rI(i)),a=new nI(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,MI(t,s.Uu,void 0);case 31:return e.next=33,function(e,t){var n=hv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(uv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var oT=function(){function e(){Xe(this,e),this.synchronizeTabs=!1}return Ze(e,[{key:"initialize",value:function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Wb(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return ab(this.persistence,new rb,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new Hw(Qw.qs,this.Tt)}},{key:"Ic",value:function(e){return new Db}},{key:"terminate",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),uT=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ze(n,[{key:"initialize",value:function(){var e=sn(rn().mark((function e(t){var r=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(rt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,iT(this.Pc.syncEngine);case 6:return e.next=8,kx(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return ab(this.persistence,new rb,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new xw(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new ay(t,this.persistence);return new iy(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sw.withCacheSize(this.cacheSizeBytes):sw.DEFAULT;return new Jw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bb(),zb(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new Db}}]),n}(oT),sT=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ze(n,[{key:"initialize",value:function(){var e=sn(rn().mark((function e(t){var r,i=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(rt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof Pb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:KI.bind(null,r),Lr:ZI.bind(null,r),qr:tT.bind(null,r),Si:JI.bind(null,r),Fr:zI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GI(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=Bb();if(!Pb.C(t))throw new dv(fv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(uT),cT=function(){function e(){Xe(this,e)}return Ze(e,[{key:"initialize",value:function(){var e=sn(rn().mark((function e(t,n){var r=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return _I(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=UI.bind(null,this.syncEngine),e.next=12,Lx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Kx}},{key:"createDatastore",value:function(e){var t,n=Wb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qb(t));return function(e,t,n,r){return new Yb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return _I(o.syncEngine,e,0)},a=Lb.C()?new Lb:new Ob,new Xb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new cI(e,t,n,r,i,a);return o&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hv(t),av("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,ex(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function lT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return sn(rn().mark((function r(){var i;return rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var hT=function(){function e(t){Xe(this,e),this.observer=t,this.muted=!1}return Ze(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):ov("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),fT=function(){function e(t,n){var r=this;Xe(this,e),this.Vc=t,this.Tt=n,this.metadata=new pv,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return Ze(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=sn(rn().mark((function e(){var t,n,r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new eI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=sn(rn().mark((function e(){var t,n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=sn(rn().mark((function e(){var t,n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),dT=function(){function e(t){Xe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ze(e,[{key:"lookup",value:function(){var e=sn(rn().mark((function e(t){var n,r=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new dv(fv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),i=mk(r.Tt)+"/documents",a={documents:n.map((function(e){return dk(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=wk(r.Tt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());lv(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ng(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=sn(rn().mark((function e(){var t,n=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ov.fromPath(t);n.mutations.push(new Rg(r,n.precondition(r)))})),e.next=7,function(){var e=sn(rn().mark((function e(t,n){var r,i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hv(t),i=mk(r.Tt)+"/documents",a={writes:n.map((function(e){return bk(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cv();t=Nv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new dv(fv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nv.min())?pg.exists(!1):pg.updateTime(t):pg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nv.min()))throw new dv(fv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pg.updateTime(t)}return pg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),pT=function(){function e(t,n,r,i,a){Xe(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new Kb(this.asyncQueue,"transaction_retry")}return Ze(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(sn(rn().mark((function t(){var n,r;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new dT(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!fy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Pg(t)}return!1}}]),e}(),vT=function(){function e(t,n,r,i){var a=this;Xe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tv.UNAUTHENTICATED,this.clientId=Iv.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return av("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return av("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ze(e,[{key:"getConfiguration",value:function(){var e=sn(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new dv(fv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new pv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(sn(rn().mark((function n(){var r;return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Vx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function yT(e,t){return mT.apply(this,arguments)}function mT(){return mT=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),av("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ob(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function gT(e,t){return kT.apply(this,arguments)}function kT(){return kT=sn(rn().mark((function e(t,n){var r,i;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,_T(t);case 3:return r=e.sent,av("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Dx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Dx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),kT.apply(this,arguments)}function _T(e){return wT.apply(this,arguments)}function wT(){return wT=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return av("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,yT(t,new oT);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),wT.apply(this,arguments)}function bT(e){return xT.apply(this,arguments)}function xT(){return xT=sn(rn().mark((function e(t){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return av("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,gT(t,new cT);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),xT.apply(this,arguments)}function IT(e){return _T(e).then((function(e){return e.persistence}))}function TT(e){return _T(e).then((function(e){return e.localStore}))}function ET(e){return bT(e).then((function(e){return e.remoteStore}))}function ST(e){return bT(e).then((function(e){return e.syncEngine}))}function CT(e){return bT(e).then((function(e){return e.datastore}))}function NT(e){return RT.apply(this,arguments)}function RT(){return RT=sn(rn().mark((function e(t){var n,r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=lI.bind(null,n.syncEngine),r.onUnlisten=pI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function AT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function i(){return rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new hT({next:function(a){t.enqueueAndForget((function(){return Qx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new dv(fv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new dv(fv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Zx(Lm(n.path),a,{includeMetadataChanges:!0,$u:!0});return Hx(e,o)},i.next=3,NT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function PT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function i(){return rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new hT({next:function(n){t.enqueueAndForget((function(){return Qx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new dv(fv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zx(n,a,{includeMetadataChanges:!0,$u:!0});return Hx(e,o)},i.next=3,NT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var DT=new Map;function OT(e,t,n){if(!n)throw new dv(fv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function LT(e,t,n,r){if(!0===t&&!0===r)throw new dv(fv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function MT(e){if(!Ov.isDocumentKey(e))throw new dv(fv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function FT(e){if(Ov.isDocumentKey(e))throw new dv(fv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function UT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":cv()}function jT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dv(fv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=UT(e);throw new dv(fv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function VT(e,t){if(t<=0)throw new dv(fv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var qT=function(){function e(t){var n;if(Xe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new dv(fv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dv(fv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,LT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ze(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),BT=function(){function e(t,n,r,i){Xe(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qT({}),this._settingsFrozen=!1}return Ze(e,[{key:"app",get:function(){if(!this._app)throw new dv(fv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new dv(fv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yv;switch(e.type){case"gapi":var t=e.client;return new _v(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new dv(fv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=DT.get(e);t&&(av("ComponentProvider","Removing Datastore"),DT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function zT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=jT(e,BT))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&uv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=tv.MOCK_USER;else{o=xt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new dv(fv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tv(s)}e._authCredentials=new mv(new vv(o,u))}}var WT=function(){function e(t,n,r){Xe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ze(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new HT(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),KT=function(){function e(t,n,r){Xe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ze(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),HT=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this,e,r,Lm(i)))._path=i,a.type="collection",a}return Ze(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new WT(this.firestore,null,new Ov(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(KT);function GT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=nn(e),OT("collection","path",t),e instanceof BT){var a=Av.fromString.apply(Av,[t].concat(r));return FT(a),new HT(e,null,a)}if(!(e instanceof WT||e instanceof HT))throw new dv(fv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Av.fromString.apply(Av,[t].concat(r)));return FT(o),new HT(e.firestore,null,o)}function QT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=nn(e),1===arguments.length&&(t=Iv.R()),OT("doc","path",t),e instanceof BT){var a=Av.fromString.apply(Av,[t].concat(r));return MT(a),new WT(e,null,new Ov(a))}if(!(e instanceof WT||e instanceof HT))throw new dv(fv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Av.fromString.apply(Av,[t].concat(r)));return MT(o),new WT(e.firestore,e instanceof HT?e.converter:null,new Ov(o))}function YT(e,t){return e=nn(e),t=nn(t),(e instanceof WT||e instanceof HT)&&(t instanceof WT||t instanceof HT)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function $T(e,t){return e=nn(e),t=nn(t),e instanceof KT&&t instanceof KT&&e.firestore===t.firestore&&Wm(e._query,t._query)&&e.converter===t.converter}var XT=function(){function e(){var t=this;Xe(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Kb(this,"async_queue_retry"),this.Hc=function(){var e=zb();e&&av("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=zb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return Ze(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new pv;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=sn(rn().mark((function e(){var t=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Zv(e.t0)){e.next=12;break}throw e.t0;case 12:av("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ov("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=jx.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&cv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=sn(rn().mark((function e(){var t;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=et(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=et(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function JT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=et(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ZT=function(){function e(){Xe(this,e),this._progressObserver={},this._taskCompletionResolver=new pv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ze(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),eE=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o;return Xe(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new XT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ze(n,[{key:"_terminate",value:function(){return this._firestoreClient||nE(this),this._firestoreClient.terminate()}}]),n}(BT);function tE(e){return e._firestoreClient||nE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new uy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new vT(e._authCredentials,e._appCheckCredentials,e._queue,r)}function rE(e,t,n){var r=new pv;return e.asyncQueue.enqueue(sn(rn().mark((function i(){var a;return rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,yT(e,n);case 3:return i.next=5,gT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===fv.FAILED_PRECONDITION||e.code===fv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:uv("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function iE(e){return function(e){return e.asyncQueue.enqueue(sn(rn().mark((function t(){var n,r;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,IT(e);case 2:return n=t.sent,t.next=5,ET(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=hv(e);return t.mu.delete(0),Jb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(tE(e=jT(e,eE)))}function aE(e){return function(e){return e.asyncQueue.enqueue(sn(rn().mark((function t(){var n,r;return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,IT(e);case 2:return n=t.sent,t.next=5,ET(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=hv(t)).mu.add(0),e.next=4,ex(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(tE(e=jT(e,eE)))}function oE(e,t){var n=tE(e=jT(e,eE)),r=new ZT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new fT(e,t)}(function(e,t){if(e instanceof Uint8Array)return lT(e,t);if(e instanceof ArrayBuffer)return lT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Wb(t));e.asyncQueue.enqueueAndForget(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=aT,t.next=3,ST(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function uE(e,t){return function(e,t){return e.asyncQueue.enqueue(sn(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=hv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,TT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(tE(e=jT(e,eE)),t).then((function(t){return t?new KT(e,null,t.query):null}))}function sE(e){if(e._initialized||e._terminated)throw new dv(fv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cE=function(){function e(t){Xe(this,e),this._byteString=t}return Ze(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(yy.fromBase64String(t))}catch(t){throw new dv(fv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(yy.fromUint8Array(t))}}]),e}(),lE=function(){function e(){Xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new dv(fv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dv(n)}return Ze(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var hE=Ze((function e(t){Xe(this,e),this._methodName=t})),fE=function(){function e(t,n){if(Xe(this,e),!isFinite(t)||t<-90||t>90)throw new dv(fv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dv(fv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ze(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Tv(this._lat,e._lat)||Tv(this._long,e._long)}}]),e}(),dE=/^__.*__$/,pE=function(){function e(t,n,r){Xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ze(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new xg(e,this.data,this.fieldMask,t,this.fieldTransforms):new bg(e,this.data,t,this.fieldTransforms)}}]),e}(),vE=function(){function e(t,n,r){Xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ze(e,[{key:"toMutation",value:function(e,t){return new xg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function yE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cv()}}var mE=function(){function e(t,n,r,i,a,o){Xe(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ze(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return FE(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(yE(this.ra)&&dE.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),gE=function(){function e(t,n,r){Xe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Wb(t)}return Ze(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mE({ra:e,methodName:t,_a:n,path:Dv.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function kE(e){var t=e._freezeSettings(),n=Wb(e._databaseId);return new gE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _E(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);DE("Data must be an object, but it was:",o,r);var u,s,c=AE(r,o);if(a.merge)u=new wm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=et(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=OE(t,l.value,n);if(!o.contains(d))throw new dv(fv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));UE(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}u=new wm(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new pE(new bm(c),u,s)}var wE=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(hE);function bE(e,t,n){return new mE({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var xE=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_toFieldTransform",value:function(e){return new fg(e.path,new ig)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(hE),IE=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e)).ma=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=bE(this,e,!0),n=this.ma.map((function(e){return RE(e,t)})),r=new ag(n);return new fg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hE),TE=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e)).ma=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=bE(this,e,!0),n=this.ma.map((function(e){return RE(e,t)})),r=new ug(n);return new fg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hE),EE=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e)).ga=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=new cg(e.Tt,Zm(e.Tt,this.ga));return new fg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hE);function SE(e,t,n,r){var i=e.wa(1,t,n);DE("Data must be an object, but it was:",i,r);var a=[],o=bm.empty();ly(r,(function(e,r){var u=ME(t,e,n);r=nn(r);var s=i.ha(u);if(r instanceof wE)a.push(u);else{var c=RE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new wm(a);return new vE(o,u,i.fieldTransforms)}function CE(e,t,n,r,i,a){var o=e.wa(1,t,n),u=[OE(t,r,n)],s=[i];if(a.length%2!=0)throw new dv(fv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(OE(t,a[c])),s.push(a[c+1]);for(var l=[],h=bm.empty(),f=u.length-1;f>=0;--f)if(!UE(l,u[f])){var d=u[f],p=s[f];p=nn(p);var v=o.ha(d);if(p instanceof wE)l.push(d);else{var y=RE(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new wm(l);return new vE(h,m,o.fieldTransforms)}function NE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return RE(n,e.wa(r?4:3,t))}function RE(e,t){if(PE(e=nn(e)))return DE("Unsupported field value:",t,e),AE(e,t);if(e instanceof hE)return function(e,t){if(!yE(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=et(e);try{for(a.s();!(n=a.n()).done;){var o=RE(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=nn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zm(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Cv.fromDate(e);return{timestampValue:uk(t.Tt,n)}}if(e instanceof Cv){var r=new Cv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:uk(t.Tt,r)}}if(e instanceof fE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cE)return{bytesValue:sk(t.Tt,e._byteString)};if(e instanceof WT){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:hk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(UT(e)))}(e,t)}function AE(e,t){var n={};return hy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ly(e,(function(e,r){var i=RE(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function PE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cv||e instanceof fE||e instanceof cE||e instanceof WT||e instanceof hE)}function DE(e,t,n){if(!PE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=UT(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function OE(e,t,n){if((t=nn(t))instanceof lE)return t._internalPath;if("string"==typeof t)return ME(e,t);throw FE("Field path arguments must be of type string or ",e,!1,void 0,n)}var LE=new RegExp("[~\\*/\\[\\]]");function ME(e,t,n){if(t.search(LE)>=0)throw FE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ot(lE,on(t.split(".")))._internalPath}catch(r){throw FE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function FE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new dv(fv.INVALID_ARGUMENT,u+e+s)}function UE(e,t){return e.some((function(e){return e.isEqual(t)}))}var jE=function(){function e(t,n,r,i,a){Xe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ze(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new WT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new VE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),VE=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(){return jr(rt(n.prototype),"data",this).call(this)}}]),n}(jE);function qE(e,t){return"string"==typeof t?ME(e,t):t instanceof lE?t._internalPath:t._delegate._internalPath}function BE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new dv(fv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zE=Ze((function e(){Xe(this,e)})),WE=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n)}(zE);function KE(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof zE&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof GE})).length,n=e.filter((function(e){return e instanceof HE})).length;if(t>1||t>0&&n>0)throw new dv(fv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=et(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var HE=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ze(n,[{key:"_apply",value:function(e){var t=this._parse(e);return aS(e._query,t),new KT(e.firestore,e.converter,Bm(e._query,t))}},{key:"_parse",value:function(e){var t=kE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new dv(fv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){iS(o,a);var s,c=[],l=et(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(rS(r,e,h))}}catch(f){l.e(f)}finally{l.f()}u={arrayValue:{values:c}}}else u=rS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||iS(o,a),u=NE(n,"where",o,"in"===a||"not-in"===a);return Yy.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WE);var GE=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ze(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:$y.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=et(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;aS(r,a),r=Bm(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new KT(e.firestore,e.converter,Bm(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zE);var QE=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ze(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new dv(fv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new dv(fv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dm(t,n);return function(e,t){if(null===Fm(e)){var n=Um(e);null!==n&&oS(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new KT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Dm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(WE);var YE=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ze(n,[{key:"_apply",value:function(e){return new KT(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WE);var $E=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ze(n,[{key:"_apply",value:function(e){var t=nS(e,this.type,this._docOrFields,this._inclusive);return new KT(e.firestore,e.converter,function(e,t){return new Dm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WE);function XE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $E._create("startAt",t,!0)}function JE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $E._create("startAfter",t,!1)}var ZE=function(e){nt(n,e);var t=at(n);function n(e,r,i){var a;return Xe(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ze(n,[{key:"_apply",value:function(e){var t=nS(e,this.type,this._docOrFields,this._inclusive);return new KT(e.firestore,e.converter,function(e,t){return new Dm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WE);function eS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZE._create("endBefore",t,!1)}function tS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZE._create("endAt",t,!0)}function nS(e,t,n,r){if(n[0]=nn(n[0]),n[0]instanceof jE)return function(e,t,n,r,i){if(!r)throw new dv(fv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=et(Vm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Dy(t,r.key));else{var c=r.data.field(s.field);if(wy(c))throw new dv(fv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new dv(fv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new Ky(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=kE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new dv(fv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new dv(fv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!jm(e)&&-1!==c.indexOf("/"))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Av.fromString(c));if(!Ov.isDocumentKey(l))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Ov(l);u.push(Dy(t,h))}else{var f=NE(n,r,c);u.push(f)}}return new Ky(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function rS(e,t,n){if("string"==typeof(n=nn(n))){if(""===n)throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jm(t)&&-1!==n.indexOf("/"))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Av.fromString(n));if(!Ov.isDocumentKey(r))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Dy(e,new Ov(r))}if(n instanceof WT)return Dy(e,n._key);throw new dv(fv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(UT(n),"."))}function iS(e,t){if(!Array.isArray(e)||0===e.length)throw new dv(fv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function aS(e,t){if(t.isInequality()){var n=Um(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Fm(e);null!==i&&oS(e,r,i)}var a=function(e,t){var n,r=et(e);try{for(r.s();!(n=r.n()).done;){var i,a=et(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new dv(fv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new dv(fv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function oS(e,t,n){if(!n.isEqual(t))throw new dv(fv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var uS=function(){function e(){Xe(this,e)}return Ze(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ey(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ky(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_y(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ly(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new fE(ky(e.latitude),ky(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=by(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=gy(e);return new Cv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Av.fromString(e);lv(Lk(n));var r=new sy(n.get(1),n.get(3)),i=new Ov(n.popFirst(5));return r.isEqual(t)||ov("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function sS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var cS=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new cE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new WT(this.firestore,null,t)}}]),n}(uS);var lS=function(){function e(t,n){Xe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ze(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),hS=function(e){nt(n,e);var t=at(n);function n(e,r,i,a,o,u){var s;return Xe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ze(n,[{key:"exists",value:function(){return jr(rt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new fS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(jE),fS=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jr(rt(n.prototype),"data",this).call(this,e)}}]),n}(hS),dS=function(){function e(t,n,r,i){Xe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new lS(i.hasPendingWrites,i.fromCache),this.query=r}return Ze(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new fS(n._firestore,n._userDataWriter,r.key,r,new lS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dv(fv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new fS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new fS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:pS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function pS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cv()}}function vS(e,t){return e instanceof hS&&t instanceof hS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dS&&t instanceof dS&&e._firestore===t._firestore&&$T(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var yS=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new cE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new WT(this.firestore,null,t)}}]),n}(uS);function mS(e){e=jT(e,WT);var t=jT(e.firestore,eE),n=tE(t),r=new yS(t);return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function r(){return rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=sn(rn().mark((function e(t,n,r){var i,a;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=hv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new dv(fv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Vx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,TT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new hS(t,r,e._key,n,new lS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function gS(e){e=jT(e,KT);var t=jT(e.firestore,eE),n=tE(t),r=new yS(t);return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function r(){return rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=sn(rn().mark((function e(t,n,r){var i,a,o,u,s;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yb(t,n,!0);case 3:i=e.sent,a=new oI(n,i.Yi),o=a.Hu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Vx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,TT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new dS(t,r,e,n)}))}function kS(e,t,n){e=jT(e,WT);var r=jT(e.firestore,eE),i=sS(e.converter,t,n);return xS(r,[_E(kE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pg.none())])}function _S(e,t,n){e=jT(e,WT);for(var r=jT(e.firestore,eE),i=kE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return xS(r,[("string"==typeof(t=nn(t))||t instanceof lE?CE(i,"updateDoc",e._key,t,n,o):SE(i,"updateDoc",e._key,t)).toMutation(e._key,pg.exists(!0))])}function wS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=nn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||JT(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(JT(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof WT)l=jT(e.firestore,eE),h=Lm(e._key.path),c={next:function(t){n[s]&&n[s](IS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=jT(e,KT);l=jT(p.firestore,eE),h=p._query;var v=new yS(l);c={next:function(e){n[s]&&n[s](new dS(l,v,p,e))},error:n[s+1],complete:n[s+2]},BE(e._query)}return function(e,t,n,r){var i=new hT(r),a=new Zx(t,i,n);return e.asyncQueue.enqueueAndForget(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hx,t.next=3,NT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qx,t.next=3,NT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(tE(l),h,f,c)}function bS(e,t){return function(e,t){var n=new hT(t);return e.asyncQueue.enqueueAndForget(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){hv(e).vu.add(t),t.next()},t.next=3,NT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(sn(rn().mark((function t(){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){hv(e).vu.delete(t)},t.next=3,NT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(tE(e=jT(e,eE)),JT(t)?t:{next:t})}function xS(e,t){return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function r(){return rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=yI,r.next=3,ST(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(tE(e),t)}function IS(e,t,n){var r=n.docs.get(t._key),i=new yS(e);return new hS(e,i,t._key,r,new lS(n.hasPendingWrites,n.fromCache),t.converter)}var TS={maxAttempts:5},ES=function(){function e(t,n){Xe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kE(t)}return Ze(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=SS(e,this._firestore),i=sS(r.converter,t,n),a=_E(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,pg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=SS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=nn(t))||t instanceof lE?CE(this._dataReader,"WriteBatch.update",i._key,t,n,o):SE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,pg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=SS(e,this._firestore);return this._mutations=this._mutations.concat(new Ng(t._key,pg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new dv(fv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function SS(e,t){if((e=nn(e)).firestore!==t)throw new dv(fv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var CS=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ze(n,[{key:"get",value:function(e){var t=this,r=SS(e,this._firestore),i=new yS(this._firestore);return jr(rt(n.prototype),"get",this).call(this,e).then((function(e){return new hS(t._firestore,i,r._key,e._document,new lS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Xe(this,e),this._firestore=t,this._transaction=n,this._dataReader=kE(t)}return Ze(e,[{key:"get",value:function(e){var t=this,n=SS(e,this._firestore),r=new cS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return cv();var i=e[0];if(i.isFoundDocument())return new jE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new jE(t._firestore,r,n._key,null,n.converter);throw cv()}))}},{key:"set",value:function(e,t,n){var r=SS(e,this._firestore),i=sS(r.converter,t,n),a=_E(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=SS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=nn(t))||t instanceof lE?CE(this._dataReader,"Transaction.update",i._key,t,n,o):SE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=SS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function NS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new IE("arrayUnion",t)}function RS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){nv=e}(rr),$n(new cn("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new eE(new gv(e.getProvider("auth-internal")),new bv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dv(fv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sy(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),cr(ev,"3.9.0",e),cr(ev,"3.9.0","esm2017")}();var AS="@firebase/firestore-compat",PS="0.3.5";function DS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new dv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function OS(){if("undefined"===typeof Uint8Array)throw new dv("unimplemented","Uint8Arrays are not available in this environment.")}function LS(){if("undefined"==typeof atob)throw new dv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var MS=function(){function e(t){Xe(this,e),this._delegate=t}return Ze(e,[{key:"toBase64",value:function(){return LS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return OS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return LS(),new e(cE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return OS(),new e(cE.fromUint8Array(t))}}]),e}();function FS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=et(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var US=function(){function e(){Xe(this,e)}return Ze(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){sE(e=jT(e,eE));var n=tE(e),r=e._freezeSettings(),i=new cT;return rE(n,i,new uT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){sE(e=jT(e,eE));var t=tE(e),n=e._freezeSettings(),r=new cT;return rE(t,r,new sT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new dv(fv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new pv;return e._queue.enqueueAndForgetEvenWhileRestricted(sn(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=sn(rn().mark((function e(t){var n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($v.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,$v.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(tb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),jS=function(){function e(t,n,r){var i=this;Xe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof sy||(this._appCompat=t)}return Ze(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||uv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return iE(this._delegate)}},{key:"disableNetwork",value:function(){return aE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&LT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=SI,n.next=3,ST(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(tE(e=jT(e,eE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return bS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new dv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ZS(this,GT(this._delegate,e))}catch(t){throw KS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new WS(this,QT(this._delegate,e))}catch(t){throw KS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new $S(this,function(e,t){if(e=jT(e,BT),OT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new dv(fv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new KT(e,null,function(e){return new Dm(Av.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw KS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=jT(e,eE);var r=Object.assign(Object.assign({},TS),n);return function(e){if(e.maxAttempts<1)throw new dv(fv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new pv;return e.asyncQueue.enqueueAndForget(sn(rn().mark((function i(){var a;return rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,CT(e);case 2:a=i.sent,new pT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(tE(e),(function(n){return t(new CS(e,n))}),r)}(this._delegate,(function(n){return e(new qS(t,n))}))}},{key:"batch",value:function(){var e=this;return tE(this._delegate),new BS(new ES(this._delegate,(function(t){return xS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return oE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return uE(this._delegate,e).then((function(e){return e?new $S(t,e):null}))}}]),e}(),VS=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new MS(new cE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return WS.forKey(t,this.firestore,null)}}]),n}(uS);var qS=function(){function e(t,n){Xe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new VS(t)}return Ze(e,[{key:"get",value:function(e){var t=this,n=eC(e);return this._delegate.get(n).then((function(e){return new QS(t._firestore,new hS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=eC(e);return n?(DS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=eC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=eC(e);return this._delegate.delete(t),this}}]),e}(),BS=function(){function e(t){Xe(this,e),this._delegate=t}return Ze(e,[{key:"set",value:function(e,t,n){var r=eC(e);return n?(DS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=eC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=eC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),zS=function(){function e(t,n,r){Xe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ze(e,[{key:"fromFirestore",value:function(e,t){var n=new fS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new YS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new VS(t),n),i.set(n,a)),a}}]),e}();zS.INSTANCES=new WeakMap;var WS=function(){function e(t,n){Xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VS(t)}return Ze(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ZS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ZS(this.firestore,GT(this._delegate,e))}catch(t){throw KS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=nn(e))instanceof WT&&YT(this._delegate,e)}},{key:"set",value:function(e,t){t=DS("DocumentReference.set",t);try{return t?kS(this._delegate,e,t):kS(this._delegate,e)}catch(n){throw KS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?_S(this._delegate,e):_S.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw KS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return xS(jT(e.firestore,eE),[new Ng(e._key,pg.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HS(n),a=GS(n,(function(t){return new QS(e.firestore,new hS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return wS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?mS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jT(e,WT);var t=jT(e.firestore,eE);return AT(tE(t),e._key,{source:"server"}).then((function(n){return IS(t,e,n)}))}(this._delegate):function(e){e=jT(e,WT);var t=jT(e.firestore,eE);return AT(tE(t),e._key).then((function(n){return IS(t,e,n)}))}(this._delegate),t.then((function(e){return new QS(n.firestore,new hS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new dv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new WT(n._delegate,r,new Ov(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new WT(n._delegate,r,t))}}]),e}();function KS(e,t,n){return e.message=e.message.replace(t,n),e}function HS(e){var t,n=et(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!FS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function GS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=FS(e[0])?e[0]:FS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var QS=function(){function e(t,n){Xe(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"ref",get:function(){return new WS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}}]),e}(),YS=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cv()}(void 0!==t),t}}]),n}(QS),$S=function(){function e(t,n){Xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VS(t)}return Ze(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,KE(this._delegate,function(e,t,n){var r=t,i=qE("where",e);return HE._create(i,r,n)}(t,n,r)))}catch(i){throw KS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,KE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=qE("orderBy",e);return QE._create(n,t)}(t,n)))}catch(r){throw KS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,KE(this._delegate,function(e){return VT("limit",e),YE._create("limit",e,"F")}(t)))}catch(n){throw KS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,KE(this._delegate,function(e){return VT("limitToLast",e),YE._create("limitToLast",e,"L")}(t)))}catch(n){throw KS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,KE(this._delegate,XE.apply(void 0,arguments)))}catch(t){throw KS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,KE(this._delegate,JE.apply(void 0,arguments)))}catch(t){throw KS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,KE(this._delegate,eS.apply(void 0,arguments)))}catch(t){throw KS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,KE(this._delegate,tS.apply(void 0,arguments)))}catch(t){throw KS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return $T(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?gS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jT(e,KT);var t=jT(e.firestore,eE),n=tE(t),r=new yS(t);return PT(n,e._query,{source:"server"}).then((function(n){return new dS(t,r,e,n)}))}(this._delegate):function(e){e=jT(e,KT);var t=jT(e.firestore,eE),n=tE(t),r=new yS(t);return BE(e._query),PT(n,e._query).then((function(n){return new dS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new JS(n.firestore,new dS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HS(n),a=GS(n,(function(t){return new JS(e.firestore,new dS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return wS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),XS=function(){function e(t,n){Xe(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new YS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),JS=function(){function e(t,n){Xe(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"query",get:function(){return new $S(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new YS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new XS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new YS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}}]),e}(),ZS=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ze(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new WS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new WS(this.firestore,void 0===e?QT(this._delegate):QT(this._delegate,e))}catch(t){throw KS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=jT(e.firestore,eE),r=QT(e),i=sS(e.converter,t);return xS(n,[_E(kE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,pg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new WS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return YT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(zS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}($S);function eC(e){return jT(e,WT)}var tC=function(){function e(){Xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ot(lE,n)}return Ze(e,[{key:"isEqual",value:function(e){return(e=nn(e))instanceof lE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dv.keyField().canonicalString())}}]),e}(),nC=function(){function e(t){Xe(this,e),this._delegate=t}return Ze(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new xE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new wE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=NS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=RS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new EE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),rC={Firestore:jS,GeoPoint:fE,Timestamp:Cv,Blob:MS,Transaction:qS,WriteBatch:BS,DocumentReference:WS,DocumentSnapshot:QS,Query:$S,QueryDocumentSnapshot:YS,QuerySnapshot:JS,CollectionReference:ZS,FieldPath:tC,FieldValue:nC,setLogLevel:function(e){!function(e){rv.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new cn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},rC)))}(e,(function(e,t){return new jS(e,t,new US)})),e.registerVersion(AS,PS)}(Ur);var iC="@firebase/database",aC="0.14.4",oC="";function uC(e){oC=e}var sC=function(){function e(t){Xe(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Ze(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mt(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Lt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),cC=function(){function e(){Xe(this,e),this.cache_={},this.isInMemoryStorage=!0}return Ze(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ut(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),lC=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sC(t)}}catch(n){}return new cC},hC=lC("localStorage"),fC=lC("sessionStorage"),dC=new _n("@firebase/database"),pC=function(){var e=1;return function(){return e++}}(),vC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Gt;n.update(t);var r=n.digest();return ft.encodeByteArray(r)},yC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Mt(r):r,t+=" "}return t},mC=null,gC=!0,kC=function(e,t){ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(dC.logLevel=dn.VERBOSE,mC=dC.log.bind(dC),t&&fC.set("logging_enabled",!0)):"function"===typeof e?mC=e:(mC=null,fC.remove("logging_enabled"))},_C=function(){if(!0===gC&&(gC=!1,null===mC&&!0===fC.get("logging_enabled")&&kC(!0)),mC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=yC.apply(null,t);mC(r)}},wC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];_C.apply(void 0,[e].concat(n))}},bC=function(){var e="FIREBASE INTERNAL ERROR: "+yC.apply(void 0,arguments);dC.error(e)},xC=function(){var e="FIREBASE FATAL ERROR: ".concat(yC.apply(void 0,arguments));throw dC.error(e),new Error(e)},IC=function(){var e="FIREBASE WARNING: "+yC.apply(void 0,arguments);dC.warn(e)},TC=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},EC="[MIN_NAME]",SC="[MAX_NAME]",CC=function(e,t){if(e===t)return 0;if(e===EC||t===SC)return-1;if(t===EC||e===SC)return 1;var n=MC(e),r=MC(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},NC=function(e,t){return e===t?0:e<t?-1:1},RC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Mt(t))},AC=function e(t){if("object"!==typeof t||null===t)return Mt(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Mt(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},PC=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function DC(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var OC=function(e){ct(!TC(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var LC=new RegExp("^-?(0*)\\d{1,10}$"),MC=function(e){if(LC.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},FC=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw IC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},UC=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jC=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},VC=function(){function e(t,n){var r=this;Xe(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Ze(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){IC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),qC=function(){function e(t,n,r){var i=this;Xe(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Ze(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(_C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',IC(e)}}]),e}(),BC=function(){function e(t){Xe(this,e),this.accessToken=t}return Ze(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();BC.OWNER="owner";var zC="5",WC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KC="ac",HC="websocket",GC="long_polling",QC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Xe(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hC.get("host:"+t)||this._host}return Ze(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hC.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function YC(e,t,n){var r;if(ct("string"===typeof t,"typeof type must == string"),ct("object"===typeof n,"typeof params must == object"),t===HC)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==GC)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return DC(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var $C=function(){function e(){Xe(this,e),this.counters_={}}return Ze(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return mt(void 0,this.counters_)}}]),e}(),XC={},JC={};function ZC(e){var t=e.toString();return XC[t]||(XC[t]=new $C),XC[t]}var eN=function(){function e(t){Xe(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Ze(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&FC((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),tN="start",nN=function(){function e(t,n,r,i,a,o,u){var s=this;Xe(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wC(t),this.stats_=ZC(n),this.urlFn=function(e){return s.appCheckToken&&(e[KC]=s.appCheckToken),YC(n,GC,e)}}return Ze(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new eN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Rt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new rN((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tN)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[tN]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=zC,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[KC]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&WC.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Mt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=pt(t),r=PC(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Rt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Mt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Rt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),rN=function(){function e(t,n,r,i){if(Xe(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Rt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){_C("frame writing exception"),u.stack&&_C(u.stack),_C(u)}}}return Ze(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Rt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){_C("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_C("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),iN=null;"undefined"!==typeof MozWebSocket?iN=MozWebSocket:"undefined"!==typeof WebSocket&&(iN=WebSocket);var aN=function(){function e(t,n,r,i,a,o,u){Xe(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wC(this.connId),this.stats_=ZC(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Ze(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hC.set("previous_websocket_failure",!0);try{var r;if(Rt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(zC,"/").concat(oC,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/React-OLX-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new iN(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){hC.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Lt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ct(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Mt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=PC(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=zC,!Rt()&&"undefined"!==typeof location&&location.hostname&&WC.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[KC]=r),i&&(a.p=i),YC(e,HC,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==iN&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return hC.isInMemoryStorage||!0===hC.get("previous_websocket_failure")}}]),e}();aN.responsesRequiredToBeHealthy=2,aN.healthyTimeout=3e4;var oN=function(){function e(t){Xe(this,e),this.initTransports_(t)}return Ze(e,[{key:"initTransports_",value:function(t){var n=aN&&aN.isAvailable(),r=n&&!aN.previouslyFailed();if(t.webSocketOnly&&(n||IC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[aN];else{var i,a=this.transports_=[],o=et(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[nN,aN]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();oN.globalTransportInitialized_=!1;var uN=function(){function e(t,n,r,i,a,o,u,s,c,l){Xe(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wC("c:"+this.id+":"),this.transportManager_=new oN(n),this.log_("Connection created"),this.start_()}return Ze(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=jC((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=RC("t",e),n=RC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=RC("t",e),n=RC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=RC("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?bC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bC("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zC!==n&&IC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),jC((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jC((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),sN=function(){function e(){Xe(this,e)}return Ze(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),cN=function(){function e(t){Xe(this,e),this.allowedEvents_=t,this.listeners_={},ct(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Ze(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=on(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){ct(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),lN=function(e){nt(n,e);var t=at(n);function n(){var e;return Xe(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Tt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Ze(n,[{key:"getInitialEvent",value:function(e){return ct("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(cN),hN=32,fN=768,dN=function(){function e(t,n){if(Xe(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Ze(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function pN(){return new dN("")}function vN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function yN(e){return e.pieces_.length-e.pieceNum_}function mN(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new dN(e.pieces_,t)}function gN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function kN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function _N(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new dN(t,0)}function wN(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof dN)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new dN(n,0)}function bN(e){return e.pieceNum_>=e.pieces_.length}function xN(e,t){var n=vN(e),r=vN(t);if(null===n)return t;if(n===r)return xN(mN(e),mN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function IN(e,t){for(var n=kN(e,0),r=kN(t,0),i=0;i<n.length&&i<r.length;i++){var a=CC(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function TN(e,t){if(yN(e)!==yN(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function EN(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(yN(e)>yN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var SN=Ze((function e(t,n){Xe(this,e),this.errorPrefix_=n,this.parts_=kN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=tn(this.parts_[r]);CN(this)}));function CN(e){if(e.byteLength_>fN)throw new Error(e.errorPrefix_+"has a key path longer than "+fN+" bytes ("+e.byteLength_+").");if(e.parts_.length>hN)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hN+") or object contains a cycle "+NN(e))}function NN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var RN=function(e){nt(n,e);var t=at(n);function n(){var e,r,i;return Xe(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Ze(n,[{key:"getInitialEvent",value:function(e){return ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(cN),AN=1e3,PN=function(e){nt(n,e);var t=at(n);function n(e,r,i,a,o,u,s,c){var l;if(Xe(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=wC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=AN,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Rt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return RN.getInstance().on("visible",l.onVisible_,tt(l)),-1===e.host.indexOf("fblocal")&&lN.getInstance().on("online",l.onOnline_,tt(l)),l}return Ze(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Mt(i)),ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new bt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ct(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ft(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ft(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Mt(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):bC("Unrecognized action received from server: "+Mt(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=AN),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=sn(rn().mark((function e(){var t,r,i,a,o,u,c,l,h,f,d,p,v,y,m=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},h=function(e){ct(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=s(d,2),v=p[0],y=p[1],u?_C("getToken() completed but was canceled"):(_C("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new uN(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){IC(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&IC(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){_C("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){_C("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Vt(this.interruptReasons_)&&(this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return AC(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new dN(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){_C("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){_C("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=et(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=et(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Rt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+oC.replace(/\./g,"-")]=1,Tt()?e["framework.cordova"]=1:Ct()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=lN.getInstance().currentlyOnline();return Vt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ut(e,"w")){var n=jt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();IC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(sN);PN.nextPersistentConnectionId_=0,PN.nextConnectionId_=0;var DN,ON=function(){function e(t,n){Xe(this,e),this.name=t,this.node=n}return Ze(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),LN=function(){function e(){Xe(this,e)}return Ze(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new ON(EC,e),r=new ON(EC,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return ON.MIN}}]),e}(),MN=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"compare",value:function(e,t){return CC(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw lt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return ON.MIN}},{key:"maxPost",value:function(){return new ON(SC,DN)}},{key:"makePost",value:function(e,t){return ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new ON(e,DN)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return DN},set:function(e){DN=e}}]),n}(LN),FN=new MN,UN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Xe(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Ze(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),jN=function(){function e(t,n,r,i,a){Xe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:BN.EMPTY_NODE,this.right=null!=a?a:BN.EMPTY_NODE}return Ze(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return BN.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return BN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();jN.RED=!0,jN.BLACK=!1;var VN,qN=function(){function e(){Xe(this,e)}return Ze(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jN(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),BN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Xe(this,e),this.comparator_=t,this.root_=n}return Ze(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jN.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jN.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new UN(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new UN(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new UN(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new UN(this.root_,null,this.comparator_,!0,e)}}]),e}();function zN(e,t){return CC(e.name,t.name)}function WN(e,t){return CC(e,t)}BN.EMPTY_NODE=new qN;var KN,HN,GN,QN=function(e){return"number"===typeof e?"number:"+OC(e):"string:"+e},YN=function(e){if(e.isLeafNode()){var t=e.val();ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ut(t,".sv"),"Priority must be a string or number.")}else ct(e===VN||e.isEmpty(),"priority of unexpected type.");ct(e===VN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$N=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Xe(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),YN(this.priorityNode_)}return Ze(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return bN(t)?this:".priority"===vN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=vN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ct(".priority"!==r||1===yN(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(mN(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+QN(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?OC(this.value_):this.value_,this.lazyHash_=vC(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ct(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return ct(i>=0,"Unknown leaf type: "+n),ct(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return KN},set:function(e){KN=e}}]),e}();$N.VALUE_TYPE_ORDER=["object","boolean","number","string"];var XN,JN,ZN=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?CC(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return ON.MIN}},{key:"maxPost",value:function(){return new ON(SC,new $N("[PRIORITY-POST]",GN))}},{key:"makePost",value:function(e,t){var n=HN(e);return new ON(t,new $N("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(LN),eR=new ZN,tR=Math.log(2),nR=function(){function e(t){Xe(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/tR,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Ze(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),rR=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new jN(o,a.node,jN.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new jN(o,a.node,jN.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new jN(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,jN.BLACK):(u(h,jN.BLACK),u(h,jN.RED))}return a}(new nR(e.length));return new BN(r||t,a)},iR={},aR=function(){function e(t,n){Xe(this,e),this.indexes_=t,this.indexSet_=n}return Ze(e,[{key:"get",value:function(e){var t=jt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof BN?t:null}},{key:"hasIndex",value:function(e){return Ut(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ct(t!==FN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(ON.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?rR(i,t.getCompare()):iR;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=qt(this.indexes_,(function(e,i){var a=jt(r.indexSet_,i);if(ct(a,"Missing index implementation for "+i),e===iR){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(ON.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),rR(o,a.getCompare())}return iR}var c=n.get(t.name),l=e;return c&&(l=l.remove(new ON(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(qt(this.indexes_,(function(e){if(e===iR)return e;var r=n.get(t.name);return r?e.remove(new ON(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ct(iR&&eR,"ChildrenNode.ts has not been loaded"),XN=XN||new e({".priority":iR},{".priority":eR})}}]),e}(),oR=function(){function e(t,n,r){Xe(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&YN(this.priorityNode_),this.children_.isEmpty()&&ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Ze(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||JN}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?JN:t}},{key:"getChild",value:function(e){var t=vN(e);return null===t?this:this.getImmediateChild(t).getChild(mN(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ct(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new ON(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?JN:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=vN(e);if(null===n)return t;ct(".priority"!==vN(e)||1===yN(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mN(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(eR,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+QN(this.getPriority().val())+":"),this.forEachChild(eR,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":vC(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ON(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new ON(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new ON(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,ON.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,ON.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uR?-1:0}},{key:"withIndex",value:function(t){if(t===FN||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===FN||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(eR),r=t.getIterator(eR),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===FN?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return JN||(JN=new e(new BN(WN),null,aR.Default))}}]),e}();oR.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var uR=new(function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.call(this,new BN(WN),oR.EMPTY_NODE,aR.Default)}return Ze(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return oR.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(oR));Object.defineProperties(ON,{MIN:{value:new ON(EC,oR.EMPTY_NODE)},MAX:{value:new ON(SC,uR)}}),MN.__EMPTY_NODE=oR.EMPTY_NODE,$N.__childrenNodeConstructor=oR,VN=uR,function(e){GN=e}(uR);var sR=!0;function cR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return oR.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new $N(e,cR(t));if(e instanceof Array||!sR){var n=oR.EMPTY_NODE;return DC(e,(function(t,r){if(Ut(e,t)&&"."!==t.substring(0,1)){var i=cR(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(cR(t))}var r=[],i=!1;if(DC(e,(function(e,t){if("."!==e.substring(0,1)){var n=cR(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new ON(e,n)))}})),0===r.length)return oR.EMPTY_NODE;var a=rR(r,zN,(function(e){return e.name}),WN);if(i){var o=rR(r,eR.getCompare());return new oR(a,cR(t),new aR({".priority":o},{".priority":eR}))}return new oR(a,cR(t),aR.Default)}!function(e){HN=e}(cR);var lR=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this)).indexPath_=e,ct(!bN(e)&&".priority"!==vN(e),"Can't create PathIndex with empty path or .priority key"),r}return Ze(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?CC(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=cR(e),r=oR.EMPTY_NODE.updateChild(this.indexPath_,n);return new ON(t,r)}},{key:"maxPost",value:function(){var e=oR.EMPTY_NODE.updateChild(this.indexPath_,uR);return new ON(SC,e)}},{key:"toString",value:function(){return kN(this.indexPath_,0).join("/")}}]),n}(LN),hR=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?CC(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return ON.MIN}},{key:"maxPost",value:function(){return ON.MAX}},{key:"makePost",value:function(e,t){var n=cR(e);return new ON(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(LN),fR=new hR;function dR(e){return{type:"value",snapshotNode:e}}function pR(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function vR(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yR(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var mR=function(){function e(t){Xe(this,e),this.index_=t}return Ze(e,[{key:"updateChild",value:function(e,t,n,r,i,a){ct(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(vR(t,o)):ct(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(pR(t,n)):a.trackChildChange(yR(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(eR,(function(e,r){t.hasChild(e)||n.trackChildChange(vR(e,r))})),t.isLeafNode()||t.forEachChild(eR,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yR(t,r,i))}else n.trackChildChange(pR(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?oR.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),gR=function(){function e(t){Xe(this,e),this.indexedFilter_=new mR(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Ze(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new ON(t,n))||(n=oR.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=oR.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(oR.EMPTY_NODE);var i=this;return t.forEachChild(eR,(function(e,t){i.matches(new ON(e,t))||(r=r.updateImmediateChild(e,oR.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),kR=function(){function e(t){var n=this;Xe(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new gR(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Ze(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new ON(t,n))||(n=oR.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=oR.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=oR.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(oR.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,oR.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;ct(u.numChildren()===this.limit_,"");var s=new ON(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(yR(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(vR(t,h));var p=u.updateImmediateChild(t,oR.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pR(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(vR(c.name,c.node)),i.trackChildChange(pR(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,oR.EMPTY_NODE)):e}}]),e}(),_R=function(){function e(){Xe(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=eR}return Ze(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:EC}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:SC}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===eR}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function wR(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function bR(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function xR(e,t){var n=e.copy();return n.index_=t,n}function IR(e){var t,n={};if(e.isDefault())return n;if(e.index_===eR?t="$priority":e.index_===fR?t="$value":e.index_===FN?t="$key":(ct(e.index_ instanceof lR,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Mt(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Mt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Mt(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Mt(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Mt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function TR(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==eR&&(t.i=e.index_.toString()),t}var ER=function(e){nt(n,e);var t=at(n);function n(e,r,i,a){var o;return Xe(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=wC("p:rest:"),o.listens_={},o}return Ze(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=IR(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),jt(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=IR(e._queryParams),r=e._path.toString(),i=new bt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Wt(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Lt(l.responseText)}catch(n){IC("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&IC("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(sN),SR=function(){function e(){Xe(this,e),this.rootNode_=oR.EMPTY_NODE}return Ze(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function CR(){return{value:null,children:new Map}}function NR(e,t,n){if(bN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=vN(t);e.children.has(r)||e.children.set(r,CR()),NR(e.children.get(r),t=mN(t),n)}}function RR(e,t){if(bN(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(eR,(function(t,n){NR(e,new dN(t),n)})),RR(e,t)}if(e.children.size>0){var r=vN(t);if(t=mN(t),e.children.has(r))RR(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function AR(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){AR(r,new dN(t.toString()+"/"+e),n)}))}var PR,DR=function(){function e(t){Xe(this,e),this.collection_=t,this.last_=null}return Ze(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&DC(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),OR=function(){function e(t,n){Xe(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new DR(t);var r=1e4+2e4*Math.random();jC(this.reportStats_.bind(this),Math.floor(r))}return Ze(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;DC(t,(function(t,i){i>0&&Ut(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),jC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function LR(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(PR||(PR={}));var MR,FR=function(){function e(t,n,r){Xe(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=PR.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Ze(e,[{key:"operationForChild",value:function(t){if(bN(this.path)){if(null!=this.affectedTree.value)return ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dN(t));return new e(pN(),n,this.revert)}return ct(vN(this.path)===t,"operationForChild called for unrelated child."),new e(mN(this.path),this.affectedTree,this.revert)}}]),e}(),UR=function(){function e(t,n){Xe(this,e),this.source=t,this.path=n,this.type=PR.LISTEN_COMPLETE}return Ze(e,[{key:"operationForChild",value:function(t){return bN(this.path)?new e(this.source,pN()):new e(this.source,mN(this.path))}}]),e}(),jR=function(){function e(t,n,r){Xe(this,e),this.source=t,this.path=n,this.snap=r,this.type=PR.OVERWRITE}return Ze(e,[{key:"operationForChild",value:function(t){return bN(this.path)?new e(this.source,pN(),this.snap.getImmediateChild(t)):new e(this.source,mN(this.path),this.snap)}}]),e}(),VR=function(){function e(t,n,r){Xe(this,e),this.source=t,this.path=n,this.children=r,this.type=PR.MERGE}return Ze(e,[{key:"operationForChild",value:function(t){if(bN(this.path)){var n=this.children.subtree(new dN(t));return n.isEmpty()?null:n.value?new jR(this.source,pN(),n.value):new e(this.source,pN(),n)}return ct(vN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,mN(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),qR=function(){function e(t,n,r){Xe(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Ze(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(bN(e))return this.isFullyInitialized()&&!this.filtered_;var t=vN(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),BR=Ze((function e(t){Xe(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function zR(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw lt("Should only compare child_ events.");var r=new ON(t.childName,t.snapshotNode),i=new ON(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function WR(e,t){return{eventCache:e,serverCache:t}}function KR(e,t,n,r){return WR(new qR(t,n,r),e.serverCache)}function HR(e,t,n,r){return WR(e.eventCache,new qR(t,n,r))}function GR(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function QR(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var YR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(MR||(MR=new BN(NC)),MR);Xe(this,e),this.value=t,this.children=n}return Ze(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:pN(),value:this.value};if(bN(e))return null;var n=vN(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mN(e),t);return null!=i?{path:wN(new dN(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(bN(t))return this;var n=vN(t),r=this.children.get(n);return null!==r?r.subtree(mN(t)):new e(null)}},{key:"set",value:function(t,n){if(bN(t))return new e(n,this.children);var r=vN(t),i=(this.children.get(r)||new e(null)).set(mN(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(bN(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=vN(t),r=this.children.get(n);if(r){var i,a=r.remove(mN(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(bN(e))return this.value;var t=vN(e),n=this.children.get(t);return n?n.get(mN(e)):null}},{key:"setTree",value:function(t,n){if(bN(t))return n;var r,i=vN(t),a=(this.children.get(i)||new e(null)).setTree(mN(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(pN(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(wN(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,pN(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(bN(e))return null;var i=vN(e),a=this.children.get(i);return a?a.findOnPath_(mN(e),wN(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,pN(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(bN(t))return this;this.value&&r(n,this.value);var i=vN(t),a=this.children.get(i);return a?a.foreachOnPath_(mN(t),wN(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(pN(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(wN(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return DC(t,(function(e,t){n=n.set(new dN(e),t)})),n}}]),e}(),$R=function(){function e(t){Xe(this,e),this.writeTree_=t}return Ze(e,null,[{key:"empty",value:function(){return new e(new YR(null))}}]),e}();function XR(e,t,n){if(bN(t))return new $R(new YR(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=xN(i,t);return a=a.updateChild(o,n),new $R(e.writeTree_.set(i,a))}var u=new YR(n),s=e.writeTree_.setTree(t,u);return new $R(s)}function JR(e,t,n){var r=e;return DC(n,(function(e,n){r=XR(r,wN(t,e),n)})),r}function ZR(e,t){if(bN(t))return $R.empty();var n=e.writeTree_.setTree(t,new YR(null));return new $R(n)}function eA(e,t){return null!=tA(e,t)}function tA(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xN(n.path,t)):null}function nA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(eR,(function(e,n){t.push(new ON(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new ON(e,n.value))})),t}function rA(e,t){if(bN(t))return e;var n=tA(e,t);return new $R(null!=n?new YR(n):e.writeTree_.subtree(t))}function iA(e){return e.writeTree_.isEmpty()}function aA(e,t){return oA(pN(),e.writeTree_,t)}function oA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=oA(wN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(wN(e,".priority"),r)),n}function uA(e,t){return _A(t,e)}function sA(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ct(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&cA(u,r.path)?i=!1:EN(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=hA(e.allWrites,lA,pN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ZR(e.visibleWrites,r.path):DC(r.children,(function(t){e.visibleWrites=ZR(e.visibleWrites,wN(r.path,t))}));return!0}return!1}function cA(e,t){if(e.snap)return EN(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&EN(wN(e.path,n),t))return!0;return!1}function lA(e){return e.visible}function hA(e,t,n){for(var r=$R.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)EN(n,o)?r=XR(r,u=xN(n,o),a.snap):EN(o,n)&&(u=xN(o,n),r=XR(r,pN(),a.snap.getChild(u)));else{if(!a.children)throw lt("WriteRecord should have .snap or .children");if(EN(n,o))r=JR(r,u=xN(n,o),a.children);else if(EN(o,n))if(bN(u=xN(o,n)))r=JR(r,pN(),a.children);else{var s=jt(a.children,vN(u));if(s){var c=s.getChild(mN(u));r=XR(r,pN(),c)}}}}}return r}function fA(e,t,n,r,i){if(r||i){var a=rA(e.visibleWrites,t);if(!i&&iA(a))return n;if(i||null!=n||eA(a,pN())){return aA(hA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(EN(e.path,t)||EN(t,e.path))}),t),n||oR.EMPTY_NODE)}return null}var o=tA(e.visibleWrites,t);if(null!=o)return o;var u=rA(e.visibleWrites,t);return iA(u)?n:null!=n||eA(u,pN())?aA(u,n||oR.EMPTY_NODE):null}function dA(e,t,n,r){return fA(e.writeTree,e.treePath,t,n,r)}function pA(e,t){return function(e,t,n){var r=oR.EMPTY_NODE,i=tA(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(eR,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=rA(e.visibleWrites,t);return n.forEachChild(eR,(function(e,t){var n=aA(rA(a,new dN(e)),t);r=r.updateImmediateChild(e,n)})),nA(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return nA(rA(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function vA(e,t,n,r){return function(e,t,n,r,i){ct(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=wN(t,n);if(eA(e.visibleWrites,a))return null;var o=rA(e.visibleWrites,a);return iA(o)?i.getChild(n):aA(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function yA(e,t){return function(e,t){return tA(e.visibleWrites,t)}(e.writeTree,wN(e.treePath,t))}function mA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=rA(e.visibleWrites,t),c=tA(s,pN());if(null!=c)u=c;else{if(null==n)return[];u=aA(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function gA(e,t,n){return function(e,t,n,r){var i=wN(t,n),a=tA(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?aA(rA(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function kA(e,t){return _A(wN(e.treePath,t),e.writeTree)}function _A(e,t){return{treePath:e,writeTree:t}}var wA=function(){function e(){Xe(this,e),this.changeMap=new Map}return Ze(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ct(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,yR(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,vR(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,pR(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw lt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yR(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),bA=new(function(){function e(){Xe(this,e)}return Ze(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),xA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Xe(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Ze(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new qR(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:QR(this.viewCache_),i=mA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function IA(e,t,n,r,i){var a,o,u=new wA;if(n.type===PR.OVERWRITE){var s=n;s.source.fromUser?a=SA(e,t,s.path,s.snap,r,i,u):(ct(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!bN(s.path),a=EA(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===PR.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=wN(n,r);CA(t,vN(c))&&(u=SA(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=wN(n,r);CA(t,vN(c))||(u=SA(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(ct(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=RA(e,t,c.path,c.children,r,i,o,u))}else if(n.type===PR.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=yA(r,n))return t;var u,s=new xA(r,t,i),c=t.eventCache.getNode();if(bN(n)||".priority"===vN(n)){var l;if(t.serverCache.isFullyInitialized())l=dA(r,QR(t));else{var h=t.serverCache.getNode();ct(h instanceof oR,"serverChildren would be complete if leaf node"),l=pA(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=vN(n),d=gA(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,mN(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,oR.EMPTY_NODE,mN(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=dA(r,QR(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=yA(r,pN()),KR(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=yA(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(bN(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return EA(e,t,n,s.getNode().getChild(n),i,a,u,o);if(bN(n)){var c=new YR(null);return s.getNode().forEachChild(FN,(function(e,t){c=c.set(new dN(e),t)})),RA(e,t,n,c,i,a,u,o)}return t}var l=new YR(null);return r.foreach((function(e,t){var r=wN(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),RA(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==PR.LISTEN_COMPLETE)throw lt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=HR(t,a.getNode(),a.isFullyInitialized()||bN(n),a.isFiltered());return TA(e,o,n,r,bA,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=GR(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(dR(GR(t)))}}(t,a,h),{viewCache:a,changes:h}}function TA(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=yA(r,n))return t;if(bN(n))if(ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=QR(t),l=pA(r,c instanceof oR?c:oR.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=dA(r,QR(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=vN(n);if(".priority"===f){ct(1===yN(n),"Can't have a priority with additional path components");var d=s.getNode(),p=vA(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=mN(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=vA(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=gA(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return KR(t,o,s.isFullyInitialized()||bN(n),e.filter.filtersNodes())}function EA(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(bN(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=vN(n);if(!c.isCompleteForPath(n)&&yN(n)>1)return t;var d=mN(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,bA,null)}var v=HR(t,s,c.isFullyInitialized()||bN(n),l.filtersNodes());return TA(e,v,n,i,new xA(i,v,a),u)}function SA(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new xA(i,t,a);if(bN(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=KR(t,s,!0,e.filter.filtersNodes());else{var h=vN(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=KR(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=mN(n),p=c.getNode().getImmediateChild(h);if(bN(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===gN(d)&&v.getChild(_N(d)).isEmpty()?v:v.updateChild(d,r):oR.EMPTY_NODE}if(p.equals(f))u=t;else u=KR(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function CA(e,t){return e.eventCache.isCompleteForChild(t)}function NA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function RA(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=bN(n)?r:new YR(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=NA(0,t.serverCache.getNode().getImmediateChild(n),r);c=EA(e,c,new dN(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=NA(0,t.serverCache.getNode().getImmediateChild(n),r);c=EA(e,c,new dN(n),h,i,a,o,u)}})),c}var AA,PA=function(){function e(t,n){Xe(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new mR(i.getIndex()),o=(r=i).loadsAllData()?new mR(r.getIndex()):r.hasLimit()?new kR(r):new gR(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(oR.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(oR.EMPTY_NODE,s.getNode(),null),h=new qR(c,u.isFullyInitialized(),a.filtersNodes()),f=new qR(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=WR(f,h),this.eventGenerator_=new BR(this.query_)}return Ze(e,[{key:"query",get:function(){return this.query_}}]),e}();function DA(e,t){var n=QR(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bN(t)&&!n.getImmediateChild(vN(t)).isEmpty())?n.getChild(t):null}function OA(e){return 0===e.eventRegistrations_.length}function LA(e,t,n){var r=[];if(n){ct(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function MA(e,t,n,r){t.type===PR.MERGE&&null!==t.source.queryId&&(ct(QR(e.viewCache_),"We should always have a full cache before handling merges"),ct(GR(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=IA(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,ct(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ct(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ct(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,FA(e,u.changes,u.viewCache.eventCache.getNode(),null)}function FA(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),zR(e,i,"child_removed",t,r,n),zR(e,i,"child_added",t,r,n),zR(e,i,"child_moved",a,r,n),zR(e,i,"child_changed",t,r,n),zR(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var UA,jA=Ze((function e(){Xe(this,e),this.views=new Map}));function VA(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return ct(null!=a,"SyncTree gave us an op for an invalid query."),MA(a,t,n,r)}var o,u=[],s=et(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(MA(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function qA(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=dA(n,i?r:null),s=!1;u?s=!0:r instanceof oR?(u=pA(n,r),s=!1):(u=oR.EMPTY_NODE,s=!1);var c=WR(new qR(u,s,!1),new qR(r,i,!1));return new PA(t,c)}return o}function BA(e,t,n,r,i,a){var o=qA(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(eR,(function(e,t){r.push(pR(e,t))})),n.isFullyInitialized()&&r.push(dR(n.getNode())),FA(e,r,n.getNode(),t)}(o,n)}function zA(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=QA(e);if("default"===i){var c,l=et(e.views.entries());try{for(l.s();!(c=l.n()).done;){var h=s(c.value,2),f=h[0],d=h[1];o=o.concat(LA(d,n,r)),OA(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(LA(p,n,r)),OA(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!QA(e)&&a.push(new(ct(AA,"Reference.ts has not been loaded"),AA)(t._repo,t._path)),{removed:a,events:o}}function WA(e){var t,n=[],r=et(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function KA(e,t){var n,r=null,i=et(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||DA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function HA(e,t){if(t._queryParams.loadsAllData())return YA(e);var n=t._queryIdentifier;return e.views.get(n)}function GA(e,t){return null!=HA(e,t)}function QA(e){return null!=YA(e)}function YA(e){var t,n=et(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var $A=1,XA=Ze((function e(t){Xe(this,e),this.listenProvider_=t,this.syncPointTree_=new YR(null),this.pendingWriteTree_={visibleWrites:$R.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function JA(e,t,n,r,i){return function(e,t,n,r,i){ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=XR(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?uP(e,new jR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ZA(e,t,n,r){!function(e,t,n,r){ct(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=JR(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=YR.fromObject(n);return uP(e,new VR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function eP(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(sA(e.pendingWriteTree_,t)){var i=new YR(null);return null!=r.snap?i=i.set(pN(),!0):DC(r.children,(function(e){i=i.set(new dN(e),!0)})),uP(e,new FR(r.path,i,n))}return[]}function tP(e,t,n){return uP(e,new jR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function nP(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||GA(o,t))){var s=zA(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return QA(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&QA(t))return[YA(t)];var r=[];return t&&(r=WA(t)),DC(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=lP(e,v);e.listenProvider_.startListening(yP(y),hP(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(yP(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(fP(t));e.listenProvider_.stopListening(yP(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=fP(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function rP(e,t,n,r){var i=dP(e,r);if(null!=i){var a=pP(i),o=a.path,u=a.queryId,s=xN(o,t);return vP(e,o,new jR(LR(u),s,n))}return[]}function iP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=xN(e,i);a=a||KA(t,n),o=o||QA(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||QA(s),a=a||KA(s,pN())):(s=new jA,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=oR.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=KA(t,pN());n&&(a=a.updateImmediateChild(e,n))})));var c=GA(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=fP(t);ct(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=$A++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=BA(s,t,n,uA(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=HA(s,t);f=f.concat(function(e,t,n){var r=t._path,i=hP(e,t),a=lP(e,n),o=e.listenProvider_.startListening(yP(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)ct(!QA(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!bN(e)&&t&&QA(t))return[YA(t).query];var r=[];return t&&(r=r.concat(WA(t).map((function(e){return e.query})))),DC(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(yP(l),hP(e,l))}return o}(e,t,d))}return f}function aP(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=KA(n,xN(e,t));if(r)return r}));return fA(r,t,i,n,!0)}function oP(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=xN(e,n);r=r||KA(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||KA(i,pN()):(i=new jA,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new qR(r,!0,!1):null;return function(e){return GR(e.viewCache_)}(qA(i,t,uA(e.pendingWriteTree_,t._path),a?o.getNode():oR.EMPTY_NODE,a))}function uP(e,t){return sP(t,e.syncPointTree_,null,uA(e.pendingWriteTree_,pN()))}function sP(e,t,n,r){if(bN(e.path))return cP(e,t,n,r);var i=t.get(pN());null==n&&null!=i&&(n=KA(i,pN()));var a=[],o=vN(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=kA(r,o);a=a.concat(sP(u,s,c,l))}return i&&(a=a.concat(VA(i,e,r,n))),a}function cP(e,t,n,r){var i=t.get(pN());null==n&&null!=i&&(n=KA(i,pN()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=kA(r,t),s=e.operationForChild(t);s&&(a=a.concat(cP(s,i,o,u)))})),i&&(a=a.concat(VA(i,e,r,n))),a}function lP(e,t){var n=t.query,r=hP(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||oR.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=dP(e,n);if(r){var i=pP(r),a=i.path,o=i.queryId,u=xN(a,t);return vP(e,a,new UR(LR(o),u))}return[]}(e,n._path,r):function(e,t){return uP(e,new UR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return nP(e,n,null,i)}}}function hP(e,t){var n=fP(t);return e.queryToTagMap.get(n)}function fP(e){return e._path.toString()+"$"+e._queryIdentifier}function dP(e,t){return e.tagToQueryMap.get(t)}function pP(e){var t=e.indexOf("$");return ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new dN(e.substr(0,t))}}function vP(e,t,n){var r=e.syncPointTree_.get(t);return ct(r,"Missing sync point for query tag that we're tracking"),VA(r,n,uA(e.pendingWriteTree_,t),null)}function yP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(ct(UA,"Reference.ts has not been loaded"),UA)(e._repo,e._path):e}var mP=function(){function e(t){Xe(this,e),this.node_=t}return Ze(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),gP=function(){function e(t,n){Xe(this,e),this.syncTree_=t,this.path_=n}return Ze(e,[{key:"getImmediateChild",value:function(t){var n=wN(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return aP(this.syncTree_,this.path_)}}]),e}(),kP=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},_P=function(e,t,n){return e&&"object"===typeof e?(ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?wP(e[".sv"],t,n):"object"===typeof e[".sv"]?bP(e[".sv"],t):void ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},wP=function(e,t,n){if("timestamp"===e)return n.timestamp;ct(!1,"Unexpected server value: "+e)},bP=function(e,t,n){e.hasOwnProperty("increment")||ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&ct(!1,"Unexpected increment value: "+r);var i=t.node();if(ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},xP=function(e,t,n,r){return TP(t,new gP(n,e),r)},IP=function(e,t,n){return TP(e,new mP(t),n)};function TP(e,t,n){var r,i=e.getPriority().val(),a=_P(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=_P(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new $N(u,cR(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new $N(a))),s.forEachChild(eR,(function(e,i){var a=TP(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var EP=Ze((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Xe(this,e),this.name=t,this.parent=n,this.node=r}));function SP(e,t){for(var n=t instanceof dN?t:new dN(t),r=e,i=vN(n);null!==i;){var a=jt(r.node.children,i)||{children:{},childCount:0};r=new EP(i,r,a),i=vN(n=mN(n))}return r}function CP(e){return e.node.value}function NP(e,t){e.node.value=t,OP(e)}function RP(e){return e.node.childCount>0}function AP(e,t){DC(e.node.children,(function(n,r){t(new EP(n,e,r))}))}function PP(e,t,n,r){n&&!r&&t(e),AP(e,(function(e){PP(e,t,!0,r)})),n&&r&&t(e)}function DP(e){return new dN(null===e.parent?e.name:DP(e.parent)+"/"+e.name)}function OP(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===CP(e)&&!RP(e)}(n),i=Ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,OP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,OP(e))}(e.parent,e.name,e)}var LP=/[\[\].#$\/\u0000-\u001F\u007F]/,MP=/[\[\].#$\u0000-\u001F\u007F]/,FP=10485760,UP=function(e){return"string"===typeof e&&0!==e.length&&!LP.test(e)},jP=function(e){return"string"===typeof e&&0!==e.length&&!MP.test(e)},VP=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!TC(e)||e&&"object"===typeof e&&Ut(e,".sv")},qP=function(e,t,n,r){r&&void 0===t||BP(Jt(e,"value"),t,n)},BP=function e(t,n,r){var i=r instanceof dN?new SN(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+NN(i));if("function"===typeof n)throw new Error(t+"contains a function "+NN(i)+" with contents = "+n.toString());if(TC(n))throw new Error(t+"contains "+n.toString()+" "+NN(i));if("string"===typeof n&&n.length>FP/3&&tn(n)>FP)throw new Error(t+"contains a string greater than "+FP+" utf8 bytes "+NN(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(DC(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!UP(n)))throw new Error(t+" contains an invalid key ("+n+") "+NN(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=tn(t),CN(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=tn(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+NN(i)+" in addition to actual children.")}},zP=function(e,t,n,r){if(!r||void 0!==t){var i=Jt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];DC(t,(function(e,t){var r=new dN(e);if(BP(i,t,wN(n,r)),".priority"===gN(r)&&!VP(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=kN(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!UP(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(IN);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&EN(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},WP=function(e,t,n){if(!n||void 0!==t){if(TC(t))throw new Error(Jt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!VP(t))throw new Error(Jt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},KP=function(e,t,n,r){if((!r||void 0!==n)&&!UP(n))throw new Error(Jt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},HP=function(e,t,n,r){if((!r||void 0!==n)&&!jP(n))throw new Error(Jt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},GP=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HP(e,t,n,r)},QP=function(e,t){if(".info"===vN(t))throw new Error(e+" failed = Can't modify data under /.info/")},YP=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!UP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),jP(e)}(n))throw new Error(Jt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},$P=Ze((function e(){Xe(this,e),this.eventLists_=[],this.recursionDepth_=0}));function XP(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||TN(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function JP(e,t,n){XP(e,n),eD(e,(function(e){return TN(e,t)}))}function ZP(e,t,n){XP(e,n),eD(e,(function(e){return EN(e,t)||EN(t,e)}))}function eD(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(tD(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function tD(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();mC&&_C("event: "+n.toString()),FC(r)}}}var nD="repo_interrupt",rD=25,iD=function(){function e(t,n,r,i){Xe(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $P,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=CR(),this.transactionQueueTree_=new EP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Ze(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function aD(e,t,n){if(e.stats_=ZC(e.repoInfo_),e.forceRestClient_||UC())e.server_=new ER(e.repoInfo_,(function(t,n,r,i){sD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return cD(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new PN(e.repoInfo_,t,(function(t,n,r,i){sD(e,t,n,r,i)}),(function(t){cD(e,t)}),(function(t){!function(e,t){DC(t,(function(t,n){lD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return JC[n]||(JC[n]=t()),JC[n]}(e.repoInfo_,(function(){return new OR(e.stats_,e.server_)})),e.infoData_=new SR,e.infoSyncTree_=new XA({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=tP(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),lD(e,"connected",!1),e.serverSyncTree_=new XA({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ZP(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function oD(e){var t=e.infoData_.getNode(new dN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function uD(e){return kP({timestamp:oD(e)})}function sD(e,t,n,r,i){e.dataUpdateCount++;var a=new dN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=qt(n,(function(e){return cR(e)}));o=function(e,t,n,r){var i=dP(e,r);if(i){var a=pP(i),o=a.path,u=a.queryId,s=xN(o,t),c=YR.fromObject(n);return vP(e,o,new VR(LR(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=cR(n);o=rP(e.serverSyncTree_,a,s,i)}else if(r){var c=qt(n,(function(e){return cR(e)}));o=function(e,t,n){var r=YR.fromObject(n);return uP(e,new VR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=cR(n);o=tP(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=wD(e,a)),ZP(e.eventQueue_,h,o)}function cD(e,t){lD(e,"connected",t),!1===t&&function(e){mD(e,"onDisconnectEvents");var t=uD(e),n=CR();AR(e.onDisconnect_,pN(),(function(r,i){var a=xP(r,i,e.serverSyncTree_,t);NR(n,r,a)}));var r=[];AR(n,pN(),(function(t,n){r=r.concat(tP(e.serverSyncTree_,t,n));var i=ED(e,t);wD(e,i)})),e.onDisconnect_=CR(),ZP(e.eventQueue_,pN(),r)}(e)}function lD(e,t,n){var r=new dN("/.info/"+t),i=cR(n);e.infoData_.updateSnapshot(r,i);var a=tP(e.infoSyncTree_,r,i);ZP(e.eventQueue_,r,a)}function hD(e){return e.nextWriteId_++}function fD(e,t,n,r,i){mD(e,"set",{path:t.toString(),value:n,priority:r});var a=uD(e),o=cR(n,r),u=aP(e.serverSyncTree_,t),s=IP(o,u,a),c=hD(e),l=JA(e.serverSyncTree_,t,s,c,!0);XP(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||IC("set at "+t+" failed: "+n);var o=eP(e.serverSyncTree_,c,!a);ZP(e.eventQueue_,t,o),gD(e,i,n,r)}));var h=ED(e,t);wD(e,h),ZP(e.eventQueue_,h,[])}function dD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&RR(e.onDisconnect_,t),gD(e,n,r,i)}))}function pD(e,t,n,r){var i=cR(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&NR(e.onDisconnect_,t,i),gD(e,r,n,a)}))}function vD(e,t,n){var r;r=".info"===vN(t._path)?nP(e.infoSyncTree_,t,n):nP(e.serverSyncTree_,t,n),JP(e.eventQueue_,t._path,r)}function yD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(nD)}function mD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_C.apply(void 0,[t].concat(r))}function gD(e,t,n,r){t&&FC((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function kD(e,t,n){return aP(e.serverSyncTree_,t,n)||oR.EMPTY_NODE}function _D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||TD(e,t),CP(t)){var n=xD(e,t);ct(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=kD(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];ct(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=xN(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){mD(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(eP(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);TD(e,SP(e.transactionQueueTree_,t)),_D(e,e.transactionQueueTree_),ZP(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)FC(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{IC("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}wD(e,t)}}),o)}(e,DP(t),n)}else RP(t)&&AP(t,(function(t){_D(e,t)}))}function wD(e,t){var n=bD(e,t),r=DP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=xN(n,c.path),h=!1;if(ct(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(eP(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=rD)h=!0,u="maxretry",i=i.concat(eP(e.serverSyncTree_,c.currentWriteId,!0));else{var f=kD(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){BP("transaction failed: Data returned ",d,c.path);var p=cR(d);"object"===typeof d&&null!=d&&Ut(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,y=uD(e),m=IP(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=hD(e),o.splice(o.indexOf(v),1),i=(i=i.concat(JA(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(eP(e.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(eP(e.serverSyncTree_,c.currentWriteId,!0))}ZP(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);TD(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)FC(r[c]);_D(e,e.transactionQueueTree_)}(e,xD(e,n),r),r}function bD(e,t){var n,r=e.transactionQueueTree_;for(n=vN(t);null!==n&&void 0===CP(r);)r=SP(r,n),n=vN(t=mN(t));return r}function xD(e,t){var n=[];return ID(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ID(e,t,n){var r=CP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);AP(t,(function(t){ID(e,t,n)}))}function TD(e,t){var n=CP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,NP(t,n.length>0?n:void 0)}AP(t,(function(t){TD(e,t)}))}function ED(e,t){var n=DP(bD(e,t)),r=SP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){SD(e,t)})),SD(e,r),PP(r,(function(t){SD(e,t)})),n}function SD(e,t){var n=CP(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ct(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ct(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(eP(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?NP(t,void 0):n.length=a+1,ZP(e.eventQueue_,DP(t),i);for(var u=0;u<r.length;u++)FC(r[u])}}var CD=function(e,t){var n=ND(e),r=n.namespace;"firebase.com"===n.domain&&xC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||xC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&IC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new QC(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new dN(n.pathString)}},ND=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=et(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):IC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},RD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AD=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=RD.charAt(n%64),n=Math.floor(n/64);ct(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=RD.charAt(t[r]);return ct(20===o.length,"nextPushId: Length should be 20."),o}}(),PD=function(){function e(t,n,r,i){Xe(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return Ze(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())}}]),e}(),DD=function(){function e(t,n,r){Xe(this,e),this.eventRegistration=t,this.error=n,this.path=r}return Ze(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),OD=function(){function e(t,n){Xe(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Ze(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return ct(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),LD=function(){function e(t,n){Xe(this,e),this._repo=t,this._path=n}return Ze(e,[{key:"cancel",value:function(){var e=new bt;return dD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){QP("OnDisconnect.remove",this._path);var e=new bt;return pD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){QP("OnDisconnect.set",this._path),qP("OnDisconnect.set",e,this._path,!1);var t=new bt;return pD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){QP("OnDisconnect.setWithPriority",this._path),qP("OnDisconnect.setWithPriority",e,this._path,!1),WP("OnDisconnect.setWithPriority",t,!1);var n=new bt;return function(e,t,n,r,i){var a=cR(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&NR(e.onDisconnect_,t,a),gD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){QP("OnDisconnect.update",this._path),zP("OnDisconnect.update",e,this._path,!1);var t=new bt;return function(e,t,n,r){if(Vt(n))return _C("onDisconnect().update() called with empty data.  Don't do anything."),void gD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&DC(n,(function(n,r){var i=cR(r);NR(e.onDisconnect_,wN(t,n),i)})),gD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),MD=function(){function e(t,n,r,i){Xe(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Ze(e,[{key:"key",get:function(){return bN(this._path)?null:gN(this._path)}},{key:"ref",get:function(){return new VD(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=TR(this._queryParams),t=AC(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return TR(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=nn(t))instanceof e))return!1;var n=this._repo===t._repo,r=TN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function FD(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function UD(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===FN){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==EC)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==SC)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===eR){if(null!=t&&!VP(t)||null!=n&&!VP(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ct(e.getIndex()instanceof lR||e.getIndex()===fR,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jD(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var VD=function(e){nt(n,e);var t=at(n);function n(e,r){return Xe(this,n),t.call(this,e,r,new _R,!1)}return Ze(n,[{key:"parent",get:function(){var e=_N(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(MD),qD=function(){function e(t,n,r){Xe(this,e),this._node=t,this.ref=n,this._index=r}return Ze(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new dN(t),r=WD(this.ref,t);return new e(this._node.getChild(n),r,eR)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,WD(n.ref,r),eR))}))}},{key:"hasChild",value:function(e){var t=new dN(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function BD(e,t){return(e=nn(e))._checkNotDeleted("ref"),void 0!==t?WD(e._root,t):e._root}function zD(e,t){(e=nn(e))._checkNotDeleted("refFromURL");var n=CD(t,e._repo.repoInfo_.nodeAdmin);YP("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||xC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),BD(e,n.path.toString())}function WD(e,t){return null===vN((e=nn(e))._path)?GP("child","path",t,!1):HP("child","path",t,!1),new VD(e._repo,wN(e._path,t))}function KD(e,t){e=nn(e),QP("set",e._path),qP("set",t,e._path,!1);var n=new bt;return fD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function HD(e,t){zP("update",t,e._path,!1);var n=new bt;return function(e,t,n,r){mD(e,"update",{path:t.toString(),value:n});var i=!0,a=uD(e),o={};if(DC(n,(function(n,r){i=!1,o[n]=xP(wN(t,n),cR(r),e.serverSyncTree_,a)})),i)_C("update() called with empty data.  Don't do anything."),gD(0,r,"ok",void 0);else{var u=hD(e),s=ZA(e.serverSyncTree_,t,o,u);XP(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||IC("update at "+t+" failed: "+n);var o=eP(e.serverSyncTree_,u,!a),s=o.length>0?wD(e,t):t;ZP(e.eventQueue_,s,o),gD(0,r,n,i)})),DC(n,(function(n){var r=ED(e,wN(t,n));wD(e,r)})),ZP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function GD(e){e=nn(e);var t=new OD((function(){})),n=new QD(t);return function(e,t,n){var r=oP(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=cR(r).withIndex(t._queryParams.getIndex());if(iP(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=tP(e.serverSyncTree_,t._path,a);else{var o=hP(e.serverSyncTree_,t);i=rP(e.serverSyncTree_,t._path,a,o)}return ZP(e.eventQueue_,t._path,i),nP(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return mD(e,"get for query "+Mt(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new qD(t,new VD(e._repo,e._path),e._queryParams.getIndex())}))}var QD=function(){function e(t){Xe(this,e),this.callbackContext=t}return Ze(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new PD("value",this,new qD(e.snapshotNode,new VD(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new DD(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),YD=function(){function e(t,n){Xe(this,e),this.eventType=t,this.callbackContext=n}return Ze(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new DD(this,e,t):null}},{key:"createEvent",value:function(e,t){ct(null!=e.childName,"Child events should have a childName.");var n=WD(new VD(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new PD(e.type,this,new qD(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function $D(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){vD(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new OD(n,a||void 0),c="value"===t?new QD(s):new YD(t,s);return function(e,t,n){var r;r=".info"===vN(t._path)?iP(e.infoSyncTree_,t,n):iP(e.serverSyncTree_,t,n),JP(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return vD(e._repo,e,c)}}function XD(e,t,n,r){return $D(e,"value",t,n,r)}function JD(e,t,n,r){return $D(e,"child_added",t,n,r)}function ZD(e,t,n,r){return $D(e,"child_changed",t,n,r)}function eO(e,t,n,r){return $D(e,"child_moved",t,n,r)}function tO(e,t,n,r){return $D(e,"child_removed",t,n,r)}function nO(e,t,n){var r=null,i=n?new OD(n):null;"value"===t?r=new QD(i):t&&(r=new YD(t,i)),vD(e._repo,e,r)}var rO=Ze((function e(){Xe(this,e)})),iO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ze(n,[{key:"_apply",value:function(e){qP("endAt",this._value,e._path,!0);var t=bR(e._queryParams,this._value,this._key);if(jD(t),UD(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new MD(e._repo,e._path,t,e._orderByCalled)}}]),n}(rO);var aO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ze(n,[{key:"_apply",value:function(e){qP("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===FN||n?bR(e,t,n):bR(e,t,EC)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jD(t),UD(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new MD(e._repo,e._path,t,e._orderByCalled)}}]),n}(rO);var oO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ze(n,[{key:"_apply",value:function(e){qP("startAt",this._value,e._path,!0);var t=wR(e._queryParams,this._value,this._key);if(jD(t),UD(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new MD(e._repo,e._path,t,e._orderByCalled)}}]),n}(rO);var uO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ze(n,[{key:"_apply",value:function(e){qP("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===FN||n?wR(e,t,n):wR(e,t,SC)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jD(t),UD(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new MD(e._repo,e._path,t,e._orderByCalled)}}]),n}(rO);var sO=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this))._limit=e,r}return Ze(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new MD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(rO);var cO=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this))._limit=e,r}return Ze(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new MD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(rO);var lO=function(e){nt(n,e);var t=at(n);function n(e){var r;return Xe(this,n),(r=t.call(this))._path=e,r}return Ze(n,[{key:"_apply",value:function(e){FD(e,"orderByChild");var t=new dN(this._path);if(bN(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new lR(t),r=xR(e._queryParams,n);return UD(r),new MD(e._repo,e._path,r,!0)}}]),n}(rO);var hO=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_apply",value:function(e){FD(e,"orderByKey");var t=xR(e._queryParams,FN);return UD(t),new MD(e._repo,e._path,t,!0)}}]),n}(rO);var fO=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_apply",value:function(e){FD(e,"orderByPriority");var t=xR(e._queryParams,eR);return UD(t),new MD(e._repo,e._path,t,!0)}}]),n}(rO);var dO=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_apply",value:function(e){FD(e,"orderByValue");var t=xR(e._queryParams,fR);return UD(t),new MD(e._repo,e._path,t,!0)}}]),n}(rO);var pO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ze(n,[{key:"_apply",value:function(e){if(qP("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new iO(this._value,this._key)._apply(new oO(this._value,this._key)._apply(e))}}]),n}(rO);function vO(e){for(var t=nn(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){ct(!AA,"__referenceConstructor has already been defined"),AA=e}(VD),function(e){ct(!UA,"__referenceConstructor has already been defined"),UA=e}(VD);var yO="FIREBASE_DATABASE_EMULATOR_HOST",mO={},gO=!1;function kO(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||xC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_C("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=CD(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/React-OLX-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[yO]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=CD(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new BC(BC.OWNER):new qC(e.name,e.options,t);YP("Invalid Firebase Database URL",u),bN(u.path)||xC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=mO[t.name];i||(i={},mO[t.name]=i);var a=i[e.toURLString()];a&&xC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new iD(e,gO,n,r),i[e.toURLString()]=a,a}(s,e,l,new VC(e.name,n));return new _O(h,e)}var _O=function(){function e(t,n){Xe(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Ze(e,[{key:"_repo",get:function(){return this._instanceStarted||(aD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new VD(this._repo,pN())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=mO[t];n&&n[e.key]===e||xC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),yD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&xC("Cannot call "+e+" on a deleted database.")}}]),e}();function wO(){oN.IS_TRANSPORT_INITIALIZED&&IC("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function bO(){wO(),nN.forceDisallow()}function xO(){wO(),aN.forceDisallow(),nN.forceAllow()}function IO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=nn(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&xC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new BC(BC.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:xt(r.mockUserToken,e.app.options.projectId);a=new BC(o)}!function(e,t,n,r){e.repoInfo_=new QC("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function TO(e){var t;(e=nn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(nD)}function EO(e,t){kC(e,t)}var SO={".sv":"timestamp"};var CO=function(){function e(t,n){Xe(this,e),this.committed=t,this.snapshot=n}return Ze(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function NO(e,t,n){var r;if(e=nn(e),QP("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new bt,o=XD(e,(function(){}));return function(e,t,n,r,i,a){mD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:pC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=kD(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{BP("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=SP(e.transactionQueueTree_,t),h=CP(l)||[];h.push(o),NP(l,h),"object"===typeof s&&null!==s&&Ut(s,".priority")?(c=jt(s,".priority"),ct(VP(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(aP(e.serverSyncTree_,t)||oR.EMPTY_NODE).getPriority().val();var f=uD(e),d=cR(s,c),p=IP(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=hD(e);var v=JA(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);ZP(e.eventQueue_,t,v),_D(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new qD(r,new VD(e._repo,e._path),eR),a.resolve(new CO(n,i)))}),o,i),a.promise}PN.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},PN.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){uC(rr),$n(new cn("database",(function(e,t){var n=t.instanceIdentifier;return kO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),cr(iC,aC,e),cr(iC,aC,"esm2017")}();var RO="@firebase/database-compat",AO="0.3.4",PO=new _n("@firebase/database-compat"),DO=function(e){var t="FIREBASE WARNING: "+e;PO.warn(t)},OO=function(){function e(t){Xe(this,e),this._delegate=t}return Ze(e,[{key:"cancel",value:function(e){Xt("OnDisconnect.cancel",0,1,arguments.length),Zt("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Xt("OnDisconnect.remove",0,1,arguments.length),Zt("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Xt("OnDisconnect.set",1,2,arguments.length),Zt("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Xt("OnDisconnect.setWithPriority",2,3,arguments.length),Zt("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Xt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,DO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Zt("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),LO=function(){function e(t,n){Xe(this,e),this.committed=t,this.snapshot=n}return Ze(e,[{key:"toJSON",value:function(){return Xt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),MO=function(){function e(t,n){Xe(this,e),this._database=t,this._delegate=n}return Ze(e,[{key:"val",value:function(){return Xt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Xt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Xt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Xt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Xt("DataSnapshot.child",0,1,arguments.length),t=String(t),HP("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Xt("DataSnapshot.hasChild",1,1,arguments.length),HP("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Xt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Xt("DataSnapshot.forEach",1,1,arguments.length),Zt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Xt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Xt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Xt("DataSnapshot.ref",0,0,arguments.length),new UO(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),FO=function(){function e(t,n){Xe(this,e),this.database=t,this._delegate=n}return Ze(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Xt("Query.on",2,4,arguments.length),Zt("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new MO(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return XD(this._delegate,s,c),n;case"child_added":return JD(this._delegate,s,c),n;case"child_removed":return tO(this._delegate,s,c),n;case"child_changed":return ZD(this._delegate,s,c),n;case"child_moved":return eO(this._delegate,s,c),n;default:throw new Error(Jt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Xt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Jt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Zt("Query.off","callback",t,!0),en("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,nO(this._delegate,e,r)}else nO(this._delegate,e)}},{key:"get",value:function(){var e=this;return GD(this._delegate).then((function(t){return new MO(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Xt("Query.once",1,4,arguments.length),Zt("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new bt,s=function(e,t){var r=new MO(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":XD(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":JD(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":tO(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":ZD(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":eO(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Jt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Xt("Query.limitToFirst",1,1,arguments.length),new e(this.database,vO(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sO(e)}(t)))}},{key:"limitToLast",value:function(t){return Xt("Query.limitToLast",1,1,arguments.length),new e(this.database,vO(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cO(e)}(t)))}},{key:"orderByChild",value:function(t){return Xt("Query.orderByChild",1,1,arguments.length),new e(this.database,vO(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return HP("orderByChild","path",e,!1),new lO(e)}(t)))}},{key:"orderByKey",value:function(){return Xt("Query.orderByKey",0,0,arguments.length),new e(this.database,vO(this._delegate,new hO))}},{key:"orderByPriority",value:function(){return Xt("Query.orderByPriority",0,0,arguments.length),new e(this.database,vO(this._delegate,new fO))}},{key:"orderByValue",value:function(){return Xt("Query.orderByValue",0,0,arguments.length),new e(this.database,vO(this._delegate,new dO))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Xt("Query.startAt",0,2,arguments.length),new e(this.database,vO(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return KP("startAt","key",t,!0),new oO(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Xt("Query.startAfter",0,2,arguments.length),new e(this.database,vO(this._delegate,function(e,t){return KP("startAfter","key",t,!0),new uO(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Xt("Query.endAt",0,2,arguments.length),new e(this.database,vO(this._delegate,function(e,t){return KP("endAt","key",t,!0),new iO(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Xt("Query.endBefore",0,2,arguments.length),new e(this.database,vO(this._delegate,function(e,t){return KP("endBefore","key",t,!0),new aO(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Xt("Query.equalTo",1,2,arguments.length),new e(this.database,vO(this._delegate,function(e,t){return KP("equalTo","key",t,!0),new pO(e,t)}(t,n)))}},{key:"toString",value:function(){return Xt("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Xt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Xt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new UO(this.database,new VD(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Zt(e,"cancel",r.cancel,!0),r.context=n,en(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Jt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),UO=function(e){nt(n,e);var t=at(n);function n(e,r){var i;return Xe(this,n),(i=t.call(this,e,new MD(r._repo,r._path,new _R,!1))).database=e,i._delegate=r,i}return Ze(n,[{key:"getKey",value:function(){return Xt("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Xt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,WD(this._delegate,e))}},{key:"getParent",value:function(){Xt("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Xt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Xt("Reference.set",1,2,arguments.length),Zt("Reference.set","onComplete",t,!0);var n=KD(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Xt("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,DO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}QP("Reference.update",this._delegate._path),Zt("Reference.update","onComplete",t,!0);var i=HD(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Xt("Reference.setWithPriority",2,3,arguments.length),Zt("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(QP("setWithPriority",e._path),qP("setWithPriority",t,e._path,!1),WP("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new bt;return fD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Xt("Reference.remove",0,1,arguments.length),Zt("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,QP("remove",t._path),KD(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Xt("Reference.transaction",1,3,arguments.length),Zt("Reference.transaction","transactionUpdate",e,!1),Zt("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Jt(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=NO(this._delegate,e,{applyLocally:n}).then((function(e){return new LO(e.committed,new MO(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Xt("Reference.setPriority",1,2,arguments.length),Zt("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=nn(e),QP("setPriority",e._path),WP("setPriority",t,!1);var n=new bt;return fD(e._repo,wN(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Xt("Reference.push",0,2,arguments.length),Zt("Reference.push","onComplete",t,!0);var i=function(e,t){e=nn(e),QP("push",e._path),qP("push",t,e._path,!0);var n,r=oD(e._repo),i=AD(r),a=WD(e,i),o=WD(e,i);return n=null!=t?KD(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return QP("Reference.onDisconnect",this._delegate._path),new OO(new LD(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(FO),jO=function(){function e(t,n){var r=this;Xe(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:bO,forceLongPolling:xO}}return Ze(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};IO(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Xt("database.ref",0,1,arguments.length),e instanceof UO){var t=zD(this._delegate,e.toString());return new UO(this,t)}var n=BD(this._delegate,e);return new UO(this,n)}},{key:"refFromURL",value:function(e){Xt("database.refFromURL",1,1,arguments.length);var t=zD(this._delegate,e);return new UO(this,t)}},{key:"goOffline",value:function(){return Xt("database.goOffline",0,0,arguments.length),function(e){(e=nn(e))._checkNotDeleted("goOffline"),yD(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Xt("database.goOnline",0,0,arguments.length),TO(this._delegate)}}]),e}();jO.ServerValue={TIMESTAMP:SO,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var VO=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;uC(r);var s=new hn("auth-internal",new pn("database-standalone"));return s.setComponent(new cn("auth-internal",(function(){return i}),"PRIVATE")),{instance:new jO(kO(t,s,void 0,n,u),t),namespace:a}}}),qO=jO.ServerValue;!function(e){e.INTERNAL.registerComponent(new cn("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new jO(i,r)}),"PUBLIC").setServiceProps({Reference:UO,Query:FO,Database:jO,DataSnapshot:MO,enableLogging:EO,INTERNAL:VO,ServerValue:qO}).setMultipleInstances(!0)),e.registerVersion(RO,AO)}(Ur);var BO,zO="firebasestorage.googleapis.com",WO="storageBucket",KO=function(e){nt(n,e);var t=at(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Xe(this,n),(i=t.call(this,HO(e),"Firebase Storage: ".concat(r," (").concat(HO(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(tt(i),n.prototype),i}return Ze(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return HO(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Pt);function HO(e){return"storage/"+e}function GO(){return new KO(BO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function QO(){return new KO(BO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YO(){return new KO(BO.CANCELED,"User canceled the upload/download.")}function $O(){return new KO(BO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XO(e){return new KO(BO.INVALID_ARGUMENT,e)}function JO(){return new KO(BO.APP_DELETED,"The Firebase app was deleted.")}function ZO(e){return new KO(BO.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eL(e,t){return new KO(BO.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function tL(e){throw new KO(BO.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(BO||(BO={}));var nL,rL=function(){function e(t,n){Xe(this,e),this.bucket=t,this.path_=n}return Ze(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new KO(BO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===zO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new KO(BO.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),iL=function(){function e(t){Xe(this,e),this.promise_=Promise.reject(t)}return Ze(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function aL(e){return"string"===typeof e||e instanceof String}function oL(e){return uL()&&e instanceof Blob}function uL(){return"undefined"!==typeof Blob&&!Et()}function sL(e,t,n,r){if(r<t)throw XO("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw XO("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function cL(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function lL(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function hL(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(nL||(nL={}));var fL=function(){function e(t,n,r,i,a,o,u,s,c,l,h){var f=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];Xe(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return Ze(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=GO();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?JO():YO());else i(QO())}};this.canceled_?t(0,new dL(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(u=2),clearTimeout(i),h(0)):e||(u=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new dL(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===nL.NO_ERROR,a=r.getStatus();if(!n||hL(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===nL.ABORT;t(!1,new dL(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new dL(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),dL=Ze((function e(t,n,r){Xe(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function pL(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vL(){for(var e=pL(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(uL())return new Blob(n);throw new KO(BO.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function yL(e){if("undefined"===typeof atob)throw t="base-64",new KO(BO.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var mL={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gL=Ze((function e(t,n){Xe(this,e),this.data=t,this.contentType=n||null}));function kL(e,t){switch(e){case mL.RAW:return new gL(_L(t));case mL.BASE64:case mL.BASE64URL:return new gL(wL(e,t));case mL.DATA_URL:return new gL(function(e){var t=new bL(e);return t.base64?wL(mL.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw eL(mL.DATA_URL,"Malformed data URL.")}return _L(t)}(t.rest)}(t),new bL(t).contentType)}throw GO()}function _L(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function wL(e,t){switch(e){case mL.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw eL(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case mL.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw eL(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=yL(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw eL(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var bL=Ze((function e(t){Xe(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw eL(mL.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var xL=function(){function e(t,n){Xe(this,e);var r=0,i="";oL(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ze(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(oL(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(uL()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(vL.apply(null,i))}var a=n.map((function(e){return aL(e)?kL(mL.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function IL(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function TL(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function EL(e,t){return t}var SL=Ze((function e(t,n,r,i){Xe(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||EL})),CL=null;function NL(){if(CL)return CL;var e=[];e.push(new SL("bucket")),e.push(new SL("generation")),e.push(new SL("metageneration")),e.push(new SL("name","fullPath",!0));var t=new SL("name");t.xform=function(e,t){return function(e){return!aL(e)||e.length<2?e:TL(e)}(t)},e.push(t);var n=new SL("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new SL("timeCreated")),e.push(new SL("updated")),e.push(new SL("md5Hash",null,!0)),e.push(new SL("cacheControl",null,!0)),e.push(new SL("contentDisposition",null,!0)),e.push(new SL("contentEncoding",null,!0)),e.push(new SL("contentLanguage",null,!0)),e.push(new SL("contentType",null,!0)),e.push(new SL("metadata","customMetadata",!0)),CL=e}function RL(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new rL(n,r);return t._makeStorageReference(i)}})}(r,e),r}function AL(e,t,n){var r=IL(t);return null===r?null:RL(e,r,n)}function PL(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var DL="prefixes",OL="items";function LL(e,t,n){var r=IL(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[DL]){var i,a=et(n[DL]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new rL(t,o));r.prefixes.push(u)}}catch(f){a.e(f)}finally{a.f()}}if(n[OL]){var s,c=et(n[OL]);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=e._makeStorageReference(new rL(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var ML=Ze((function e(t,n,r,i){Xe(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function FL(e){if(!e)throw GO()}function UL(e,t){return function(n,r){var i=AL(e,r,t);return FL(null!==i),i}}function jL(e,t){return function(n,r){var i=AL(e,r,t);return FL(null!==i),function(e,t,n,r){var i=IL(t);if(null===i)return null;if(!aL(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return cL("/b/"+o(i)+"/o/"+o(a),n,r)+lL({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function VL(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new KO(BO.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new KO(BO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new KO(BO.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new KO(BO.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function qL(e){var t=VL(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new KO(BO.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function BL(e,t,n){var r=cL(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ML(r,"GET",UL(e,n),i);return a.errorHandler=qL(t),a}function zL(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=cL(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new ML(o,"GET",function(e,t){return function(n,r){var i=LL(e,t,r);return FL(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=VL(t),s}function WL(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function KL(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=WL(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+PL(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",h=xL.getBlob(c,r,l);if(null===h)throw $O();var f={name:s.fullPath},d=cL(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new ML(d,"POST",UL(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=VL(t),v}var HL=Ze((function e(t,n,r,i){Xe(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function GL(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){FL(!1)}return FL(!!n&&-1!==(t||["active"]).indexOf(n)),n}var QL=262144;function YL(e,t,n,r,i,a,o,u){var s=new HL(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new KO(BO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var h=s.current,f=h+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(h,f);if(null===p)throw $O();var v=t.maxUploadRetryTime,y=new ML(n,"POST",(function(e,n){var i,o=GL(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?UL(t,a)(e,n):null,new HL(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=VL(e),y}var $L={STATE_CHANGED:"state_changed"},XL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function JL(e){switch(e){case"running":case"pausing":case"canceling":return XL.RUNNING;case"paused":return XL.PAUSED;case"success":return XL.SUCCESS;case"canceled":return XL.CANCELED;default:return XL.ERROR}}var ZL=Ze((function e(t,n,r){Xe(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function eM(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var tM=null,nM=function(){function e(){var t=this;Xe(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nL.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=nL.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=nL.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ze(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw tL("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw tL("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw tL("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw tL("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw tL("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),rM=function(e){nt(n,e);var t=at(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(nM);function iM(){return tM?tM():new rM}var aM=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Xe(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=NL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(BO.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(hL(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=QO()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(BO.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ze(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=WL(t,r,i),u={name:o.fullPath},s=cL(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=PL(o,n),h=e.maxUploadRetryTime,f=new ML(s,"POST",(function(e){var t;GL(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){FL(!1)}return FL(aL(t)),t}),h);return f.urlParams=u,f.headers=c,f.body=l,f.errorHandler=VL(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,iM,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new ML(n,"POST",(function(e){var t=GL(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){FL(!1)}n||FL(!1);var i=Number(n);return FL(!isNaN(i)),new HL(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=VL(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,iM,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=QL*this._chunkMultiplier,n=new HL(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=YL(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,iM,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(QL*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=BL(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,iM,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=KL(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,iM,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=YO(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=JL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new ZL(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(JL(this._state)){case XL.SUCCESS:eM(this._resolve.bind(null,this.snapshot))();break;case XL.CANCELED:case XL.ERROR:eM(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(JL(this._state)){case XL.RUNNING:case XL.PAUSED:e.next&&eM(e.next.bind(e,this.snapshot))();break;case XL.SUCCESS:e.complete&&eM(e.complete.bind(e))();break;case XL.CANCELED:case XL.ERROR:default:e.error&&eM(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),oM=function(){function e(t,n){Xe(this,e),this._service=t,this._location=n instanceof rL?n:rL.makeFromUrl(n,t.host)}return Ze(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new rL(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return TL(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new rL(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw ZO(e)}}]),e}();function uM(e,t,n){return sM.apply(this,arguments)}function sM(){return(sM=sn(rn().mark((function e(t,n,r){var i,a,o,u;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,cM(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,on(u.prefixes)),(a=n.items).push.apply(a,on(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,uM(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cM(e,t){null!=t&&"number"===typeof t.maxResults&&sL("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=zL(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,iM)}function lM(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=cL(t.fullServerUrl(),e.host,e._protocol),a=PL(n,r),o=e.maxOperationRetryTime,u=new ML(i,"PATCH",UL(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=qL(t),u}(e.storage,e._location,t,NL());return e.storage.makeRequestWithTokens(n,iM)}function hM(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=cL(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ML(r,"GET",jL(e,n),i);return a.errorHandler=qL(t),a}(e.storage,e._location,NL());return e.storage.makeRequestWithTokens(t,iM).then((function(e){if(null===e)throw new KO(BO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function fM(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=cL(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new ML(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=qL(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iM)}function dM(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new rL(e._location.bucket,n);return new oM(e.storage,r)}function pM(e,t){if(e instanceof mM){var n=e;if(null==n._bucket)throw new KO(BO.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WO+"' property when initializing the app?");var r=new oM(n,n._bucket);return null!=t?pM(r,t):r}return void 0!==t?dM(e,t):e}function vM(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof mM)return new oM(e,t);throw XO("To use ref(service, url), the first argument must be a Storage instance.")}return pM(e,t)}function yM(e,t){var n=null===t||void 0===t?void 0:t[WO];return null==n?null:rL.makeFromBucketSpec(n,e)}var mM=function(){function e(t,n,r,i,a){Xe(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=zO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rL.makeFromBucketSpec(i,this._host):yM(this._host,this.app.options)}return Ze(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=rL.makeFromBucketSpec(this._url,e):this._bucket=yM(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){sL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){sL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=sn(rn().mark((function e(){var t,n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=sn(rn().mark((function e(){var t,n;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new oM(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new iL(JO());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=lL(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new fL(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=sn(rn().mark((function e(t,n){var r,i,a,o;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),gM="@firebase/storage",kM="0.11.2",_M="storage";function wM(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new aM(e,new xL(t),n)}(e=nn(e),t,n)}function bM(e){return function(e){e._throwIfRoot("getMetadata");var t=BL(e.storage,e._location,NL());return e.storage.makeRequestWithTokens(t,iM)}(e=nn(e))}function xM(e){return function(e){var t={prefixes:[],items:[]};return uM(e,t).then((function(){return t}))}(e=nn(e))}function IM(e,t){return vM(e=nn(e),t)}function TM(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:xt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function EM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mM(r,i,a,n,rr)}$n(new cn(_M,EM,"PUBLIC").setMultipleInstances(!0)),cr(gM,kM,""),cr(gM,kM,"esm2017");var SM=function(){function e(t,n,r){Xe(this,e),this._delegate=t,this.task=n,this.ref=r}return Ze(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),CM=function(){function e(t,n){Xe(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ze(e,[{key:"snapshot",get:function(){return new SM(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new SM(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new SM(e,i,i._ref))}:{next:t.next?function(e){return t.next(new SM(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),NM=function(){function e(t,n){Xe(this,e),this._delegate=t,this._service=n}return Ze(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new RM(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new RM(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),RM=function(){function e(t,n){Xe(this,e),this._delegate=t,this.storage=n}return Ze(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return dM(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new CM(wM(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mL.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=kL(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new CM(new aM(this._delegate,new xL(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return xM(this._delegate).then((function(t){return new NM(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return cM(e=nn(e),t)}(this._delegate,e||void 0).then((function(e){return new NM(e,t.storage)}))}},{key:"getMetadata",value:function(){return bM(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return lM(e=nn(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return hM(nn(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),fM(nn(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw ZO(e)}}]),e}(),AM=function(){function e(t,n){Xe(this,e),this.app=t,this._delegate=n}return Ze(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(PM(e))throw XO("ref() expected a child path but got a URL, use refFromURL instead.");return new RM(IM(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!PM(e))throw XO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rL.makeFromUrl(e,this._delegate.host)}catch(t){throw XO("refFromUrl() expected a valid full URL but got an invalid one.")}return new RM(IM(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};TM(this._delegate,e,t,n)}}]),e}();function PM(e){return/^[A-Za-z]+:\/\//.test(e)}var DM="@firebase/storage-compat",OM="0.3.2",LM="storage-compat";function MM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new AM(r,i)}!function(e){var t={TaskState:XL,TaskEvent:$L,StringFormat:mL,Storage:AM,Reference:RM};e.INTERNAL.registerComponent(new cn(LM,MM,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(DM,OM)}(Ur);var FM=Ur.initializeApp({apiKey:"AIzaSyDpbrk1LE2ko6iFB35Y72lHZNmuyR-rF_E",authDomain:"olx-clone-91abd.firebaseapp.com",projectId:"olx-clone-91abd",storageBucket:"olx-clone-91abd.appspot.com",messagingSenderId:"609388084156",appId:"1:609388084156:web:906ac4bfe2a229fae549b9",measurementId:"G-C5BVL8W49X"});r.createRoot(document.getElementById("root")).render((0,l.jsx)(h.Provider,{value:FM,children:(0,l.jsx)(d,{children:(0,l.jsx)(Ye,{})})})),$e()}()}();
//# sourceMappingURL=main.ee5c537d.js.map